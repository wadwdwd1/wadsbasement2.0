var ScreenAspectRatioKeeper=pc.createScript("screenAspectRatioKeeper");ScreenAspectRatioKeeper.attributes.add("idealAspectRatio",{type:"number",default:1.7777}),ScreenAspectRatioKeeper.attributes.add("scaleBlendTall",{type:"number",default:0,min:0,max:1}),ScreenAspectRatioKeeper.attributes.add("scaleBlendWide",{type:"number",default:1,min:0,max:1}),ScreenAspectRatioKeeper.prototype.initialize=function(){this.calculateDimensions(),window.addEventListener("orientationchange",this.calculateDimensions.bind(this),!1),window.addEventListener("resize",this.calculateDimensions.bind(this),!1)},ScreenAspectRatioKeeper.prototype.calculateDimensions=function(){let e=this.entity.screen.resolution;e.x/e.y<this.idealAspectRatio?this.entity.screen.scaleBlend=this.scaleBlendTall:this.entity.screen.scaleBlend=this.scaleBlendWide};var CurvedWorld=pc.createScript("curvedWorld");CurvedWorld.attributes.add("curvePower",{type:"number",default:10,min:-50,max:50,title:"Curve Power",description:"Determines the amount of curviness to be applied."}),CurvedWorld.prototype.initialize=function(){this.activeCamera=this.app.root.findByName("Camera"),this.materials=this.app.assets.filter((function(e){return"material"===e.type})).map((e=>e.resource)),this.materials.forEach((e=>this.updateShader(e))),this.on("attr",(()=>{this.materials.forEach((e=>this.updateShaderUniforms(e)))}))},CurvedWorld.prototype.updateShader=function(e){e.chunks.transformVS="uniform vec3 curveDirection;\nuniform float curvePower;\nuniform vec3 curveCenterPos;\nuniform vec3 curveCameraDirection;\n#ifdef PIXELSNAP\nuniform vec4 uScreenSize;\n#endif\n#ifdef MORPHING\nuniform vec4 morph_weights_a;\nuniform vec4 morph_weights_b;\n#endif\n#ifdef MORPHING_TEXTURE_BASED\nuniform vec4 morph_tex_params;\nvec2 getTextureMorphCoords() {\n    float vertexId = morph_vertex_id;\n    vec2 textureSize = morph_tex_params.xy;\n    vec2 invTextureSize = morph_tex_params.zw;\n    // turn vertexId into int grid coordinates\n    float morphGridV = floor(vertexId * invTextureSize.x);\n    float morphGridU = vertexId - (morphGridV * textureSize.x);\n    // convert grid coordinates to uv coordinates with half pixel offset\n    return (vec2(morphGridU, morphGridV) * invTextureSize) + (0.5 * invTextureSize);\n}\n#endif\n#ifdef MORPHING_TEXTURE_BASED_POSITION\nuniform highp sampler2D morphPositionTex;\n#endif\nmat4 getModelMatrix() {\n    #ifdef DYNAMICBATCH\n    return getBoneMatrix(vertex_boneIndices);\n    #elif defined(SKIN)\n    return matrix_model * getSkinMatrix(vertex_boneIndices, vertex_boneWeights);\n    #elif defined(INSTANCING)\n    return mat4(instance_line1, instance_line2, instance_line3, instance_line4);\n    #else\n    return matrix_model;\n    #endif\n}\nvec4 getPosition() {\n    dModelMatrix = getModelMatrix();\n    vec3 localPos = vertex_position;\n    #ifdef NINESLICED\n    // outer and inner vertices are at the same position, scale both\n    localPos.xz *= outerScale;\n    // offset inner vertices inside\n    // (original vertices must be in [-1;1] range)\n    vec2 positiveUnitOffset = clamp(vertex_position.xz, vec2(0.0), vec2(1.0));\n    vec2 negativeUnitOffset = clamp(-vertex_position.xz, vec2(0.0), vec2(1.0));\n    localPos.xz += (-positiveUnitOffset * innerOffset.xy + negativeUnitOffset * innerOffset.zw) * vertex_texCoord0.xy;\n    vTiledUv = (localPos.xz - outerScale + innerOffset.xy) * -0.5 + 1.0; // uv = local pos - inner corner\n    localPos.xz *= -0.5; // move from -1;1 to -0.5;0.5\n    localPos = localPos.xzy;\n    #endif\n    #ifdef MORPHING\n    #ifdef MORPHING_POS03\n    localPos.xyz += morph_weights_a[0] * morph_pos0;\n    localPos.xyz += morph_weights_a[1] * morph_pos1;\n    localPos.xyz += morph_weights_a[2] * morph_pos2;\n    localPos.xyz += morph_weights_a[3] * morph_pos3;\n    #endif // MORPHING_POS03\n    #ifdef MORPHING_POS47\n    localPos.xyz += morph_weights_b[0] * morph_pos4;\n    localPos.xyz += morph_weights_b[1] * morph_pos5;\n    localPos.xyz += morph_weights_b[2] * morph_pos6;\n    localPos.xyz += morph_weights_b[3] * morph_pos7;\n    #endif // MORPHING_POS47\n    #endif // MORPHING\n    #ifdef MORPHING_TEXTURE_BASED_POSITION\n    // apply morph offset from texture\n    vec2 morphUV = getTextureMorphCoords();\n    vec3 morphPos = texture2D(morphPositionTex, morphUV).xyz;\n    localPos += morphPos;\n    #endif\n    vec4 posW = dModelMatrix * vec4(localPos, 1.0);\n    float amountX = curveCameraDirection.x * pow(posW.x - curveCenterPos.x, 2.0);\n    float amountY = curveCameraDirection.y * pow(posW.y - curveCenterPos.y, 2.0);\n    float amountZ = curveCameraDirection.z * pow(posW.z - curveCenterPos.z, 2.0);\n    float amountSum = (amountX * curveCameraDirection.x + amountY * curveCameraDirection.y + amountZ * curveCameraDirection.z) * curvePower;\n    posW.y += -amountSum;\n    #ifdef SCREENSPACE\n    posW.zw = vec2(0.0, 1.0);\n    #endif\n    dPositionW = posW.xyz;\n    vec4 screenPos;\n    #ifdef UV1LAYOUT\n    screenPos = vec4(vertex_texCoord1.xy * 2.0 - 1.0, 0.5, 1);\n    #else\n    #ifdef SCREENSPACE\n    screenPos = posW;\n    #else\n    screenPos = matrix_viewProjection * posW;\n    #endif\n    #ifdef PIXELSNAP\n    // snap vertex to a pixel boundary\n    screenPos.xy = (screenPos.xy * 0.5) + 0.5;\n    screenPos.xy *= uScreenSize.xy;\n    screenPos.xy = floor(screenPos.xy);\n    screenPos.xy *= uScreenSize.zw;\n    screenPos.xy = (screenPos.xy * 2.0) - 1.0;\n    #endif\n    #endif\n    return screenPos;\n}\nvec3 getWorldPosition() {\n    return dPositionW;\n}\n",e.update(),this.updateShaderUniforms(e)},CurvedWorld.prototype.update=function(){this.materials&&this.materials.forEach((e=>this.updateShaderUniforms(e)))},CurvedWorld.prototype.updateShaderUniforms=function(e){e.setParameter("curvePower",.001*this.curvePower);const n=this.activeCamera.getPosition();e.setParameter("curveCenterPos",[n.x,n.y,n.z]);const r=this.activeCamera.forward;e.setParameter("curveCameraDirection",[r.x,r.y,r.z])};var ObstacleManager=pc.createScript("obstacleManager");ObstacleManager.attributes.add("startingModulesWihout",{type:"number",default:3}),ObstacleManager.attributes.add("minModulesBetween",{type:"number",default:1}),ObstacleManager.attributes.add("baseObstacleChance",{type:"number",default:.5}),ObstacleManager.attributes.add("obstacleChanceIncrement",{type:"number",default:.5}),ObstacleManager.attributes.add("coinModuleChance",{type:"number",default:.5}),ObstacleManager.attributes.add("letterModuleChance",{type:"number",default:.5}),ObstacleManager.attributes.add("goalModule",{type:"entity"}),ObstacleManager.attributes.add("obstacleThrowRange",{type:"number"}),ObstacleManager.attributes.add("obstacleThrowDir",{type:"vec3"}),ObstacleManager.attributes.add("obstacleThrowForce",{type:"number"}),ObstacleManager.attributes.add("obstacleThrowSpin",{type:"number"}),ObstacleManager.attributes.add("obstacleThrowRand",{type:"number"}),ObstacleManager.attributes.add("obstacleThrowForceTurbo",{type:"number"}),ObstacleManager.attributes.add("obstacleThrowDirTurbo",{type:"vec3"}),ObstacleManager.attributes.add("levelManager_e",{type:"entity"}),ObstacleManager.attributes.add("possibleObstacles",{type:"json",schema:[{name:"obstacles",type:"asset",array:!0}]}),ObstacleManager.attributes.add("possibleCoinModules",{type:"json",schema:[{name:"modules",type:"asset",array:!0}]}),ObstacleManager.attributes.add("possibleLetterModules",{type:"json",schema:[{name:"modules",type:"asset",array:!0}]}),ObstacleManager.attributes.add("tutorialLevelObstacles",{type:"json",schema:[{name:"obstacles",type:"asset",array:!0}]}),ObstacleManager.attributes.add("tutorialLevelModules",{type:"json",schema:[{name:"module",type:"asset"},{name:"triggerModule",type:"asset"}],array:!0}),ObstacleManager.attributes.add("minModulesBetweenTutorial",{type:"number",default:1}),ObstacleManager.attributes.add("startingModulesWihoutTutorial",{type:"number",default:5}),ObstacleManager.attributes.add("completelyBlockModulesTutorial",{type:"asset"}),ObstacleManager.attributes.add("middleOpenModulesTutorial",{type:"asset"}),ObstacleManager.attributes.add("letterModuleTutorial",{type:"asset"}),ObstacleManager.attributes.add("turboTriggerModule",{type:"asset"}),ObstacleManager.prototype.initialize=function(){this.levelManager=this.levelManager_e.script.levelManager,this.levelManager.updateLevelProgression(),this.levelProgression=this.levelManager.currentProgression,ObstacleManager.instance=this,this.obstacleChance=this.levelProgression.baseObstacleChance,this.currentModuleCount=-1,this.currentTutorialModuleCount=0,this.currentTutorialLetterCount=0,this.lastObtacleIndex=0,this.app.on("game:restart",this.restart,this),this.app.on("game:beforeRegenerate",this.restart,this)},ObstacleManager.prototype.restart=function(){this.currentModuleCount=-1,this.lastObtacleIndex=0,this.currentTutorialModuleCount=0,this.currentTutorialLetterCount=0,this.obstacleChance=this.levelProgression.baseObstacleChance},ObstacleManager.prototype.update=function(e){},ObstacleManager.prototype.getObstacle=function(){if(this.currentModuleCount++,this.currentModuleCount<this.startingModulesWihout)return null;if(Math.random()<this.obstacleChance&&this.currentModuleCount-this.lastObtacleIndex>this.levelProgression.minModulesBetweenObstacles){this.obstacleChance=this.levelProgression.baseObstacleChance;let e=Math.floor(Math.random()*this.possibleObstacles.obstacles.length);return this.lastObtacleIndex=this.currentModuleCount,this.possibleObstacles.obstacles[e].resource.instantiate()}return this.obstacleChance+=this.levelProgression.obstacleChanceIncrement,Math.random()<this.coinModuleChance?this.possibleCoinModules.modules[Math.floor(Math.random()*this.possibleCoinModules.modules.length)].resource.instantiate():Math.random()<this.letterModuleChance&&PickUpletterManager.instance.hasAnyAvailableLetter()?this.spawnLetterModule(!1):null},ObstacleManager.prototype.getObstacleTutorial=function(){if(this.currentModuleCount++,this.currentTutorialModuleCount<this.tutorialLevelModules.length){if(this.currentModuleCount<this.startingModulesWihoutTutorial)return null;if((this.currentModuleCount-this.startingModulesWihoutTutorial)%this.minModulesBetweenTutorial!=0)return null;let e=this.currentTutorialModuleCount%this.tutorialLevelModules.length,t=this.tutorialLevelModules[e];this.currentTutorialModuleCount++,this.currentTutorialModuleCount>=this.tutorialLevelModules.length&&(this.currentModuleCount=-1);let a=t.module.resource.instantiate();if(t.triggerModule){let e=t.triggerModule.resource.instantiate();a.addChild(e),e.setLocalPosition(0,0,0),e.setLocalEulerAngles(0,0,0),e.setLocalScale(1,1,1)}return a}if(this.currentTutorialLetterCount<this.possibleCoinModules.modules.length){if(0==this.currentModuleCount)return;return this.currentModuleCount<this.startingModulesWihoutTutorial?null:(this.currentTutorialLetterCount++,this.currentTutorialLetterCount>=this.possibleCoinModules.modules.length&&(this.currentModuleCount=-1),this.spawnLetterModule(!0))}if(0==this.currentModuleCount)return null;if(1==this.currentModuleCount){let e=this.middleOpenModulesTutorial.resource.instantiate(),t=this.turboTriggerModule.resource.instantiate();return e.addChild(t),t.setLocalPosition(0,0,0),t.setLocalEulerAngles(0,0,0),t.setLocalScale(1,1,1),e}if(this.currentModuleCount<this.startingModulesWihoutTutorial)return this.middleOpenModulesTutorial.resource.instantiate();return this.completelyBlockModulesTutorial.resource.instantiate()},ObstacleManager.prototype.spawnLetterModule=function(e){let t=null;t=e?this.letterModuleTutorial.resource.instantiate():this.possibleLetterModules.modules[Math.floor(Math.random()*this.possibleLetterModules.modules.length)].resource.instantiate();let a=t.find((function(e){return e.script&&e.script.has("pickUpletterSpawner")}));return t.letterSpawners=a,t},ObstacleManager.prototype.releaseObstacle=function(e){if(e==this.goalModule)this.goalModule.enabled=!1,this.goalModule.currentModule&&(this.goalModule.currentModule.currentObstacle=null),this.goalModule.currentModule=null,this.goalModule.reparent(null);else{if(e.letterSpawners&&e.letterSpawners.length>0)for(let t=0;t<e.letterSpawners.length;t++)e.letterSpawners[t].script&&e.letterSpawners[t].script.pickUpletterSpawner&&e.letterSpawners[t].script.pickUpletterSpawner.release();e.destroy()}},ObstacleManager.prototype.getGoal=function(){return this.goalModule.enabled=!0,this.goalModule};var TransitionManager=pc.createScript("transitionManager");TransitionManager.attributes.add("transitionImageEntity",{type:"entity"}),TransitionManager.attributes.add("transitionTime",{type:"number",default:1}),TransitionManager.attributes.add("message_text",{type:"entity"}),TransitionManager.attributes.add("message_text_anim_time",{type:"number",default:1}),TransitionManager.attributes.add("genericPopUp_e",{type:"entity"}),TransitionManager.attributes.add("genericPopUpText_e",{type:"entity"}),TransitionManager.attributes.add("genericPopUpContinueButton_e",{type:"entity"}),TransitionManager.attributes.add("confirmationPopUp_e",{type:"entity"}),TransitionManager.attributes.add("confirmationPopUp_title_e",{type:"entity"}),TransitionManager.attributes.add("confirmationPopUp_acceptButton_e",{type:"entity"}),TransitionManager.attributes.add("confirmationPopUp_declineButton_e",{type:"entity"}),TransitionManager.attributes.add("confirmationPopUp_acceptButtonText_e",{type:"entity"}),TransitionManager.attributes.add("confirmationPopUp_declineButtonText_e",{type:"entity"}),TransitionManager.prototype.initialize=function(){TransitionManager.instance=this,this.genericPopUpContinueButton_e.script.managedButton.on("click",this.handleContinuePopUp,this),this.genericPopUp=this.genericPopUp_e.script.genericPopUp,this.genericPopUpText=this.genericPopUpText_e.element,this.confirmationPopUp=this.confirmationPopUp_e.script.genericPopUp,this.confirmationPopUp_acceptButton_e.script.managedButton.on("click",this.handleConfirmationAccept,this),this.confirmationPopUp_declineButton_e.script.managedButton.on("click",this.handleConfirmationDecline,this),this.message_text.element.text="",this.transitionImageElement=this.transitionImageEntity.element,this.transitionImageEntity.enabled=!1,this.genericPopUp.hide(!0),this.confirmationPopUp.hide(!0)},TransitionManager.prototype.update=function(){DebugManager.enabled&&InputManager.instance.wasPressed(pc.KEY_5)&&this.fullTransition()},TransitionManager.prototype.showMessage=function(t,e=0,n=0,i=null){this.message_text.setLocalScale(0,0,0),this.message_text.enabled=!0,this.message_text.element.text=t,0==e&&(e=this.message_text_anim_time);let a=this.message_text.tween(this.message_text.getLocalScale()).to({x:1,y:1,z:1},1,pc.ElasticOut).delay(n),o=this.message_text.tween(this.message_text.getLocalScale()).to({x:0,y:0,z:0},.35,pc.BackIn).delay(e+n);a.chain(o),a.start(),o.on("complete",function(){this.message_text.enabled=!1,i&&i()}.bind(this))},TransitionManager.prototype.showMessagePopUp=function(t,e=null){InputManager.instance.addInputBlocker("transitionPopUp"),this.genericPopUpText.text=t,this.genericPopUp.show(function(){InputManager.instance.removeInputBlocker("transitionPopUp"),null!=e&&e()}.bind(this))},TransitionManager.prototype.handleContinuePopUp=function(){this.genericPopUp.hide()},TransitionManager.prototype.showConfirmationPopUp=function(t,e=null){InputManager.instance.addInputBlocker("transitionConfirm"),this.genericPopUpText.text=t,this.confirmationPopUp_title_e.element.text=t,this.confirmationCallback=e,this.confirmationPopUp.show(function(){InputManager.instance.removeInputBlocker("transitionConfirm"),this.handleConfirmationHide()}.bind(this))},TransitionManager.prototype.handleConfirmationAccept=function(){this.confirmationPopUp.locked||this.confirmationPopUp.leaving||(this.confirmationResponse=!0,this.confirmationPopUp.hide())},TransitionManager.prototype.handleConfirmationDecline=function(){this.confirmationPopUp.locked||this.confirmationPopUp.leaving||(this.confirmationResponse=!1,this.confirmationPopUp.hide())},TransitionManager.prototype.handleConfirmationHide=function(){null!=this.confirmationCallback&&this.confirmationCallback(this.confirmationResponse)},TransitionManager.prototype.countDown=function(t=null,e=3,n="GO!"){this.message_text.setLocalScale(0,0,0),this.message_text.enabled=!0,this.secondsCount={value:e};let i=this.app.tween(this.secondsCount).to({value:0},e,pc.Linear),a=-1;i.on("update",function(t){let e=Math.ceil(this.secondsCount.value);this.message_text.element.text=e,a!=e&&e>0&&(a=e);let n=this.secondsCount.value%1,i=pc.ElasticOut(1-n);this.message_text.setLocalScale(i,i,i)}.bind(this)),i.on("complete",function(){this.message_text.setLocalScale(0,0,0),this.message_text.enabled=!0,this.message_text.element.text=n,t&&t()}.bind(this));let o=this.message_text.tween(this.message_text.getLocalScale()).to({x:1,y:1,z:1},.75,pc.ElasticOut);o.on("complete",function(){}.bind(this));let s=this.message_text.tween(this.message_text.getLocalScale()).to({x:0,y:0,z:0},.15,pc.BackIn);s.on("complete",function(){this.message_text.enabled=!1}.bind(this)),i.chain(o,s),i.start()},TransitionManager.prototype.cover=function(t=null){this.transitionImageEntity.enabled=!0;this.dataDummy={value:0},this.transitionImageElement.opacity=this.dataDummy.value;let e=this.app.tween(this.dataDummy).to({value:1},this.transitionTime,pc.QuarticIn);e.on("update",function(t){this.transitionImageElement.opacity=this.dataDummy.value}.bind(this)),e.on("complete",function(e){t&&t()}.bind(this)),e.start()},TransitionManager.prototype.uncover=function(t=null){this.dataDummy={value:1},this.transitionImageElement.opacity=this.dataDummy.value;let e=this.app.tween(this.dataDummy).to({value:0},this.transitionTime,pc.QuarticOut).delay(.1);e.on("update",function(t){this.transitionImageElement.opacity=this.dataDummy.value}.bind(this)),e.on("complete",function(e){t&&t(),this.transitionImageEntity.enabled=!1}.bind(this)),e.start()},TransitionManager.prototype.fullTransition=function(t,e){this.cover(function(){t&&t(),this.uncover(e)}.bind(this))},TransitionManager.prototype.transitionWithMessage=function(t,e){this.dummyData={value:0},this.showMessage(t);let n=this.entity.tween(this.dummyData).to({value:1},this.message_animation_time,pc.CubicInOut);n.on("update",function(t){}.bind(this)),n.on("complete",function(){let t=function(){this.message_text.enabled=!1,TransitionManager.instance.uncover(),e&&e()}.bind(this);TransitionManager.instance.cover(t)}.bind(this)),n.start()};var AvixUtils=pc.createScript("avixUtils");AvixUtils.prototype.initialize=function(){AvixUtils.app=this.app},AvixUtils.prototype.update=function(t){AvixUtils.dt=t},AvixUtils.clamp_angle=function(t){return(t%=360)<0&&(t+=360),t},AvixUtils.angleDiff=function(t,e){if((t*=pc.math.DEG_TO_RAD)===(e*=pc.math.DEG_TO_RAD))return 0;var n=Math.sin(t),i=Math.cos(t),r=n*Math.sin(e)+i*Math.cos(e);return r>=1?0:r<=-1?Math.PI*pc.math.RAD_TO_DEG:(r=Math.acos(r))*pc.math.RAD_TO_DEG},AvixUtils.angleClockwise=function(t,e){t*=pc.math.DEG_TO_RAD,e*=pc.math.DEG_TO_RAD;var n=Math.sin(t);return Math.cos(t)*Math.sin(e)-n*Math.cos(e)<=0},AvixUtils.distanceFlatSq=function(t,e){var n=e.x-t.x,i=e.z-t.z;return n*n+i*i},AvixUtils.distanceFlat=function(t,e){return AvixUtils.distanceTo2D(t.x,t.y,e.z,e.z)},AvixUtils.distanceTo2D=function(t,e,n,i){var r=n-t,a=i-e;return Math.sqrt(r*r+a*a)},AvixUtils.angleTo2D=function(t,e,n,i){var r=n-t,a=i-e;return Math.atan2(a*pc.math.DEG_TO_RAD,r*pc.math.DEG_TO_RAD)},AvixUtils.mulScalarVec3_out=function(t,e,n){n.copy(t),n.mulScalar(e)},AvixUtils.to_radians=function(t){return t/(180/Math.PI)},AvixUtils.to_degrees=function(t){return t*(180/Math.PI)},AvixUtils.intersectSegmentWithRect=function(t,e,n,i){let r=new pc.Vec2(0,0),a=[];return r=AvixUtils.lineSegmentsIntersection(new pc.Vec2(t.x,t.y),new pc.Vec2(t.x,e.y),n,i),null!=r&&a.push(r.clone()),r=AvixUtils.lineSegmentsIntersection(new pc.Vec2(t.x,e.y),new pc.Vec2(e.x,e.y),n,i),null!=r&&a.push(r.clone()),r=AvixUtils.lineSegmentsIntersection(new pc.Vec2(e.x,e.y),new pc.Vec2(e.x,t.y),n,i),null!=r&&a.push(r.clone()),r=AvixUtils.lineSegmentsIntersection(new pc.Vec2(e.x,t.y),new pc.Vec2(t.x,t.y),n,i),null!=r&&a.push(r.clone()),a},AvixUtils.lineSegmentsIntersection=function(t,e,n,i){let r=new pc.Vec2(0,0),a=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0==a)return null;var l=((n.x-t.x)*(i.y-n.y)-(n.y-t.y)*(i.x-n.x))/a,c=((n.x-t.x)*(e.y-t.y)-(n.y-t.y)*(e.x-t.x))/a;return l<0||l>1||c<0||c>1?null:(r.x=t.x+l*(e.x-t.x),r.y=t.y+l*(e.y-t.y),r)},AvixUtils.inverseTransformPoint=function(t,e){let n=t.getWorldTransform().clone();return n.invert(),n.transformPoint(e)},AvixUtils.transformPoint=function(t,e){return t.getWorldTransform().clone().transformPoint(e)},AvixUtils.randomInteger=function(t,e){return Math.floor(Math.random()*(e-t))+t},AvixUtils.vec2Angle=function(t,e){let n=Math.sqrt(t.lengthSq()*e.lengthSq());if(n<1e-5)return 0;let i=pc.math.clamp(t.dot(e)/n,-1,1);return Math.acos(i)*pc.math.RAD_TO_DEG},AvixUtils.vec2AngleSigned=function(t,e){return AvixUtils.vec2Angle(t,e)*Math.sign(t.x*e.y-t.y*e.x)},AvixUtils.smoothDamp=function(t,e,n,i,r,a){a||(a=AvixUtils.dt),r||(r=1/0);let l=2/(i=Math.max(1e-4,i)),c=l*a,s=1/(1+c+.48*c*c+.235*c*c*c),o=t-e,x=e,u=r*i;o=pc.math.clamp(o,-u,u),e=t-o;let v=(n.value+l*o)*a;n.value=(n.value-l*v)*s;let h=e+(o+v)*s;return x-t>0==h>x&&(h=x,n.value=(h-x)/a),h},AvixUtils.smoothDampAngle=function(t,e,n,i,r,a){return a||(a=AvixUtils.dt),r||(r=1/0),e=t+AvixUtils.deltaAngle(t,e),AvixUtils.smoothDamp(t,e,n,i,r,a)},AvixUtils.smoothDampVec3=function(t,e,n,i,r,a){let l=t.clone();if(l.sub(e),l.lengthSq()<=.001)return{currentVelocity:new pc.Vec3,currentPosition:e};let c=0,s=0,o=0,x=2/(i=Math.max(1e-4,i)),u=x*a,v=1/(1+u+.48*u*u+.235*u*u*u),h=t.x-e.x,A=t.y-e.y,p=t.z-e.z,y=e,f=r*i,U=h*h+A*A+p*p;if(U>f*f){var g=Math.sqrt(U);h=h/g*f,A=A/g*f,p=p/g*f}e.x=t.x-h,e.y=t.y-A,e.z=t.z-p;let M=(n.x+x*h)*a,z=(n.y+x*A)*a,D=(n.z+x*p)*a;n.x=(n.x-x*M)*v,n.y=(n.y-x*z)*v,n.z=(n.z-x*D)*v,c=e.x+(h+M)*v,s=e.y+(A+z)*v,o=e.z+(p+D)*v;let d=y.x-t.x,_=y.y-t.y,S=y.z-t.z;return d*(c-y.x)+_*(s-y.y)+S*(o-y.z)>0&&(c=y.x,s=y.y,o=y.z,n.x=(c-y.x)/a,n.y=(s-y.y)/a,n.z=(o-y.z)/a),t.x=c,t.y=s,t.z=o,{currentVelocity:n,currentPosition:t.clone()}},AvixUtils.deltaAngle=function(t,e){let n=AvixUtils.repeat(e-t,360);return n>180&&(n-=360),n},AvixUtils.repeat=function(t,e){return pc.math.clamp(t-Math.floor(t/e)*e,0,e)},AvixUtils.pingPong=function(t,e){return t=AvixUtils.repeat(t,2*e),e-Math.abs(t-e)},AvixUtils.vec3Angle=function(t,e){let n=Math.sqrt(t.lengthSq()*e.lengthSq());if(n<1e-9)return 0;let i=pc.math.clamp(t.dot(e)/n,-1,1);return Math.acos(i)*pc.math.RAD_TO_DEG},AvixUtils.vec3SignedAngle=function(t,e,n){let i=AvixUtils.vec3Angle(t,e),r=t.y*e.z-t.z*e.y,a=t.z*e.x-t.x*e.z,l=t.x*e.y-t.y*e.x;return i*Math.sign(n.x*r+n.y*a+n.z*l)},AvixUtils.moveTowards=function(t,e,n){return Math.abs(e-t)<=n?e:t+Math.sign(e-t)*n},AvixUtils.moveTowardsVec3=function moveTowards(t,e,n,i){let r=e.x-t.x,a=e.y-t.y,l=e.z-t.z,c=r*r+a*a+l*l;if(0==c||n>=0&&c<=n*n)return e;let s=Math.sqrt(c);i.set(t.x+r/s*n,t.y+a/s*n,t.z+l/s*n)};var m=new pc.Mat4;pc.Quat.prototype.lookAt=function(t,e,n){return m.setLookAt(t,e,n||pc.Vec3.UP),this.setFromMat4(m),this},AvixUtils.HSVtoRGB=function(t,e,n){var i,r,a,l,c,s,o,x;switch(1===arguments.length&&(e=t.s,n=t.v,t=t.h),s=n*(1-e),o=n*(1-(c=6*t-(l=Math.floor(6*t)))*e),x=n*(1-(1-c)*e),l%6){case 0:i=n,r=x,a=s;break;case 1:i=o,r=n,a=s;break;case 2:i=s,r=n,a=x;break;case 3:i=s,r=o,a=n;break;case 4:i=x,r=s,a=n;break;case 5:i=n,r=s,a=o}return{r:Math.round(255*i),g:Math.round(255*r),b:Math.round(255*a)}},AvixUtils.RGBtoHSV=function(t,e,n){1===arguments.length&&(e=t.g,n=t.b,t=t.r);var i,r=Math.max(t,e,n),a=Math.min(t,e,n),l=r-a,c=0===r?0:l/r,s=r/255;switch(r){case a:i=0;break;case t:i=e-n+l*(e<n?6:0),i/=6*l;break;case e:i=n-t+2*l,i/=6*l;break;case n:i=t-e+4*l,i/=6*l}return{h:i,s:c,v:s}};var AvixSine=pc.createScript("avixSine");AvixSine.attributes.add("unscaled_update",{type:"boolean"}),AvixSine.schemaSine=[{name:"enabled",type:"boolean",default:!1},{name:"wave",type:"string",default:"sine",enum:[{sine:"sine"},{triangle:"triangle"},{sawtooth:"sawtooth"},{reverseSawtooth:"reverseSawtooth"},{square:"square"}]},{name:"vector",type:"vec3"},{name:"vectorRandom",type:"vec3"},{name:"period",type:"number",default:4},{name:"periodRandom",type:"number",default:0},{name:"periodOffset",type:"number",default:0},{name:"periodOffsetRandom",type:"number",default:0},{name:"magnitude",type:"number",default:1},{name:"magnitudeRandom",type:"number",default:0}],AvixSine.attributes.add("sineScale",{type:"json",schema:AvixSine.schemaSine}),AvixSine.attributes.add("sinePosition",{type:"json",schema:AvixSine.schemaSine}),AvixSine.attributes.add("sineAngle",{type:"json",schema:AvixSine.schemaSine}),AvixSine.prototype.initialize=function(){this._2pi=2*Math.PI,this._pi_2=Math.PI/2,this._3pi_2=3*Math.PI/2,this.sineScale.movement="scale",this.sinePosition.movement="position",this.sineAngle.movement="angle",this.sineScaleNew=this.initSine(this.sineScale),this.sinePositionNew=this.initSine(this.sinePosition),this.sineAngleNew=this.initSine(this.sineAngle),this.app.on("frameupdate",this.unscaledUpdate,this)},AvixSine.prototype.initSine=function(e){let t={};switch(0==e.period?t.i=0:(t.i=e.periodOffset/e.period*this._2pi,t.i+=Math.random()*e.periodOffsetRandom/e.period*this._2pi),t.mag=Math.random()*e.magnitudeRandom,t.vectorRandom=new pc.Vec3(Math.random()*e.vectorRandom.x,Math.random()*e.vectorRandom.y,Math.random()*e.vectorRandom.z),t.periodRandom=Math.random()*e.periodRandom,t.initialValue=new pc.Vec3(0,0,0),e.movement){case"scale":t.initialValue=this.entity.getLocalScale().clone();break;case"position":t.initialValue=this.entity.getLocalPosition().clone();break;case"angle":t.initialValue=this.entity.getLocalEulerAngles().clone()}return t.lastKnownValue=t.initialValue,t.r=new pc.Vec3,t.r2=new pc.Vec3,t},AvixSine.prototype.update=function(e){this.unscaled_update||this.generalUpdate(e)},AvixSine.prototype.unscaledUpdate=function(e){this.unscaled_update&&this.enabled&&this.generalUpdate(e/1e3)},AvixSine.prototype.generalUpdate=function(e){this.updateSine(this.sineScaleNew,this.sineScale,e),this.updateSine(this.sinePositionNew,this.sinePosition,e),this.updateSine(this.sineAngleNew,this.sineAngle,e)},AvixSine.prototype.updateSine=function(e,t,i){if(!t.enabled)return;t.period+e.periodRandom==0?e.i=0:(e.i+=i/(t.period+e.periodRandom)*this._2pi,e.i=e.i%this._2pi);let n=this.waveFunc(t,e.i)*(t.magnitude+e.mag);if("scale"==t.movement){this.entity.getLocalScale().equals(e.lastKnownValue)||(e.r.sub2(this.entity.getLocalScale(),e.lastKnownValue),e.initialValue.add(e.r)),e.r.x=e.initialValue.x+(t.vector.x+e.vectorRandom.x)*n,e.r.y=e.initialValue.y+(t.vector.y+e.vectorRandom.y)*n,e.r.z=e.initialValue.z+(t.vector.z+e.vectorRandom.z)*n;let i=e.r.clone();this.entity.setLocalScale(i),e.lastKnownValue=this.entity.getLocalScale()}else if("position"==t.movement){this.entity.getLocalPosition().equals(e.lastKnownValue)||(e.r.sub2(this.entity.getLocalPosition().clone(),e.lastKnownValue),e.initialValue.add(e.r)),e.r.x=e.initialValue.x+(t.vector.x+e.vectorRandom.x)*n,e.r.y=e.initialValue.y+(t.vector.y+e.vectorRandom.y)*n,e.r.z=e.initialValue.z+(t.vector.z+e.vectorRandom.z)*n;let i=e.r.clone();this.entity.setLocalPosition(i),e.lastKnownValue=this.entity.getLocalPosition().clone()}else if("angle"==t.movement){this.entity.getLocalEulerAngles().equals(e.lastKnownValue)||(e.r.sub2(this.entity.getLocalEulerAngles().clone(),e.lastKnownValue),e.initialValue.add(e.r)),e.r.x=e.initialValue.x+(t.vector.x+e.vectorRandom.x)*n,e.r.y=e.initialValue.y+(t.vector.y+e.vectorRandom.y)*n,e.r.z=e.initialValue.z+(t.vector.z+e.vectorRandom.z)*n;let i=e.r.clone();this.entity.setLocalEulerAngles(i),e.lastKnownValue=this.entity.getLocalEulerAngles().clone()}},AvixSine.prototype.waveFunc=function(e,t){switch(t%=this._2pi,e.wave){case"sine":return Math.sin(t);case"triangle":return t<=this._pi_2?t/this._pi_2:t<=this._3pi_2?1-2*(t-this._pi_2)/Math.PI:(t-this._3pi_2)/this._pi_2-1;case"sawtooth":return 2*t/this._2pi-1;case"reverseSawtooth":return-2*t/this._2pi+1;case"square":return t<Math.PI?-1:1}return 0};var AvixRotate=pc.createScript("avixRotate");AvixRotate.attributes.add("speed",{type:"vec3"}),AvixRotate.attributes.add("speedRandom",{type:"vec3"}),AvixRotate.attributes.add("randomSignX",{type:"boolean"}),AvixRotate.attributes.add("randomSignY",{type:"boolean"}),AvixRotate.attributes.add("randomSignZ",{type:"boolean"}),AvixRotate.prototype.initialize=function(){this.signX=1,this.randomSignX&&Math.random()>.5&&(this.signX=-1),this.signY=1,this.randomSignY&&Math.random()>.5&&(this.signY=-1),this.signZ=1,this.randomSignZ&&Math.random()>.5&&(this.signZ=-1),this.currentRandomSpeed=new pc.Vec3(Math.random()*this.speedRandom.x,Math.random()*this.speedRandom.y,Math.random()*this.speedRandom.z)},AvixRotate.prototype.update=function(t){this.entity.rotateLocal((this.speed.x+this.currentRandomSpeed.x)*t*this.signX,(this.speed.y+this.currentRandomSpeed.y)*t*this.signY,(this.speed.z+this.currentRandomSpeed.z)*t*this.signZ)};var AvixCameraShake=pc.createScript("avixCameraShake");AvixCameraShake.attributes.add("unscaled_update",{type:"boolean",default:!0}),AvixCameraShake.attributes.add("camera_object",{type:"entity"}),AvixCameraShake.attributes.add("default_shake",{type:"json",schema:[{name:"rotationIntensity",type:"number",default:.1},{name:"duration",type:"number",default:.1},{name:"decay",type:"boolean",default:!0}]}),AvixCameraShake.prototype.initialize=function(){AvixCameraShake.instance=this,this.app.on("frameupdate",this.unscaledUpdate,this),this.orEulerHolder=new pc.Vec3,this.orEulerHolder.copy(this.camera_object.getLocalEulerAngles()),this.newEulerHolder=new pc.Vec3,this.current_shake={},this.setCurrentShake(),this.shaking=!1,this.intensityMultiplier=1},AvixCameraShake.prototype.update=function(e){this.unscaled_update||this.generalUpdate(e)},AvixCameraShake.prototype.unscaledUpdate=function(e){this.unscaled_update&&this.enabled&&this.generalUpdate(e/1e3)},AvixCameraShake.prototype.generalUpdate=function(e){if(InputManager.instance.wasPressed(pc.KEY_7)&&this.shake(),this.shaking)if(this.current_shake.time+=e,this.current_shake.time<this.current_shake.duration){let t=this.current_shake.rotationIntensity*this.intensityMultiplier;this.newEulerHolder.set(Math.random()*t-t/2+this.orEulerHolder.x,Math.random()*t-t/2+this.orEulerHolder.y,this.orEulerHolder.z),this.camera_object.setLocalEulerAngles(this.newEulerHolder.x,this.newEulerHolder.y,this.newEulerHolder.z),this.current_shake.decay&&(this.intensityMultiplier-=e/this.current_shake.duration)}else this.shaking=!1,this.camera_object.setLocalEulerAngles(this.orEulerHolder.x,this.orEulerHolder.y,this.orEulerHolder.z)},AvixCameraShake.prototype.shake=function(e,t){this.shaking||(isNaN(e)?this.setCurrentShake(e):(this.current_shake.rotationIntensity=e,t&&!isNaN(t)&&(this.current_shake.duration=t)),this.current_shake.time=0,this.intensityMultiplier=1,this.shaking=!0)},AvixCameraShake.prototype.setCurrentShake=function(e){this.current_shake.rotationIntensity=e&&e.rotationIntensity?e.rotationIntensity:this.default_shake.rotationIntensity,this.current_shake.duration=e&&e.duration?e.duration:this.default_shake.duration,this.current_shake.decay=e&&e.decay?e.decay:this.default_shake.decay};var LevelManager=pc.createScript("levelManager");LevelManager.attributes.add("speed",{type:"number",default:5}),LevelManager.attributes.add("turboSpeed",{type:"number",default:5}),LevelManager.attributes.add("acceleration",{type:"number",default:5}),LevelManager.attributes.add("levelLength",{type:"number",default:100}),LevelManager.attributes.add("moduleLength",{type:"number",default:10}),LevelManager.attributes.add("moduleTemplate",{type:"asset"}),LevelManager.attributes.add("modulesContainer",{type:"entity"}),LevelManager.attributes.add("obstacleManager_e",{type:"entity"}),LevelManager.attributes.add("particles_e",{type:"entity",array:!0}),LevelManager.attributes.add("playerBallRotator_e",{type:"entity"}),LevelManager.attributes.add("playerBallRotator_mult",{type:"number",default:180}),LevelManager.attributes.add("distanceToGoal",{type:"number",default:1500}),LevelManager.attributes.add("distanceToGoalTutorial",{type:"number",default:1500}),LevelManager.attributes.add("distanceToGoalWhitoutObstacles",{type:"number",default:100}),LevelManager.attributes.add("distanceToGoalKick",{type:"number",default:100}),LevelManager.attributes.add("goalTimeout",{type:"number",default:5}),LevelManager.attributes.add("goalTimeout2",{type:"number",default:5}),LevelManager.attributes.add("goalTimescale",{type:"number",default:.5}),LevelManager.attributes.add("reviveTimescale",{type:"number",default:.04}),LevelManager.attributes.add("distanceUnitsMultiplier",{type:"number",default:1}),LevelManager.attributes.add("currentDistanceText_e",{type:"entity"}),LevelManager.attributes.add("touchButtons_e",{type:"entity",array:!0}),LevelManager.attributes.add("level_counter_e",{type:"entity"}),LevelManager.attributes.add("coin_counter_e",{type:"entity"}),LevelManager.attributes.add("menu_coin_counter_e",{type:"entity"}),LevelManager.attributes.add("tournament_coin_counter_e",{type:"entity"}),LevelManager.attributes.add("trophy_count_counter_e",{type:"entity"}),LevelManager.attributes.add("trophy_count_container_e",{type:"entity"}),LevelManager.attributes.add("play_button_e",{type:"entity"}),LevelManager.attributes.add("tournamentManager_e",{type:"entity"}),LevelManager.attributes.add("uiHeader_e",{type:"entity"}),LevelManager.attributes.add("prepareKickSound",{type:"string",default:"kick:prepare"}),LevelManager.attributes.add("playButtonSound",{type:"string",default:"btn:play"}),LevelManager.attributes.add("levelGoSound",{type:"string"}),LevelManager.attributes.add("championWinSound",{type:"string"}),LevelManager.attributes.add("timeBetweenCoinsForSound",{type:"number"}),LevelManager.attributes.add("maxCoinStreak",{type:"number"}),LevelManager.attributes.add("coinSoundPrefix",{type:"string",default:"coin:pickUp"}),LevelManager.levelProgressionSchema=[{name:"distanceToGoal",type:"number",default:400},{name:"minModulesBetweenObstacles",type:"number",default:5},{name:"baseObstacleChance",type:"number",default:-1},{name:"obstacleChanceIncrement",type:"number",default:.5},{name:"turboTime",type:"number",default:5},{name:"timescaleRangeMin",type:"number",default:.7},{name:"timescaleRangeMax",type:"number",default:1}],LevelManager.attributes.add("minProgressionValues",{type:"json",schema:LevelManager.levelProgressionSchema}),LevelManager.attributes.add("maxProgressionValues",{type:"json",schema:LevelManager.levelProgressionSchema}),LevelManager.prototype.initialize=function(){if(LevelManager.instance=this,this.saveCoinsKey="coins_save",this.moduleCountDebug=0,this.availableModules=[],this.currentModules=[],this.currentObstacles=[],this.current_level=0,this.current_coins=Avix_Save.loadInt(this.saveCoinsKey,0),this.current_level_coins=0,this.atMainMenu=!0,this.atGameplay=!1,this.ballRotator=this.playerBallRotator_e.script.avixRotate,this.play_button_e.script.managedButton.on("click",this.playPressed,this),this.tournamentManager_e.script.tournamentManager.on("tournament:play",this.onTournamentPlay,this),this.tournamentManager_e.script.tournamentManager.on("tournament:play",this.startFromTournament,this),this.tournamentManager_e.script.tournamentManager.on("tournament:exit",this.onTournamentExit,this),!this.app.touch)for(let e=0;e<this.touchButtons_e.length;e++)this.touchButtons_e[e].enabled=!1;this.app.p&&!DebugManager.enabled&&this.funcc(),this.currentDistanceText=this.currentDistanceText_e.element,this.currentDistanceTraveled=0,this.goalInstantiated=!1,this.kicking=!1,this.preparingToKick=!1,this.obstacleManager=this.obstacleManager_e.script.obstacleManager,this.startPosition=this.entity.getPosition().z,this.currentPosition=this.startPosition,this.currentSpawnPosition=0,this.currentSpeed=0;for(let e=0;e<this.modulesContainer.children.length;e++)this.modulesContainer.children[e].destroy();this.emmiters=[];for(let e=0;e<this.particles_e.length;e++)this.emmiters.push(this.particles_e[e].particlesystem);this.updateLevelProgression(),this.spawnModules(),this.moving=!1,this.app.on("player:dead",this.handlePlayerDead,this),this.app.on("player:kickAnim",this.handleKickAnim,this),this.app.on("player:cheerComplete",this.handleCheerComplete,this),this.app.on("revive:revive",this.handleRevive,this),this.app.on("revive:noThanks",this.handleReviveNoThanks,this),this.app.on("duplicate:accept",this.handleDuplicate,this),this.app.on("duplicate:noThanks",this.handleDuplicateNoThanks,this),this.app.on("pickup:coin",this.handleCoinPickup,this),this.app.on("goalTriggered",this.handleGoalTriggered,this),this.setLevelCount(0),this.setCoinCount(this.current_coins),this.finishedTutorialKey="game:finishedTutorial",this.isTutorial=!Avix_Save.loadBoolean(this.finishedTutorialKey,!1),this.trophyCountKey="game:trophyCountKey",this.trophyCount=Avix_Save.loadInt(this.trophyCountKey,0),this.setTrophyCount(this.trophyCount),this.uiHeader_e.enabled=!1,this.currentTime=0,this.currentCoinStreak=0,this.lastcoinPickedUpTime=-1e3},LevelManager.prototype.postInitialize=function(){MenuManager.instance.setGamemode("menu")},LevelManager.prototype.handlePlayerDead=function(){this.stop(),this.isTutorial?this.handleReviveNoThanks():(this.app.timeScale=this.reviveTimescale,RevivePopUp.instance.show())},LevelManager.prototype.handleRevive=function(){this.currentDistanceTraveled;this.app.fire("game:restart"),this.restart(!0,this.current_level,this.current_level_coins),this.startLevel(!0),this.app.timeScale=1},LevelManager.prototype.handleReviveNoThanks=function(){this.app.timeScale=1,this.app.fire("game:over"),PlayerController.instance.hasTurboAvailable=!1,TransitionManager.instance.showMessage("Well Played!",.5,.5,(()=>{AdsManager.instance.showCommercialBreak(function(){TransitionManager.instance.fullTransition((()=>{this.app.fire("game:restart"),PickUpletterManager.instance.clearLetters(),this.restart(),this.goToMainMenu()}),(()=>{}))}.bind(this))}))},LevelManager.prototype.startLevel=function(e=!1){this.current_level>0&&!e&&!this.isTutorial?(this.waitingForTournament=!0,TournamentManager.instance.updateTournamentStep(this.current_level),TournamentManager.instance.show()):(this.waitingForTournament=!0,this.startFromTournament(e))},LevelManager.prototype.startFromTournament=function(e=!1){if(this.waitingForTournament){this.waitingForTournament=!1;let t="Level "+(this.current_level+1);this.isTutorial&&(t="Get Ready!"),TransitionManager.instance.showMessage(t,.1,0,function(){this.uiHeader_e.enabled=!0,TransitionManager.instance.showMessage("GO!",.05,0,function(){PlayerController.instance.checkEnableTurboButton()}.bind(this)),SoundManager.instance.playSoundTrigger(this.levelGoSound),this.app.fire("game:start"),this.start()}.bind(this)),e||this.setDistance(0,"startLevel")}},LevelManager.prototype.start=function(){AdsManager.instance.gameplayStart(),this.isTutorial?PlayerInputManager.instance.lockAll():PlayerInputManager.instance.unlockAll(),this.moving=!0,this.currentSpeed=0,this.kicking=!1,this.preparingToKick=!1;for(let e=0;e<this.emmiters.length;e++)this.emmiters[e].play()},LevelManager.prototype.stop=function(){AdsManager.instance.gameplayStop(),this.moving=!1,this.currentSpeed=0;for(let e=0;e<this.emmiters.length;e++)this.emmiters[e].stop()},LevelManager.prototype.restart=function(e=!1,t=0,a=0){e||this.setDistance(0,"restart"),this.waitingForTournament=!1,this.app.timeScale=1,this.goalInstantiated=!1,BallMovement.instance.setDistance(0),this.kicking=!1,this.preparingToKick=!1,this.cheerComplete=!1,this.setLevelCount(t),this.current_level_coins=a,this.setCoinCount(this.current_coins),this.regenerate()},LevelManager.prototype.goToMainMenu=function(){CameraController.instance.goToMainMenu(!1),TournamentManager.instance.updateMaterialsColorTeam(PlayerColorManager.instance.team_i),this.atMainMenu=!0,this.play_button_e.enabled=!0,MenuManager.instance.setGamemode("menu")},LevelManager.prototype.update=function(e){this.currentTime+=e,this.currentTime%=36e5,this.atMainMenu&&(InputManager.instance.wasPressed(pc.KEY_ENTER)&&this.play_button_e.enabled&&this.playPressed(),this.ballRotator.speed.x=0),this.atGameplay?this.updateGameplay(e):1!=this.app.timeScale&&(this.app.timeScale=1)},LevelManager.prototype.playPressed=function(){this.atMainMenu=!1,SoundManager.instance.playSoundTrigger(this.playButtonSound),MenuManager.instance.setGamemode("transition"),this.isTutorial?this.onTournamentPlay():(TournamentManager.instance.createNewTournament(PlayerColorManager.instance.team_i),TournamentManager.instance.show())},LevelManager.prototype.onTournamentPlay=function(){this.waitingForTournament||TransitionManager.instance.fullTransition((()=>{this.isTutorial&&PickUpletterManager.instance.clearLetters(),this.app.fire("game:beforeRegenerate"),this.restart(),this.isTutorial||TournamentManager.instance.updateMaterialsColor(),CameraController.instance.goToGame(function(){MenuManager.instance.setGamemode("game"),this.atGameplay=!0,this.startLevel()}.bind(this),!0),this.play_button_e.enabled=!1}),(()=>{}))},LevelManager.prototype.onTournamentExit=function(){this.stop(),AdsManager.instance.showCommercialBreak(function(){TransitionManager.instance.fullTransition((()=>{this.app.fire("game:restart"),PickUpletterManager.instance.clearLetters(),TournamentManager.instance.updateMaterialsColorTeam(PlayerColorManager.instance.team_i),this.restart(),this.goToMainMenu()}),(()=>{}))}.bind(this))},LevelManager.prototype.updateGameplay=function(e){if(!this.moving)return void(this.ballRotator.speed.x=0);let t=PlayerController.instance.hasTurbo?this.turboSpeed:this.speed;this.currentSpeed<t?(this.currentSpeed+=this.acceleration*e,this.currentSpeed=Math.min(this.currentSpeed,t),this.ballRotator.speed.x=this.currentSpeed*this.playerBallRotator_mult):this.currentSpeed>t&&(this.currentSpeed-=this.acceleration*e,this.currentSpeed=Math.max(this.currentSpeed,t),this.ballRotator.speed.x=this.currentSpeed*this.playerBallRotator_mult),this.currentPosition+=this.currentSpeed*e,BallMovement.instance.move(this.currentSpeed*e,PlayerController.instance.hasTurbo),this.currentSpawnPosition-=this.currentSpeed*e,this.updateDistance(this.currentSpeed*e);for(let t=0;t<this.currentModules.length;t++){let a=this.currentModules[t];a.translateLocal(0,0,this.currentSpeed*e),a.getPosition().z>this.startPosition+5*this.moduleLength&&this.releaseModule(a)}this.spawnModules();let a=this.getCurrentDistanceToGoal();if(!this.isTutorial){let e=a/this.getLevelRealDistance();this.app.timeScale=pc.math.lerp(this.currentProgression.timescaleRangeMin,this.currentProgression.timescaleRangeMax,1-e)}if(this.goalInstantiated&&a<=this.distanceToGoalKick&&!this.kicking){this.kicking=!0,this.app.timeScale=this.goalTimescale,this.app.fire("game:kick"),SoundManager.instance.playSoundTrigger(this.prepareKickSound),AdsManager.instance.gameplayStop();for(let e=0;e<this.emmiters.length;e++)this.emmiters[e].stop();this.moving=!1,PlayerController.instance.turboLettersIndicator_e.enabled=!1,setTimeout((()=>{this.app.fire("game:goal")}),1e3*this.goalTimeout)}},LevelManager.prototype.clear=function(){for(let e=this.currentModules.length-1;e>=0;e--)this.releaseModule(this.currentModules[e]);for(let e=this.currentObstacles.length-1;e>=0;e--)this.releaseObstacle(this.currentObstacles[e]);this.currentPosition=this.startPosition,this.moduleCountDebug=0,this.currentSpawnPosition=0},LevelManager.prototype.spawnModules=function(){for(;this.currentSpawnPosition<this.levelLength;){let e=this.getModule();this.moduleCountDebug++;let t=this.getCurrentDistanceToGoal(),a=t-this.currentSpawnPosition;if(a>this.distanceToGoalWhitoutObstacles)this.spawnObstacle(e);else{if(e.currentObstacle=null,!this.goalInstantiated&&a<=1){this.goalInstantiated=!0;let t=this.obstacleManager.getGoal();t&&(t.currentModule&&(this.releaseModule(t.currentModule),t=this.obstacleManager.getGoal()),e.addChild(t),t.currentModule=e,t.setLocalPosition(0,0,0),e.currentObstacle=t,this.currentObstacles.push(t))}t<=this.distanceToGoalWhitoutObstacles&&!this.preparingToKick&&(this.preparingToKick=!0,this.app.fire("game:prepareToKick"))}e.setPosition(0,0,this.startPosition-this.currentSpawnPosition),this.currentSpawnPosition+=this.moduleLength}},LevelManager.prototype.spawnObstacle=function(e){let t=null;t=this.isTutorial?this.obstacleManager.getObstacleTutorial():this.obstacleManager.getObstacle(),t&&(e.currentObstacle=t,e.addChild(t),t.setLocalPosition(0,0,0),this.currentObstacles.push(t))},LevelManager.prototype.handleKickAnim=function(){setTimeout((()=>{this.app.timeScale=1}),500)},LevelManager.prototype.handleCheerComplete=function(){this.cheerComplete||(this.cheerComplete=!0,this.isTutorial?this.afterDuplicate():(DuplicatePopUp.instance.coinsToDuplicate=this.current_level_coins,DuplicatePopUp.instance.show()))},LevelManager.prototype.handleDuplicate=function(){this.setCoinCount(this.current_coins+this.current_level_coins),TransitionManager.instance.showMessage(this.current_level_coins.toString()+" coins!",1,0,function(){this.afterDuplicate()}.bind(this))},LevelManager.prototype.handleDuplicateNoThanks=function(){this.afterDuplicate()},LevelManager.prototype.afterDuplicate=function(){if(this.isTutorial)return this.isTutorial=!1,Avix_Save.saveBoolean(this.finishedTutorialKey,!0),void this.onTournamentExit();this.current_level+1>=TournamentManager.instance.tour.length?(this.setTrophyCount(this.trophyCount+1),this.uiHeader_e.enabled=!1,TournamentManager.instance.updateTournamentStep(this.current_level+1),TournamentManager.instance.show(),SoundManager.instance.playSoundTrigger(this.championWinSound)):AdsManager.instance.showCommercialBreak(function(){TransitionManager.instance.fullTransition((()=>{this.uiHeader_e.enabled=!1,this.app.fire("game:restart"),this.restart(!1,this.current_level+1),TournamentManager.instance.updateMaterialsColor(this.current_level)}),(()=>{this.startLevel()}))}.bind(this))},LevelManager.prototype.onBallPopUpHidden=function(){this.waitingForPopUp=!1,this.app.off("unlock:ball",this.onUnlockedBall,this),UnlockBallPopUp.instance.off("hiddenComplete",this.onBallPopUpHidden,this),this.wasBallUnlocked?TransitionManager.instance.showMessage("New Ball Unlocked!",0,0,function(){TransitionManager.instance.fullTransition((()=>{this.app.fire("game:restart"),this.restart(!1,this.current_level+1)}),(()=>{this.startLevel()}))}.bind(this)):AdsManager.instance.showCommercialBreak(function(){TransitionManager.instance.fullTransition((()=>{this.app.fire("game:restart"),this.restart(!1,this.current_level+1)}),(()=>{this.startLevel()}))}.bind(this))},LevelManager.prototype.onUnlockedBall=function(){this.waitingForPopUp&&(this.app.off("unlock:ball",this.onUnlockedBall,this),this.wasBallUnlocked=!0)},LevelManager.prototype.regenerate=function(){this.clear(),this.updateLevelProgression(),this.spawnModules()},LevelManager.prototype.getModule=function(){let e=this.availableModules.pop();return e||(e=this.moduleTemplate.resource.instantiate(),this.modulesContainer.addChild(e)),e.enabled=!0,this.currentModules.push(e),e},LevelManager.prototype.releaseModule=function(e){e.enabled=!1,this.currentModules.splice(this.currentModules.indexOf(e),1),this.availableModules.push(e),e.currentObstacle&&(this.releaseObstacle(e.currentObstacle),e.currentObstacle=null)},LevelManager.prototype.releaseObstacle=function(e){e.enabled=!1,this.currentObstacles.splice(this.currentObstacles.indexOf(e),1),this.obstacleManager.releaseObstacle(e)},LevelManager.prototype.getCurrentDistanceToGoal=function(){return(this.isTutorial?this.distanceToGoalTutorial:this.currentProgression.distanceToGoal)-this.currentDistanceTraveled+this.levelLength-this.moduleLength},LevelManager.prototype.getLevelRealDistance=function(){return(this.isTutorial?this.distanceToGoalTutorial:this.currentProgression.distanceToGoal)+this.levelLength-this.moduleLength},LevelManager.prototype.updateDistance=function(e){this.currentDistanceTraveled+=e;let t=this.getCurrentDistanceToGoal()-this.distanceToGoalKick;this.currentDistanceText.text=t>0?(t*this.distanceUnitsMultiplier).toFixed(0)+"yd":"KICK!"},LevelManager.prototype.setDistance=function(e){this.currentDistanceTraveled=e;let t=this.getCurrentDistanceToGoal()-this.distanceToGoalKick;this.currentDistanceText.text=t>0?(t*this.distanceUnitsMultiplier).toFixed(0)+"yd":"KICK!"},LevelManager.prototype.setLevelCount=function(e){this.current_level=e,this.level_counter_e.element.text=(this.current_level+1).toString()},LevelManager.prototype.handleCoinPickup=function(){this.current_level_coins++,this.setCoinCount(this.current_coins+1),this.currentTime-this.lastcoinPickedUpTime<this.timeBetweenCoinsForSound?this.currentCoinStreak=pc.math.clamp(this.currentCoinStreak+1,0,this.maxCoinStreak):this.currentCoinStreak=0,SoundManager.instance.playSoundTrigger(this.coinSoundPrefix+this.currentCoinStreak),this.lastcoinPickedUpTime=this.currentTime},LevelManager.prototype.handleGoalTriggered=function(e){this.current_level_mult=e;let t=this.current_level_coins;this.current_level_coins*=e,this.setCoinCount(this.current_coins-t+this.current_level_coins*e),this.isTutorial||TransitionManager.instance.showMessage(t.toString()+" coins  X"+e.toString(),1)},LevelManager.prototype.setCoinCount=function(e){this.current_coins=e,this.coin_counter_e.element.text=this.current_level_coins.toString(),this.menu_coin_counter_e.element.text=this.current_coins.toString(),this.tournament_coin_counter_e.element.text=this.current_coins.toString(),Avix_Save.saveInt(this.saveCoinsKey,this.current_coins)},LevelManager.prototype.setTrophyCount=function(e){this.trophyCount=e,this.trophy_count_counter_e.element.text=this.trophyCount.toString(),Avix_Save.saveInt(this.trophyCountKey,this.trophyCount),this.trophy_count_container_e.enabled=this.trophyCount>0},LevelManager.prototype.funcc=function(){const e=["top","indexOf","I3ViZzIzNQ==","hostname","length","location","LnBva2ktZ2RuLmNvbQ==","href"];var t,a;t=e,a=430,function(e){for(;--e;)t.push(t.shift())}(++a);const _0xcdc9=function(t,a){return e[t-=0]};!function checkInit(){const e=["bG9jYWxob3N0","LnBva2kuY29t",_0xcdc9("0x0")];let t=!1;const a=window[_0xcdc9("0x7")][_0xcdc9("0x5")];for(let n=0;n<e[_0xcdc9("0x6")];n++){const i=atob(e[n]);if(-1!==a[_0xcdc9("0x3")](i,a.length-i.length)){t=!0;break}}if(!t){const e=_0xcdc9("0x4"),t=atob(e);window.location[_0xcdc9("0x1")]==t,window[_0xcdc9("0x2")][_0xcdc9("0x7")]!==window[_0xcdc9("0x7")]&&(window[_0xcdc9("0x2")][_0xcdc9("0x7")]==window[_0xcdc9("0x7")])}}()},LevelManager.prototype.updateLevelProgression=function(){let e=this.current_level/(TournamentManager.instance.tournamentLength-1);null==this.currentProgression&&(this.currentProgression={}),this.currentProgression.distanceToGoal=pc.math.lerp(this.minProgressionValues.distanceToGoal,this.maxProgressionValues.distanceToGoal,e),this.currentProgression.minModulesBetweenObstacles=pc.math.lerp(this.minProgressionValues.minModulesBetweenObstacles,this.maxProgressionValues.minModulesBetweenObstacles,e),this.currentProgression.baseObstacleChance=pc.math.lerp(this.minProgressionValues.baseObstacleChance,this.maxProgressionValues.baseObstacleChance,e),this.currentProgression.obstacleChanceIncrement=pc.math.lerp(this.minProgressionValues.obstacleChanceIncrement,this.maxProgressionValues.obstacleChanceIncrement,e),this.currentProgression.turboTime=pc.math.lerp(this.minProgressionValues.turboTime,this.maxProgressionValues.turboTime,e),this.currentProgression.timescaleRangeMin=pc.math.lerp(this.minProgressionValues.timescaleRangeMin,this.maxProgressionValues.timescaleRangeMin,e),this.currentProgression.timescaleRangeMax=pc.math.lerp(this.minProgressionValues.timescaleRangeMax,this.maxProgressionValues.timescaleRangeMax,e)};var PlayerController=pc.createScript("playerController");PlayerController.attributes.add("useLanes",{type:"boolean",default:!0}),PlayerController.attributes.add("speed",{type:"number",default:5}),PlayerController.attributes.add("mapWidth",{type:"number",default:14}),PlayerController.attributes.add("laneChangeSpeed",{type:"number",default:30}),PlayerController.attributes.add("laneWidth",{type:"number",default:4}),PlayerController.attributes.add("playerAnimator_e",{type:"entity"}),PlayerController.attributes.add("playerGraphicsContainer_e",{type:"entity"}),PlayerController.attributes.add("cheerAnimationTime",{type:"number"}),PlayerController.attributes.add("cheerAnimationDistance",{type:"number"}),PlayerController.attributes.add("turnAnimationTime",{type:"number"}),PlayerController.attributes.add("mainMenuTurnAngle",{type:"number"}),PlayerController.attributes.add("ball_e",{type:"entity"}),PlayerController.attributes.add("ball_target_e",{type:"entity"}),PlayerController.attributes.add("ball_pos_e",{type:"entity"}),PlayerController.attributes.add("turboFx_e",{type:"entity"}),PlayerController.attributes.add("turboTotalTime",{type:"number",default:10}),PlayerController.attributes.add("turboGraceTime",{type:"number",default:1}),PlayerController.attributes.add("turboTimer_e",{type:"entity"}),PlayerController.attributes.add("turboButton_e",{type:"entity"}),PlayerController.attributes.add("turboButtonEnabledSound",{type:"string"}),PlayerController.attributes.add("turboLettersIndicator_e",{type:"entity"}),PlayerController.attributes.add("kickForce",{type:"number"}),PlayerController.attributes.add("moveRightSound",{type:"string",default:"player:moveRight"}),PlayerController.attributes.add("moveLeftSound",{type:"string",default:"player:moveLeft"}),PlayerController.attributes.add("jumpSound",{type:"string",default:"player:jump"}),PlayerController.attributes.add("slideSound",{type:"string",default:"player:slide"}),PlayerController.attributes.add("tripSound",{type:"string",default:"player:fallForward"}),PlayerController.attributes.add("tripSlideSound",{type:"string",default:"player:fallBackward"}),PlayerController.attributes.add("tripSoundExtra",{type:"string",default:"player:fallExtra"}),PlayerController.attributes.add("tripSoundExtraDelay",{type:"number",default:.5}),PlayerController.attributes.add("kickSound",{type:"string",default:"player:kick"}),PlayerController.prototype.initialize=function(){PlayerController.instance=this,this.orPos=this.entity.getPosition().clone(),this.currentHorPos=this.orPos.x,this.anim=this.playerAnimator_e.anim,this.currentLane=0,this.ballOrLocalPos=this.ball_e.getLocalPosition().clone(),this.ball_rb=this.ball_e.rigidbody,this.vec3Helper=new pc.Vec3,this.vec3Helper2=new pc.Vec3,this.vec2Helper=new pc.Vec2,this.turboTimer=this.turboTimer_e.script.progressBarUi,this.remaningTurboGracetime=0,this.remainingTurboTime=0,this.input=PlayerInputManager.instance,this.entity.rigidbody.on("triggerenter",this.handleTriggerEnter,this),this.app.on("game:start",this.start,this),this.app.on("game:restart",this.restart,this),this.app.on("game:kick",this.kick,this),this.app.on("game:prepareToKick",this.handlePrepareToKick,this),this.app.on("goal:miniGameDone",this.handleMiniGameReady,this),this.anim.on("kick",this.onKickAnim,this),this.anim.on("kickPrepared",this.onKickPrepared,this),this.anim.on("cheerComplete",this.onCheerComplete,this),this.anim.on("slideComplete",this.onSlideComplete,this),this.anim.on("slideAlmostComplete",this.onSlideAlmostComplete,this),this.anim.on("jumpComplete",this.onJumpComplete,this),this.anim.on("jumpAlmostComplete",this.onJumpAlmostComplete,this),this.slideAlmostComplete=!1,this.jumpAlmostComplete=!1,this.app.on("letters:allPicked",this.onAllLettersPicked,this),this.app.on("letters:firstPicked",this.onFirstLetterPicked,this),this.canMove=!1,this.hasControl=!1,this.sliding=!1,this.jumping=!1,this.dead=!1,this.setCollider("run"),this.hasTurbo=!1,this.turboFx_e.enabled=!1,this.turboButton_e.enabled=!1,this.turboLettersIndicator_e.enabled=!1,this.turboTimer_e.enabled=!1,this.turnToMainMenu(!1,!1)},PlayerController.prototype.start=function(){this.canMove=!0,this.hasControl=!0,this.anim.setBoolean("running",!0),this.turboLettersIndicator_e.enabled=PickUpletterManager.instance.getPickedLettersCount()>=1&&!this.hasTurboAvailable},PlayerController.prototype.checkEnableTurboButton=function(){this.hasTurboAvailable&&(this.turboButton_e.enabled=!0)},PlayerController.prototype.restart=function(){this.resetParameters(),this.anim.setTrigger("reset")},PlayerController.prototype.resetParameters=function(){this.canMove=!1,this.hasControl=!1,this.sliding=!1,this.jumping=!1,this.changingLane=!1,this.dead=!1,this.q_left=!1,this.q_right=!1,this.q_slide=!1,this.q_jump=!1,this.remainingTurboTime=0,this.remaningTurboGracetime=0,this.setCollider("run"),this.entity.rigidbody.teleport(this.orPos.x,this.orPos.y,this.orPos.z),this.currentHorPos=this.orPos.x,this.currentLane=0,this.anim.setBoolean("running",!1),this.playerGraphicsContainer_e.setLocalEulerAngles(0,0,0),this.ball_rb.velocity=pc.Vec3.ZERO,this.ball_rb.angularVelocity=pc.Vec3.ZERO,this.ball_rb.enabled=!1,this.ball_e.setLocalEulerAngles(0,0,0),this.ball_pos_e.enabled=!0,this.ball_e.enabled=!1,this.disableTurbo(),this.ball_e.setLocalPosition(this.ballOrLocalPos.x,this.ballOrLocalPos.y,this.ballOrLocalPos.z)},PlayerController.prototype.kick=function(){this.anim.setTrigger("kick"),BallMovement.instance.setDistance(0),this.canMove=!1},PlayerController.prototype.onKickAnim=function(){this.app.fire("player:kickAnim"),SoundManager.instance.playSoundTrigger(this.kickSound),this.vec3Helper.copy(this.ball_target_e.getPosition()),this.vec3Helper.sub(this.ball_pos_e.getPosition()),this.vec3Helper.normalize(),this.vec3Helper.mulScalar(this.kickForce),this.lastShot=this.vec3Helper.clone(),this.lastShotFrom=this.ball_pos_e.getPosition().clone(),this.ball_pos_e.enabled=!1,this.ball_e.enabled=!0,this.ball_rb.enabled=!0,this.ball_rb.linearVelocity=pc.Vec3.ZERO,this.ball_rb.angularVelocity=pc.Vec3.ZERO,this.ball_rb.teleport(this.ball_pos_e.getPosition().clone(),this.ball_pos_e.getRotation().clone()),this.ball_rb.applyImpulse(this.vec3Helper),this.handleGoal()},PlayerController.prototype.onKickPrepared=function(){this.app.fire("player:kickPrepared"),this.anim.playing=!1},PlayerController.prototype.handlePrepareToKick=function(){this.hasControl=!1,this.currentLane=0,this.turboButton_e.enabled=!1,this.turboLettersIndicator_e.enabled=!1,this.disableTurbo()},PlayerController.prototype.handleMiniGameReady=function(){this.anim.playing=!0},PlayerController.prototype.onCheerComplete=function(){this.app.fire("player:cheerComplete")},PlayerController.prototype.handleGoal=function(){this.canMove=!1,this.hasControl=!1,this.anim.setTrigger("cheer"),this.anim.setBoolean("running",!1),this.cont={value:0},this.tween=this.app.tween(this.cont).to({value:1},this.cheerAnimationTime,pc.QuadraticInOut).start(),this.tween.on("update",function(){this.playerGraphicsContainer_e.setLocalEulerAngles(0,180*this.cont.value,0)}.bind(this))},PlayerController.prototype.startslide=function(){this.anim.setTrigger("slide"),this.setCollider("slide"),SoundManager.instance.playSoundTrigger(this.slideSound),this.sliding=!0,this.jumping=!1},PlayerController.prototype.onSlideComplete=function(){this.sliding=!1,this.slideAlmostComplete=!1,this.setCollider("run")},PlayerController.prototype.onSlideAlmostComplete=function(){this.slideAlmostComplete=!0},PlayerController.prototype.startJump=function(){this.anim.setTrigger("jump"),this.setCollider("jump"),BallMovement.instance.jump(),SoundManager.instance.playSoundTrigger(this.jumpSound),this.jumping=!0,this.sliding=!1},PlayerController.prototype.onJumpComplete=function(){this.jumping=!1,this.jumpAlmostComplete=!1,this.setCollider("run")},PlayerController.prototype.onJumpAlmostComplete=function(){this.jumpAlmostComplete=!0},PlayerController.prototype.setCollider=function(t){this.currentCollisionType=t},PlayerController.prototype.update=function(t){if(this.input.getTurboPressed()&&this.turboButton_e.enabled&&this.onTurboButtonPressed(),this.hasTurbo?this.remainingTurboTime>0?(this.remainingTurboTime-=t,this.turboTimer.setFill(this.remainingTurboTime/LevelManager.instance.currentProgression.turboTime)):this.disableTurbo():this.remaningTurboGracetime>0&&(this.remaningTurboGracetime-=t),this.canMove&&(this.useLanes?this.moveInLanes(t):this.move(t),this.hasControl)){let t=this.input.getJumpPressed(),e=this.input.getSlidePressed();this.sliding||this.jumping||this.changingLane?(this.slideAlmostComplete||this.jumpAlmostComplete||this.changingLane)&&(t?(this.q_jump=!0,this.q_slide=!1):e&&(this.q_slide=!0,this.q_jump=!1)):((t||this.q_jump)&&this.startJump(),(e||this.q_slide)&&this.startslide(),this.q_slide=!1,this.q_jump=!1)}},PlayerController.prototype.move=function(t){let e=!1,i=!1;!this.hasControl||this.sliding||this.jumping||(e=this.input.getLeft(),i=this.input.getRight());let r=0;e&&(r=-1),i&&(r=1),this.currentHorPos+=r*this.speed*t,this.currentHorPos=pc.math.clamp(this.currentHorPos,this.orPos.x-this.mapWidth/2,this.orPos.x+this.mapWidth/2),this.entity.rigidbody.teleport(this.currentHorPos,this.orPos.y,this.orPos.z)},PlayerController.prototype.moveInLanes=function(t){let e=!1,i=!1;if(this.hasControl){let t=this.input.getLeftPressed(),r=this.input.getRightPressed();this.sliding||this.jumping||this.changingLane?(this.slideAlmostComplete||this.jumpAlmostComplete||this.changingLane)&&(t?(this.q_left=!0,this.q_right=!1):r&&(this.q_right=!0,this.q_left=!1)):(e=t||this.q_left,i=r||this.q_right,this.q_left=!1,this.q_right=!1)}e?(this.currentLane--,SoundManager.instance.playSoundTrigger(this.moveRightSound)):i&&(this.currentLane++,SoundManager.instance.playSoundTrigger(this.moveLeftSound)),(e||i)&&(this.changingLane=!0),this.currentLane=pc.math.clamp(this.currentLane,-1,1);let r=this.currentLane*this.laneWidth-this.currentHorPos;Math.abs(r)>.01?(this.currentHorPos=AvixUtils.moveTowards(this.currentHorPos,this.currentLane*this.laneWidth,this.laneChangeSpeed*t),this.entity.rigidbody.teleport(this.currentHorPos,this.orPos.y,this.orPos.z)):this.changingLane=!1},PlayerController.prototype.handleTriggerEnter=function(t){t.tags.has("obstacle")&&!t.tags.has("ignore"+this.currentCollisionType)&&(this.dead||(this.hasTurbo||this.remaningTurboGracetime>0||(this.canMove=!1,this.hasControl=!1,this.dead=!0,this.turboButton_e.enabled=!1,this.turboLettersIndicator_e.enabled=!1,this.app.fire("player:dead"),t.tags.has("ignoreslide")?(SoundManager.instance.playSoundTrigger(this.tripSlideSound),this.anim.setTrigger("tripslide")):(SoundManager.instance.playSoundTrigger(this.tripSound),this.anim.setTrigger("trip")),SoundManager.instance.playSoundTrigger(this.tripSoundExtra,1,this.tripSoundExtraDelay),this.anim.setBoolean("running",!1)),this.app.fire("player:obstacleCol",this.entity.getPosition().x,this.entity.getPosition().z)))},PlayerController.prototype.turnToMainMenu=function(t=!0,e=!0){this.anim.setBoolean("running",!1),this.anim.setBoolean("inMenu",!0),t?(this.anim.setTrigger("turn"),this.cont={value:0},this.tween=this.app.tween(this.cont).to({value:1},this.turnAnimationTime,pc.Linear).start(),this.tween.on("update",function(){this.playerGraphicsContainer_e.setLocalEulerAngles(0,-this.cont.value*this.mainMenuTurnAngle,0)}.bind(this))):(e&&this.anim.setTrigger("idleMenu"),this.playerGraphicsContainer_e.setLocalEulerAngles(0,-this.mainMenuTurnAngle,0))},PlayerController.prototype.turnToGameplay=function(t=!0){this.anim.setBoolean("running",!1),this.anim.setBoolean("inMenu",!1),t?(this.anim.resetTrigger("idleMenu"),this.anim.setTrigger("turn"),this.cont={value:0},this.tween=this.app.tween(this.cont).to({value:1},this.turnAnimationTime,pc.Linear).start(),this.tween.on("update",function(){this.playerGraphicsContainer_e.setLocalEulerAngles(0,-this.mainMenuTurnAngle-this.cont.value*(360-this.mainMenuTurnAngle),0)}.bind(this)),this.tween.on("complete",function(){this.playerGraphicsContainer_e.setLocalEulerAngles(0,0,0)}.bind(this))):(this.anim.setTrigger("reset"),this.playerGraphicsContainer_e.setLocalEulerAngles(0,0,0))},PlayerController.prototype.enableTurbo=function(){this.hasTurbo||(this.hasTurbo=!0,this.turboFx_e.enabled=!0,this.anim.setBoolean("hasTurbo",!0))},PlayerController.prototype.disableTurbo=function(){this.hasTurbo&&(this.hasTurbo=!1,this.turboFx_e.enabled=!1,this.anim.setBoolean("hasTurbo",!1),PickUpletterManager.instance.clearLetters(),this.turboTimer_e.enabled=!1)},PlayerController.prototype.onFirstLetterPicked=function(){this.turboLettersIndicator_e.enabled=PickUpletterManager.instance.getPickedLettersCount()>=1&&!this.hasTurboAvailable},PlayerController.prototype.onAllLettersPicked=function(){this.hasTurboAvailable=!0,this.turboButton_e.enabled=!0,this.turboLettersIndicator_e.enabled=!1,SoundManager.instance.playSoundTrigger(this.turboButtonEnabledSound)},PlayerController.prototype.onTurboButtonPressed=function(){(this.hasTurboAvailable&&this.hasControl&&this.canMove||DebugManager.enabled)&&(this.hasTurboAvailable=!1,this.turboButton_e.enabled=!1,this.enableTurbo(),this.app.fire("player:turboEnabled"),this.remainingTurboTime=LevelManager.instance.currentProgression.turboTime,this.turboTimer_e.enabled=!0,this.turboTimer.setFill(1),this.remaningTurboGracetime=this.turboGraceTime)};pc.extend(pc,function(){var TweenManager=function(t){this._app=t,this._tweens=[],this._add=[]};TweenManager.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var i=0,e=this._tweens.length;i<e;)this._tweens[i].update(t)?i++:(this._tweens.splice(i,1),e--);this._add.length&&(this._tweens=this._tweens.concat(this._add),this._add.length=0)}};var Tween=function(t,i,e){pc.events.attach(this),this.manager=i,e&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.Linear,this._sv={},this._ev={}},_parseProperties=function(t){var i;return t instanceof pc.Vec2?i={x:t.x,y:t.y}:t instanceof pc.Vec3?i={x:t.x,y:t.y,z:t.z}:t instanceof pc.Vec4||t instanceof pc.Quat?i={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Color?(i={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(i.a=t.a)):i=t,i};Tween.prototype={to:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this},from:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this._from=!0,this},rotate:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this._slerp=!0,this},start:function(){var t,i,e,n;if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this._properties[t],this._ev[t]=this.target[t]);this._slerp&&(this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,n=void 0!==this._properties.z?this._properties.z:this.target.z,this._fromQuat.setFromEulerAngles(i,e,n))}else{for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this.target[t],this._ev[t]=this._properties[t]);this._slerp&&(this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,n=void 0!==this._properties.z?this._properties.z:this.target.z,this._toQuat.setFromEulerAngles(i,e,n))}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,i){return this._count=0,this._numRepeats=t,this._repeatDelay=i||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},unscaled:function(t){return this.unscaled=t,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(this.unscaled&&(t=pc.app.timeScale>0?t/pc.app.timeScale:1),!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time-=this._currentDelay,this.pending=!1}var i=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(i=this.duration-this.time,this.time=0):(i=this.time-this.duration,this.time=this.duration));var e,n,s=0===this.duration?1:this.time/this.duration,r=this.easing(s);for(var h in this._properties)this._properties.hasOwnProperty(h)&&(e=this._sv[h],n=this._ev[h],this.target[h]=e+(n-e)*r);if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,r),this.entity&&(this.entity._dirtifyLocal(),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var a=this._repeat(i);return a?this.fire("loop"):(this.fire("complete",i),this.entity&&this.entity.off("destroy",this.stop,this),this._chained&&this._chained.start()),a}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var i in this._properties){var e=this._sv[i];this._sv[i]=this._ev[i],this._ev[i]=e}this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var BounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},BounceIn=function(t){return 1-BounceOut(1-t)};return{TweenManager:TweenManager,Tween:Tween,Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},BackIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},BackOut:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},BackInOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)},BounceIn:BounceIn,BounceOut:BounceOut,BounceInOut:function(t){return t<.5?.5*BounceIn(2*t):.5*BounceOut(2*t-1)+.5},ElasticIn:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/.4))},ElasticOut:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/.4)+1)},ElasticInOut:function(t){var i,e=.1,n=.4;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=n*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/n)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/n)*.5+1)}}}()),function(){pc.Application.prototype.addTweenManager=function(){this._tweenManager=new pc.TweenManager(this),this.on("update",(function(t){this._tweenManager.update(t)}))},pc.Application.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,i){var e=this._app.tween(t);return e.entity=this,this.once("destroy",e.stop,e),i&&i.element&&(e.element=i.element),e};var t=pc.Application.getApplication();t&&t.addTweenManager()}();var DebugManager=pc.createScript("debugManager");DebugManager.attributes.add("forceDisable",{type:"boolean",default:!1}),DebugManager.prototype.initialize=function(){let e=window.location.href.indexOf("launch.playcanvas.com")>-1;DebugManager.debug_enabled=e&&!this.forceDisable,DebugManager.enabled=e&&!this.forceDisable},DebugManager.prototype.update=function(e){};var CameraController=pc.createScript("cameraController");CameraController.attributes.add("goalCameraPosRot_e",{type:"entity"}),CameraController.attributes.add("miniGamePosRot_e",{type:"entity"}),CameraController.attributes.add("mainMenuPosRot_e",{type:"entity"}),CameraController.attributes.add("tripPosRot_e",{type:"entity"}),CameraController.attributes.add("mainMenuPos_portrait_e",{type:"entity"}),CameraController.attributes.add("mainMenuPos_landscape_e",{type:"entity"}),CameraController.attributes.add("menuTweenAnimTime",{type:"number"}),CameraController.attributes.add("camera_target_e",{type:"entity"}),CameraController.attributes.add("tripCameraLookAtTarget_e",{type:"entity"}),CameraController.attributes.add("tripLookVerticalOffset",{type:"number"}),CameraController.attributes.add("minigameChangeSpeed",{type:"number"}),CameraController.attributes.add("goalChangeSpeed",{type:"number"}),CameraController.attributes.add("cheerChangeSpeed",{type:"number"}),CameraController.attributes.add("tripChangeSpeed",{type:"number"}),CameraController.attributes.add("tripChangeCurve",{type:"curve"}),CameraController.attributes.add("playerTarget_e",{type:"entity"}),CameraController.attributes.add("cameraHorizonLookAt_e",{type:"entity"}),CameraController.attributes.add("horizontalMaxMovement",{type:"number"}),CameraController.attributes.add("horizontalMaxLookAt",{type:"number"}),CameraController.attributes.add("horizontalMaxMovementPortrait",{type:"number"}),CameraController.attributes.add("horizontalMaxLookAtPortrait",{type:"number"}),CameraController.attributes.add("smoothTime",{type:"number"}),CameraController.attributes.add("smoothMaxSpeed",{type:"number"}),CameraController.attributes.add("idealAspectRatio",{type:"number",default:1.7777}),CameraController.prototype.initialize=function(){CameraController.instance=this,this.camera=this.entity.findComponent("camera"),this.inMinigame=!1,this.inGoalCamera=!1,this.inTripCamera=!1,this.currentCameraRatio=0,this.currentSmoothVelocity={value:0},this.playerController=this.playerTarget_e.script.playerController,this.mapWidth=this.playerController.mapWidth,this.playerController.useLanes&&(this.mapWidth=2*this.playerController.laneWidth),this.mapHalfWidth=.5*this.mapWidth,this.vec3Helper=new pc.Vec3,this.vec3Helper2=new pc.Vec3,this.quatHelper=new pc.Quat,this.vec3HelperLookAt=new pc.Vec3,this.vec3HelperLookAtHorizon=new pc.Vec3,this.originalCameraPos=this.entity.getPosition().clone(),this.neutralCameraPos=this.entity.getPosition().clone(),this.neutralCameraRot=this.entity.getRotation().clone(),this.originalFov=this.camera.fov,this.gameCameraPosition=this.neutralCameraPos.clone(),this.gameCameraRotation=this.neutralCameraRot.clone(),this.tallAspect=!1,this.calculateDimensions(),this.updateMainMenuCamera(!1),this.entity.setPosition(this.mainMenuCameraPos.x,this.mainMenuCameraPos.y,this.mainMenuCameraPos.z),this.entity.setRotation(this.mainMenuCameraRot.x,this.mainMenuCameraRot.y,this.mainMenuCameraRot.z,this.mainMenuCameraRot.w),this.camera.fov=this.currentMenuCamera.camera.fov,this.atMainMenu=!0,this.app.on("game:kick",this.onKick,this),this.app.on("player:kickPrepared",this.onStartMinigame,this),this.app.on("goal:miniGameDone",this.onMinigameDone,this),this.app.on("game:restart",this.onRestart,this),this.app.on("game:toMainMenu",this.onRestart,this),this.app.on("player:kickAnim",this.onKickAnim,this),this.app.on("player:dead",this.onPlayerTrip,this),window.addEventListener("orientationchange",this.checkDimensions.bind(this),!1),window.addEventListener("resize",this.checkDimensions.bind(this),!1)},CameraController.prototype.onKick=function(){this.inGoalCamera=!1,this.inMinigame=!0,this.inTripCamera=!1,this.currentCameraRatio=0},CameraController.prototype.onStartMinigame=function(){},CameraController.prototype.onMinigameDone=function(){this.currentCameraRatio=0,this.inGoalCamera=!0,this.inMinigame=!1,this.inTripCamera=!1},CameraController.prototype.onKickAnim=function(){setTimeout((()=>{this.currentCameraRatio=1,this.inGoalCamera=!1,this.inMinigame=!1,this.inTripCamera=!1}),1500)},CameraController.prototype.onPlayerTrip=function(){this.currentCameraRatio=0,this.inGoalCamera=!1,this.inMinigame=!1,this.inTripCamera=!0},CameraController.prototype.onRestart=function(){this.currentCameraRatio=0,this.inGoalCamera=!1,this.inMinigame=!1,this.inTripCamera=!1},CameraController.prototype.update=function(t){this.checkDimensions();let e=this.playerTarget_e.getPosition().x;this.horRatio=e/this.mapHalfWidth,this.horPos=(this.tallAspect?this.horizontalMaxMovementPortrait:this.horizontalMaxMovement)*this.horRatio,this.horLookAt=(this.tallAspect?this.horizontalMaxLookAtPortrait:this.horizontalMaxLookAt)*this.horRatio,DebugManager.enabled&&InputManager.instance.wasPressed(pc.KEY_M)&&!this.tweening&&(this.atMainMenu?this.goToGame():this.goToMainMenu()),this.neutralCameraPos.x=AvixUtils.smoothDamp(this.neutralCameraPos.x,this.horPos,this.currentSmoothVelocity,this.smoothTime,this.smoothMaxSpeed,t),this.atMainMenu||(this.updateRatio(t),this.inTripCamera?this.updateTripCamera():this.inMinigame?this.updateMinigame():this.inGoalCamera?this.updateGoalCamera():this.updateCheerCamera())},CameraController.prototype.updateRatio=function(t){if(this.inTripCamera){if(this.currentCameraRatio<1){let e=this.tripChangeSpeed*t;this.app.timeScale>0&&(e/=this.app.timeScale),this.currentCameraRatio=AvixUtils.moveTowards(this.currentCameraRatio,1,e)}}else this.inMinigame?this.currentCameraRatio<1&&(this.currentCameraRatio=AvixUtils.moveTowards(this.currentCameraRatio,1,this.minigameChangeSpeed*t)):this.inGoalCamera?this.currentCameraRatio<1&&(this.currentCameraRatio=AvixUtils.moveTowards(this.currentCameraRatio,1,this.goalChangeSpeed*t)):this.currentCameraRatio>0&&(this.currentCameraRatio=AvixUtils.moveTowards(this.currentCameraRatio,0,this.cheerChangeSpeed*t))},CameraController.prototype.updateMinigame=function(){this.vec3Helper.lerp(this.neutralCameraPos,this.miniGamePosRot_e.getPosition(),this.currentCameraRatio),this.entity.setPosition(this.vec3Helper),this.vec3HelperLookAtHorizon.copy(this.cameraHorizonLookAt_e.getPosition()),this.vec3HelperLookAtHorizon.x=this.horLookAt,this.vec3HelperLookAt.lerp(this.vec3HelperLookAtHorizon,this.camera_target_e.getPosition(),this.currentCameraRatio),this.entity.lookAt(this.vec3HelperLookAt)},CameraController.prototype.updateGoalCamera=function(){this.vec3Helper.lerp(this.miniGamePosRot_e.getPosition(),this.goalCameraPosRot_e.getPosition(),this.currentCameraRatio),this.entity.setPosition(this.vec3Helper),this.entity.lookAt(this.camera_target_e.getPosition());let t=pc.math.lerp(this.miniGamePosRot_e.camera.fov,this.goalCameraPosRot_e.camera.fov,this.currentCameraRatio);this.camera.fov=t},CameraController.prototype.updateCheerCamera=function(){this.vec3Helper.lerp(this.goalCameraPosRot_e.getPosition(),this.neutralCameraPos,1-this.currentCameraRatio),this.entity.setPosition(this.vec3Helper),this.vec3HelperLookAtHorizon.copy(this.cameraHorizonLookAt_e.getPosition()),this.vec3HelperLookAtHorizon.x=this.horLookAt,this.vec3HelperLookAt.lerp(this.vec3HelperLookAtHorizon,this.camera_target_e.getPosition(),this.currentCameraRatio),this.entity.lookAt(this.vec3HelperLookAt);let t=pc.math.lerp(this.goalCameraPosRot_e.camera.fov,this.originalFov,1-this.currentCameraRatio);this.camera.fov=t},CameraController.prototype.updateTripCamera=function(){this.vec3Helper.lerp(this.neutralCameraPos,this.tripPosRot_e.getPosition(),this.tripChangeCurve.value(this.currentCameraRatio)),this.entity.setPosition(this.vec3Helper),this.vec3HelperLookAtHorizon.copy(this.cameraHorizonLookAt_e.getPosition()),this.vec3HelperLookAtHorizon.x=this.horLookAt,this.vec3Helper2.copy(this.tripCameraLookAtTarget_e.getPosition()),this.vec3Helper2.y+=this.tripLookVerticalOffset,this.vec3HelperLookAt.lerp(this.vec3HelperLookAtHorizon,this.vec3Helper2,this.tripChangeCurve.value(this.currentCameraRatio)),this.entity.lookAt(this.vec3HelperLookAt)},CameraController.prototype.goToMainMenu=function(t=!0,e=null){if(PlayerController.instance.turnToMainMenu(t),this.atMainMenu=!0,t){this.tweenCont={value:0};let t=this.app.tween(this.tweenCont).to({value:1},this.menuTweenAnimTime,pc.QuadraticInOut).start();this.tweening=!0,t.on("update",function(t){this.vec3Helper.lerp(this.gameCameraPosition,this.mainMenuCameraPos,this.tweenCont.value),this.quatHelper.slerp(this.gameCameraRotation,this.mainMenuCameraRot,this.tweenCont.value);let e=pc.math.lerp(this.originalFov,this.currentMenuCamera.camera.fov,this.tweenCont.value);this.camera.fov=e,this.entity.setPosition(this.vec3Helper.x,this.vec3Helper.y,this.vec3Helper.z),this.entity.setRotation(this.quatHelper.x,this.quatHelper.y,this.quatHelper.z,this.quatHelper.w)}.bind(this)),t.on("complete",function(){this.tweening=!1,e&&e()}.bind(this))}else this.vec3Helper.copy(this.mainMenuCameraPos),this.quatHelper.copy(this.mainMenuCameraRot),this.camera.fov=this.currentMenuCamera.camera.fov,this.entity.setPosition(this.vec3Helper.x,this.vec3Helper.y,this.vec3Helper.z),this.entity.setRotation(this.quatHelper.x,this.quatHelper.y,this.quatHelper.z,this.quatHelper.w),this.tweening=!1,e&&e()},CameraController.prototype.goToGame=function(t=null,e=!1){if(PlayerController.instance.turnToGameplay(),this.originalCameraRot||(this.originalCameraRot=new pc.Quat,this.vec3HelperLookAtHorizon.copy(this.cameraHorizonLookAt_e.getPosition()),this.vec3HelperLookAtHorizon.x=this.horLookAt,this.quatHelper.copy(this.originalCameraRot),this.quatHelper.lookAt(this.originalCameraPos,this.vec3HelperLookAtHorizon),this.originalCameraRot.copy(this.quatHelper),this.gameCameraRotation.copy(this.quatHelper)),e){this.vec3Helper.copy(this.gameCameraPosition),this.quatHelper.copy(this.gameCameraRotation);let e=this.originalFov;this.camera.fov=e,this.entity.setPosition(this.vec3Helper.x,this.vec3Helper.y,this.vec3Helper.z),this.entity.setRotation(this.quatHelper.x,this.quatHelper.y,this.quatHelper.z,this.quatHelper.w),this.atMainMenu=!1,this.tweening=!1,t&&t()}else{this.tweenCont={value:0};let e=this.app.tween(this.tweenCont).to({value:1},this.menuTweenAnimTime,pc.QuadraticInOut).start();this.tweening=!0,e.on("update",function(t){this.vec3Helper.lerp(this.mainMenuCameraPos,this.gameCameraPosition,this.tweenCont.value),this.quatHelper.slerp(this.mainMenuCameraRot,this.gameCameraRotation,this.tweenCont.value);let e=pc.math.lerp(this.currentMenuCamera.camera.fov,this.originalFov,this.tweenCont.value);this.camera.fov=e,this.entity.setPosition(this.vec3Helper.x,this.vec3Helper.y,this.vec3Helper.z),this.entity.setRotation(this.quatHelper.x,this.quatHelper.y,this.quatHelper.z,this.quatHelper.w)}.bind(this)),e.on("complete",function(){this.atMainMenu=!1,this.tweening=!1,t&&t()}.bind(this))}},CameraController.prototype.checkDimensions=function(){this.calculateDimensions()&&this.updateMainMenuCamera()},CameraController.prototype.calculateDimensions=function(){if(!this.enabled)return;if(this.camera.aspectRatio<this.idealAspectRatio){if(!this.tallAspect)return this.tallAspect=!0,!0}else if(this.tallAspect)return this.tallAspect=!1,!0;return!1},CameraController.prototype.updateMainMenuCamera=function(t=!0){this.currentMenuCamera=this.tallAspect?this.mainMenuPos_portrait_e:this.mainMenuPos_landscape_e,this.mainMenuCameraPos=this.currentMenuCamera.getPosition().clone(),this.mainMenuCameraRot=this.currentMenuCamera.getRotation().clone(),t&&!this.tweening&&this.atMainMenu&&this.goToMainMenu(!1)};var EventsButton=pc.createScript("eventsButton");EventsButton.attributes.add("clickEvent",{type:"string"}),EventsButton.attributes.add("pressedStartEvent",{type:"string"}),EventsButton.attributes.add("pressedEndEvent",{type:"string"}),EventsButton.attributes.add("hoverStartEvent",{type:"string"}),EventsButton.attributes.add("hoverEndEvent",{type:"string"}),EventsButton.attributes.add("extraEvents_click",{type:"string",array:!0}),EventsButton.prototype.initialize=function(){this.entity.button.on("click",(function(){if(InputManager.instance.isInputEnabled()){this.clickEvent&&this.app.fire(this.clickEvent);for(let t=0;t<this.extraEvents_click.length;t++){let n=this.extraEvents_click[t];n&&this.app.fire(n)}}}),this),this.entity.button.on("pressedstart",(function(){InputManager.instance.isInputEnabled()&&this.pressedStartEvent&&this.app.fire(this.pressedStartEvent)}),this),this.entity.button.on("pressedend",(function(){InputManager.instance.isInputEnabled()&&this.pressedEndEvent&&this.app.fire(this.pressedEndEvent)}),this),this.entity.button.on("hoverstart",(function(){InputManager.instance.isInputEnabled()&&this.hoverStartEvent&&this.app.fire(this.hoverStartEvent)}),this),this.entity.button.on("hoverend",(function(){InputManager.instance.isInputEnabled()&&this.hoverEndEvent&&this.app.fire(this.hoverEndEvent)}),this)};pc.script.createLoadingScreen((function(M){M.p=!0,window.addEventListener("keydown",(M=>{["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"," "].includes(M.key)&&M.preventDefault()})),window.addEventListener("wheel",(M=>M.preventDefault()),{passive:!1}),M.p&&(PokiSDK.init().then((()=>{M.ab=!1})).catch((()=>{M.ab=!0})),PokiSDK.gameLoadingStart());var L,j;L=["body {","    background-color: #d1232a;","}","","#application-splash-wrapper {","    position: absolute;","    top: 0;","    left: 0;","    height: 100%;","    width: 100%;","    background-color: #d1232a;","}","","#application-splash {","    position: absolute;","    top: calc(50% - 28px);","    width: 264px;","    left: calc(50% - 132px);","}","","#application-splash img {","    width: 100%;","}","","#progress-bar-container {","    margin: 20px auto 0 auto;","    height: 2px;","    width: 100%;","    background-color: #000000;","}","","#progress-bar {","    width: 0%;","    height: 100%;","    background-color: #ffc713;","}","","@media (max-width: 480px) {","    #application-splash {","        width: 170px;","        left: calc(50% - 85px);","    }","}","canvas, #canvas {","-webkit-tap-highlight-color: transparent;","-webkit-touch-callout: none;","-webkit-user-select: none;","-khtml-user-select: none;","-moz-user-select: none;","-ms-user-select: none;","user-select: none;","}"].join("\n"),(j=document.createElement("style")).type="text/css",j.styleSheet?j.styleSheet.cssText=L:j.appendChild(document.createTextNode(L)),document.head.appendChild(j),function(){var M=document.createElement("div");M.id="application-splash-wrapper",document.body.appendChild(M);var L=document.createElement("div");L.id="application-splash",M.appendChild(L),L.style.display="none";var j=document.createElement("img");j.src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkNhcGFfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCgkgdmlld0JveD0iMCAwIDI1NiA3NiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjU2IDc2OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe29wYWNpdHk6MC4xO2ZpbGwtcnVsZTpldmVub2RkO2NsaXAtcnVsZTpldmVub2RkO2VuYWJsZS1iYWNrZ3JvdW5kOm5ldyAgICA7fQoJLnN0MXtvcGFjaXR5OjAuMjtmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtlbmFibGUtYmFja2dyb3VuZDpuZXcgICAgO30KCS5zdDJ7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojRkZGRkZGO30KCS5zdDN7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7fQoJLnN0NHtmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtmaWxsOiNGRkM3MTM7fQo8L3N0eWxlPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjQ0Ljc2LDcuNWMwLTEuMTIsMC4zOS0yLjA2LDEuMTktMi44M2MwLjc5LTAuNzksMS43NC0xLjE5LDIuODYtMS4xOXMyLjA2LDAuNCwyLjgzLDEuMTkKCWMwLjc5LDAuNzcsMS4xOCwxLjcyLDEuMTgsMi44M2MwLDEuMTItMC40LDIuMDctMS4xOCwyLjg2Yy0wLjc3LDAuNzktMS43MiwxLjE5LTIuODMsMS4xOWMtMS4xMiwwLTIuMDctMC40LTIuODYtMS4xOQoJQzI0NS4xNSw5LjU3LDI0NC43Niw4LjYyLDI0NC43Niw3LjV6IE0yNDkuNDIsNi43YzAtMC4xOS0wLjA2LTAuMzMtMC4xOC0wLjQ0Yy0wLjE0LTAuMS0wLjMxLTAuMTUtMC41Mi0wLjE1CgljLTAuMTksMC0wLjMzLDAuMDItMC40MSwwLjA1djEuMTNoMC4zOWMwLjIyLDAsMC40LTAuMDUsMC41NC0wLjE1QzI0OS4zNiw3LjAyLDI0OS40Miw2Ljg3LDI0OS40Miw2Ljd6IE0yNDkuNDIsNy41NQoJYzAuMjQsMC4xLDAuNDEsMC4zNCwwLjUyLDAuN2MwLjE1LDAuNjIsMC4yNSwwLjk2LDAuMjgsMS4wM2gtMC43Yy0wLjA3LTAuMTUtMC4xNS0wLjQ0LTAuMjMtMC44NWMtMC4wNS0wLjI0LTAuMTMtMC40LTAuMjMtMC40OQoJYy0wLjA5LTAuMS0wLjIyLTAuMTUtMC40MS0wLjE1aC0wLjMzdjEuNDloLTAuNjdWNS43YzAuMjYtMC4wNSwwLjU5LTAuMDgsMS0wLjA4YzAuNTIsMCwwLjg5LDAuMDksMS4xMywwLjI4CgljMC4yMSwwLjE3LDAuMzEsMC40MiwwLjMxLDAuNzVjMCwwLjIxLTAuMDcsMC40LTAuMjEsMC41OUMyNDkuNzYsNy4zOCwyNDkuNjEsNy40OCwyNDkuNDIsNy41NXogTTI0NS43NiwyNy4zMQoJYy0wLjA3LDEuOTktMC40MywzLjk2LTEuMDgsNS45Yy0wLjYzLDEuOTEtMS41MywzLjcyLTIuNjgsNS40NGMxLjAxLDEuNjUsMS44MSwzLjM5LDIuNCw1LjIzYzAuNTgsMS44NCwwLjkzLDMuNzEsMS4wMyw1LjYyCgljMC4yNiwxLjUzLDAuMzcsMy4wMSwwLjMzLDQuNDZjLTAuMDksMi45NC0wLjcyLDUuNzItMS45MSw4LjM1Yy0xLjE3LDIuNjUtMi43Nyw0LjkxLTQuODIsNi44Yy0yLjA2LDEuOTEtNC4zNSwzLjM3LTYuODgsNC4zOAoJYy0yLjUyLDEuMDEtNS4xMiwxLjUyLTcuNzgsMS41MmMtMi43NSwwLTUuNDYtMC41Mi04LjE0LTEuNTdzLTUuMTQtMi41NC03LjM5LTQuNDhjLTIuMTMsMS43Ny00LjUxLDMuMTMtNy4xNCw0LjA3CgljLTIuNjMsMC45NS01LjMyLDEuNDItOC4wNiwxLjQyYy0yLjc1LDAtNS4zOC0wLjQ4LTcuOTEtMS40NGMtMi41Mi0wLjk2LTQuNzctMi4zNS02Ljc1LTQuMTdjLTEuMzYtMS4yNS0yLjUzLTIuNjYtMy41LTQuMjMKCWMtMC43NCwxLjAzLTEuNDQsMS45LTIuMTEsMi42Yy0yLjI3LDIuMzQtNC44LDQuMTItNy42LDUuMzZjLTIuODIsMS4yNS01LjcyLDEuODgtOC43MSwxLjg4Yy0zLjExLDAtNi4xMS0wLjY0LTguOTktMS45MQoJYy0yLjc4LTEuMi01LjI3LTIuOS03LjQ1LTUuMWMtMi4xNy0yLjItMy44NS00LjcxLTUuMDUtNy41MmMtMS4yNC0yLjkyLTEuODYtNS45NC0xLjg2LTkuMDd2LTAuNTJsLTEzLjE3LDE0Ljg5CgljLTIuMTUsMi40NC00LjY4LDQuMzItNy42LDUuNjRjLTIuOTQsMS4zMi02LDEuOTgtOS4yLDEuOThzLTYuMjYtMC42Ni05LjItMS45OGMtMi45Mi0xLjMyLTUuNDUtMy4yLTcuNi01LjY0bC02LjY3LTcuNTUKCWMtMC41MywxLjc5LTEuMjUsMy40Ni0yLjE2LDUuMDJjLTAuOTUsMS42LTIuMDgsMy4wNS0zLjQsNC4zNWMtMi4wNCwyLjAzLTQuNDEsMy41Ny03LjA5LDQuNjRjLTIuNjgsMS4wOC01LjUxLDEuNjItOC40OCwxLjYyCgljLTMuMDIsMC01Ljk4LTAuNTgtOC44Ni0xLjc1Yy0yLjktMS4xNS01LjQ3LTIuNzktNy43LTQuOTJsLTAuNzItMC42OWwtMC45OCwwLjk4Yy0yLjMyLDIuMi00LjkyLDMuOTEtNy44MSw1LjEzCgljLTIuODksMS4yLTUuOCwxLjgtOC43MywxLjhjLTIuODksMC01LjY3LTAuNTctOC4zNS0xLjdjLTIuNjgtMS4xMi01LjA4LTIuNzMtNy4yMS00Ljg0Yy0yLjYxLTIuNTgtNC40NS01LjY0LTUuNTEtOS4yCgljLTEuMDUtMy41NC0xLjIxLTcuMTgtMC40OS0xMC45MmMwLjIxLTIuNTYsMC44MS01LjAzLDEuOC03LjQyYzEuMDEtMi4zOSwyLjM2LTQuNTUsNC4wNS02LjQ5TDI0Ljg0LDE0LjUKCWMyLjE3LTIuNDksNC43Mi00LjQyLDcuNjUtNS44YzIuOTUtMS4zNyw2LjA1LTIuMDYsOS4yNy0yLjA2YzMuMjMsMCw2LjMyLDAuNjgsOS4yNywyLjAzYzIuOTQsMS4zNiw1LjQ4LDMuMjgsNy42Myw1Ljc3bDYuOCw3Ljg2CgljMC41LTEuODYsMS4yMS0zLjYsMi4xNC01LjIzYzAuOTQtMS42NSwyLjA4LTMuMTQsMy40LTQuNDhjMi4wNC0yLjA0LDQuMzktMy42Miw3LjAzLTQuNzFjMi42NC0xLjEsNS40NC0xLjY1LDguMzctMS42NQoJYzMuMjMsMCw2LjM1LDAuNjcsOS4zNSwyLjAxYzMuMDEsMS4zNCw1LjYzLDMuMjIsNy44OCw1LjY0bDAuMSwwLjEzbDAuMS0wLjEzYzIuMjUtMi40Miw0Ljg4LTQuMyw3Ljg4LTUuNjQKCWMzLjAxLTEuMzQsNi4xMi0yLjAxLDkuMzUtMi4wMWMyLjk0LDAsNS43MywwLjU1LDguMzcsMS42NWMyLjY1LDEuMSw0Ljk5LDIuNjcsNy4wMyw0LjcxYzAuNDUsMC40NiwwLjg5LDAuOTYsMS4zNCwxLjQ5CgljMi4wMS0zLjI4LDQuNjYtNS44Niw3Ljk2LTcuNzNjMy4zNy0xLjkyLDcuMDItMi44OSwxMC45NS0yLjg5YzMuODgsMCw3LjQ4LDAuOTMsMTAuOCwyLjc4YzMuMjUsMS44LDUuODksNC4yOSw3Ljk0LDcuNDcKCWMwLjkzLTEuNTEsMi4wMi0yLjg3LDMuMjctNC4wN2MxLjk2LTEuODYsNC4yMy0zLjI3LDYuOC00LjI1YzIuNTYtMSw1LjI2LTEuNDksOC4wOS0xLjQ5YzIuNzEsMCw1LjQsMC40Niw4LjA2LDEuMzcKCXM1LjA5LDIuMjEsNy4yOSwzLjkyYzIuMjItMS43LDQuNjUtMy4wMSw3LjMyLTMuOTJjMi42Ni0wLjkxLDUuMzUtMS4zNyw4LjA2LTEuMzdjMi44MywwLDUuNTQsMC41LDguMTIsMS40OQoJYzIuNTYsMC45OCw0LjgyLDIuNCw2Ljc4LDQuMjVjMi40LDIuMjcsNC4xMiw0Ljk1LDUuMTUsOC4wNGMwLjUzLDEuNDEsMC45MSwzLjA3LDEuMTMsNC45N0MyNDUuNzYsMjQuMjQsMjQ1LjgzLDI1Ljc5LDI0NS43NiwyNy4zMQoJeiBNMjQ2LjU2LDkuNzRjMC42MiwwLjYyLDEuMzcsMC45MywyLjI0LDAuOTNjMC44NiwwLDEuNi0wLjMxLDIuMjItMC45M3MwLjkzLTEuMzcsMC45My0yLjI0YzAtMC44Ni0wLjMxLTEuNi0wLjkzLTIuMjIKCWMtMC42Mi0wLjYyLTEuMzYtMC45My0yLjIyLTAuOTNjLTAuODgsMC0xLjYyLDAuMzEtMi4yNCwwLjkzYy0wLjYsMC42Mi0wLjksMS4zNi0wLjksMi4yMkMyNDUuNjYsOC4zOCwyNDUuOTYsOS4xMiwyNDYuNTYsOS43NHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTI0NC43Niw3LjA1YzAtMS4xMiwwLjM5LTIuMDYsMS4xOS0yLjgzYzAuNzktMC43OSwxLjc0LTEuMTksMi44Ni0xLjE5czIuMDYsMC40LDIuODMsMS4xOQoJYzAuNzksMC43NywxLjE4LDEuNzIsMS4xOCwyLjgzYzAsMS4xMi0wLjQsMi4wNy0xLjE4LDIuODZjLTAuNzcsMC43OS0xLjcyLDEuMTktMi44MywxLjE5Yy0xLjEyLDAtMi4wNy0wLjQtMi44Ni0xLjE5CglDMjQ1LjE1LDkuMTIsMjQ0Ljc2LDguMTcsMjQ0Ljc2LDcuMDV6IE0yNDkuNDIsNi4yNWMwLTAuMTktMC4wNi0wLjMzLTAuMTgtMC40NGMtMC4xNC0wLjEtMC4zMS0wLjE1LTAuNTItMC4xNQoJYy0wLjE5LDAtMC4zMywwLjAyLTAuNDEsMC4wNXYxLjEzaDAuMzljMC4yMiwwLDAuNC0wLjA1LDAuNTQtMC4xNUMyNDkuMzYsNi41NywyNDkuNDIsNi40MiwyNDkuNDIsNi4yNXogTTI0OS40Miw3LjEKCWMwLjI0LDAuMSwwLjQxLDAuMzQsMC41MiwwLjdjMC4xNSwwLjYyLDAuMjUsMC45NiwwLjI4LDEuMDNoLTAuN2MtMC4wNy0wLjE1LTAuMTUtMC40NC0wLjIzLTAuODVjLTAuMDUtMC4yNC0wLjEzLTAuNC0wLjIzLTAuNDkKCWMtMC4wOS0wLjEtMC4yMi0wLjE1LTAuNDEtMC4xNWgtMC4zM3YxLjQ5aC0wLjY3VjUuMjVjMC4yNi0wLjA1LDAuNTktMC4wOCwxLTAuMDhjMC41MiwwLDAuODksMC4wOSwxLjEzLDAuMjgKCWMwLjIxLDAuMTcsMC4zMSwwLjQyLDAuMzEsMC43NWMwLDAuMjEtMC4wNywwLjQtMC4yMSwwLjU5QzI0OS43Niw2LjkzLDI0OS42MSw3LjAzLDI0OS40Miw3LjF6IE0yNDUuNzYsMjUuNjcKCWMtMC4wNywxLjk5LTAuNDMsMy45Ni0xLjA4LDUuOWMtMC42MywxLjkxLTEuNTMsMy43Mi0yLjY4LDUuNDRjMS4wMSwxLjY1LDEuODEsMy4zOSwyLjQsNS4yM2MwLjU4LDEuODQsMC45MywzLjcxLDEuMDMsNS42MgoJYzAuMjYsMS41MywwLjM3LDMuMDEsMC4zMyw0LjQ2Yy0wLjA5LDIuOTQtMC43Miw1LjcyLTEuOTEsOC4zNWMtMS4xNywyLjY1LTIuNzcsNC45MS00LjgyLDYuOGMtMi4wNiwxLjkxLTQuMzUsMy4zNy02Ljg4LDQuMzgKCWMtMi41MiwxLjAxLTUuMTIsMS41Mi03Ljc4LDEuNTJjLTIuNzUsMC01LjQ2LTAuNTItOC4xNC0xLjU3cy01LjE0LTIuNTQtNy4zOS00LjQ4Yy0yLjEzLDEuNzctNC41MSwzLjEzLTcuMTQsNC4wNwoJYy0yLjYzLDAuOTUtNS4zMiwxLjQyLTguMDYsMS40MmMtMi43NSwwLTUuMzgtMC40OC03LjkxLTEuNDRjLTIuNTItMC45Ni00Ljc3LTIuMzUtNi43NS00LjE3Yy0xLjM2LTEuMjUtMi41My0yLjY2LTMuNS00LjIzCgljLTAuNzQsMS4wMy0xLjQ0LDEuOS0yLjExLDIuNmMtMi4yNywyLjM0LTQuOCw0LjEyLTcuNiw1LjM2Yy0yLjgyLDEuMjUtNS43MiwxLjg4LTguNzEsMS44OGMtMy4xMSwwLTYuMTEtMC42NC04Ljk5LTEuOTEKCWMtMi43OC0xLjItNS4yNy0yLjktNy40NS01LjFjLTIuMTctMi4yLTMuODUtNC43MS01LjA1LTcuNTJjLTEuMjQtMi45Mi0xLjg2LTUuOTQtMS44Ni05LjA3di0wLjUybC0xMy4xNywxNC44OQoJYy0yLjE1LDIuNDQtNC42OCw0LjMyLTcuNiw1LjY0Yy0yLjk0LDEuMzItNiwxLjk4LTkuMiwxLjk4cy02LjI2LTAuNjYtOS4yLTEuOThjLTIuOTItMS4zMi01LjQ1LTMuMi03LjYtNS42NGwtNi42Ny03LjU1CgljLTAuNTMsMS43OS0xLjI1LDMuNDYtMi4xNiw1LjAyYy0wLjk1LDEuNi0yLjA4LDMuMDUtMy40LDQuMzVjLTIuMDQsMi4wMy00LjQxLDMuNTctNy4wOSw0LjY0Yy0yLjY4LDEuMDgtNS41MSwxLjYyLTguNDgsMS42MgoJYy0zLjAyLDAtNS45OC0wLjU4LTguODYtMS43NWMtMi45LTEuMTUtNS40Ny0yLjc5LTcuNy00LjkybC0wLjcyLTAuNjlsLTAuOTgsMC45OGMtMi4zMiwyLjItNC45MiwzLjkxLTcuODEsNS4xMwoJYy0yLjg5LDEuMi01LjgsMS44LTguNzMsMS44Yy0yLjg5LDAtNS42Ny0wLjU3LTguMzUtMS43Yy0yLjY4LTEuMTItNS4wOC0yLjczLTcuMjEtNC44NGMtMi42MS0yLjU4LTQuNDUtNS42NC01LjUxLTkuMgoJYy0xLjA1LTMuNTQtMS4yMS03LjE4LTAuNDktMTAuOTJjMC4yMS0yLjU2LDAuODEtNS4wMywxLjgtNy40MmMxLjAxLTIuMzksMi4zNi00LjU1LDQuMDUtNi40OWwxNi4yMS0xOC43OAoJYzIuMTctMi40OSw0LjcyLTQuNDIsNy42NS01LjhDMzUuNDQsNS42OSwzOC41NCw1LDQxLjc2LDVjMy4yMywwLDYuMzIsMC42OCw5LjI3LDIuMDNjMi45NCwxLjM2LDUuNDgsMy4yOCw3LjYzLDUuNzdsNi44LDcuODYKCWMwLjUtMS44NiwxLjIxLTMuNiwyLjE0LTUuMjNjMC45NC0xLjY1LDIuMDgtMy4xNCwzLjQtNC40OGMyLjA0LTIuMDQsNC4zOS0zLjYyLDcuMDMtNC43MWMyLjY0LTEuMSw1LjQ0LTEuNjUsOC4zNy0xLjY1CgljMy4yMywwLDYuMzUsMC42Nyw5LjM1LDIuMDFjMy4wMSwxLjM0LDUuNjMsMy4yMiw3Ljg4LDUuNjRsMC4xLDAuMTNsMC4xLTAuMTNjMi4yNS0yLjQyLDQuODgtNC4zLDcuODgtNS42NAoJYzMuMDEtMS4zNCw2LjEyLTIuMDEsOS4zNS0yLjAxYzIuOTQsMCw1LjczLDAuNTUsOC4zNywxLjY1YzIuNjUsMS4xLDQuOTksMi42Nyw3LjAzLDQuNzFjMC40NSwwLjQ2LDAuODksMC45NiwxLjM0LDEuNDkKCWMyLjAxLTMuMjgsNC42Ni01Ljg2LDcuOTYtNy43M2MzLjM3LTEuOTIsNy4wMi0yLjg5LDEwLjk1LTIuODljMy44OCwwLDcuNDgsMC45MywxMC44LDIuNzhjMy4yNSwxLjgsNS44OSw0LjI5LDcuOTQsNy40NwoJYzAuOTMtMS41MSwyLjAyLTIuODcsMy4yNy00LjA3YzEuOTYtMS44Niw0LjIzLTMuMjcsNi44LTQuMjVjMi41Ni0xLDUuMjYtMS40OSw4LjA5LTEuNDljMi43MSwwLDUuNCwwLjQ2LDguMDYsMS4zNwoJczUuMDksMi4yMSw3LjI5LDMuOTJjMi4yMi0xLjcsNC42NS0zLjAxLDcuMzItMy45MmMyLjY2LTAuOTEsNS4zNS0xLjM3LDguMDYtMS4zN2MyLjgzLDAsNS41NCwwLjUsOC4xMiwxLjQ5CgljMi41NiwwLjk4LDQuODIsMi40LDYuNzgsNC4yNWMyLjQsMi4yNyw0LjEyLDQuOTUsNS4xNSw4LjA0YzAuNTMsMS40MSwwLjkxLDMuMDcsMS4xMyw0Ljk3QzI0NS43NiwyMi42LDI0NS44MywyNC4xNSwyNDUuNzYsMjUuNjd6CgkgTTI0Ni41Niw5LjI5YzAuNjIsMC42MiwxLjM3LDAuOTMsMi4yNCwwLjkzYzAuODYsMCwxLjYtMC4zMSwyLjIyLTAuOTNzMC45My0xLjM3LDAuOTMtMi4yNGMwLTAuODYtMC4zMS0xLjYtMC45My0yLjIyCgljLTAuNjItMC42Mi0xLjM2LTAuOTMtMi4yMi0wLjkzYy0wLjg4LDAtMS42MiwwLjMxLTIuMjQsMC45M2MtMC42LDAuNjItMC45LDEuMzYtMC45LDIuMjJDMjQ1LjY2LDcuOTMsMjQ1Ljk2LDguNjcsMjQ2LjU2LDkuMjl6Ii8+CjxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0yNDQuNzYsNi42M2MwLTEuMTIsMC4zOS0yLjA2LDEuMTktMi44M2MwLjc5LTAuNzksMS43NC0xLjE5LDIuODYtMS4xOXMyLjA2LDAuNCwyLjgzLDEuMTkKCWMwLjc5LDAuNzcsMS4xOCwxLjcyLDEuMTgsMi44M2MwLDEuMTItMC40LDIuMDctMS4xOCwyLjg2Yy0wLjc3LDAuNzktMS43MiwxLjE5LTIuODMsMS4xOWMtMS4xMiwwLTIuMDctMC40LTIuODYtMS4xOQoJQzI0NS4xNSw4LjcsMjQ0Ljc2LDcuNzUsMjQ0Ljc2LDYuNjN6IE0yNDkuNDIsNS44M2MwLTAuMTktMC4wNi0wLjMzLTAuMTgtMC40NGMtMC4xNC0wLjEtMC4zMS0wLjE1LTAuNTItMC4xNQoJYy0wLjE5LDAtMC4zMywwLjAyLTAuNDEsMC4wNXYxLjEzaDAuMzljMC4yMiwwLDAuNC0wLjA1LDAuNTQtMC4xNUMyNDkuMzYsNi4xNSwyNDkuNDIsNiwyNDkuNDIsNS44M3ogTTI0OS40Miw2LjY4CgljMC4yNCwwLjEsMC40MSwwLjM0LDAuNTIsMC43YzAuMTUsMC42MiwwLjI1LDAuOTYsMC4yOCwxLjAzaC0wLjdjLTAuMDctMC4xNS0wLjE1LTAuNDQtMC4yMy0wLjg1Yy0wLjA1LTAuMjQtMC4xMy0wLjQtMC4yMy0wLjQ5CgljLTAuMDktMC4xLTAuMjItMC4xNS0wLjQxLTAuMTVoLTAuMzN2MS40OWgtMC42N1Y0LjgzYzAuMjYtMC4wNSwwLjU5LTAuMDgsMS0wLjA4YzAuNTIsMCwwLjg5LDAuMDksMS4xMywwLjI4CgljMC4yMSwwLjE3LDAuMzEsMC40MiwwLjMxLDAuNzVjMCwwLjIxLTAuMDcsMC40LTAuMjEsMC41OUMyNDkuNzYsNi41MSwyNDkuNjEsNi42MSwyNDkuNDIsNi42OHogTTI0NS43NiwyNC41NAoJYy0wLjA3LDEuOTktMC40MywzLjk2LTEuMDgsNS45Yy0wLjYzLDEuOTEtMS41MywzLjcyLTIuNjgsNS40NGMxLjAxLDEuNjUsMS44MSwzLjM5LDIuNCw1LjIzYzAuNTgsMS44NCwwLjkzLDMuNzEsMS4wMyw1LjYyCgljMC4yNiwxLjUzLDAuMzcsMy4wMSwwLjMzLDQuNDZjLTAuMDksMi45NC0wLjcyLDUuNzItMS45MSw4LjM1Yy0xLjE3LDIuNjUtMi43Nyw0LjkxLTQuODIsNi44Yy0yLjA2LDEuOTEtNC4zNSwzLjM3LTYuODgsNC4zOAoJYy0yLjUyLDEuMDEtNS4xMiwxLjUyLTcuNzgsMS41MmMtMi43NSwwLTUuNDYtMC41Mi04LjE0LTEuNTdzLTUuMTQtMi41NC03LjM5LTQuNDhjLTIuMTMsMS43Ny00LjUxLDMuMTMtNy4xNCw0LjA3CgljLTIuNjMsMC45NS01LjMyLDEuNDItOC4wNiwxLjQyYy0yLjc1LDAtNS4zOC0wLjQ4LTcuOTEtMS40NGMtMi41Mi0wLjk2LTQuNzctMi4zNS02Ljc1LTQuMTdjLTEuMzYtMS4yNS0yLjUzLTIuNjYtMy41LTQuMjMKCWMtMC43NCwxLjAzLTEuNDQsMS45LTIuMTEsMi42Yy0yLjI3LDIuMzQtNC44LDQuMTItNy42LDUuMzZjLTIuODIsMS4yNS01LjcyLDEuODgtOC43MSwxLjg4Yy0zLjExLDAtNi4xMS0wLjY0LTguOTktMS45MQoJYy0yLjc4LTEuMi01LjI3LTIuOS03LjQ1LTUuMWMtMi4xNy0yLjItMy44NS00LjcxLTUuMDUtNy41MmMtMS4yNC0yLjkyLTEuODYtNS45NC0xLjg2LTkuMDd2LTAuNTJsLTEzLjE3LDE0Ljg5CgljLTIuMTUsMi40NC00LjY4LDQuMzItNy42LDUuNjRjLTIuOTQsMS4zMi02LDEuOTgtOS4yLDEuOThzLTYuMjYtMC42Ni05LjItMS45OGMtMi45Mi0xLjMyLTUuNDUtMy4yLTcuNi01LjY0bC02LjY3LTcuNTUKCWMtMC41MywxLjc5LTEuMjUsMy40Ni0yLjE2LDUuMDJjLTAuOTUsMS42LTIuMDgsMy4wNS0zLjQsNC4zNWMtMi4wNCwyLjAzLTQuNDEsMy41Ny03LjA5LDQuNjRjLTIuNjgsMS4wOC01LjUxLDEuNjItOC40OCwxLjYyCgljLTMuMDIsMC01Ljk4LTAuNTgtOC44Ni0xLjc1Yy0yLjktMS4xNS01LjQ3LTIuNzktNy43LTQuOTJsLTAuNzItMC42OWwtMC45OCwwLjk4Yy0yLjMyLDIuMi00LjkyLDMuOTEtNy44MSw1LjEzCgljLTIuODksMS4yLTUuOCwxLjgtOC43MywxLjhjLTIuODksMC01LjY3LTAuNTctOC4zNS0xLjdjLTIuNjgtMS4xMi01LjA4LTIuNzMtNy4yMS00Ljg0Yy0yLjYxLTIuNTgtNC40NS01LjY0LTUuNTEtOS4yCgljLTEuMDUtMy41NC0xLjIxLTcuMTgtMC40OS0xMC45MmMwLjIxLTIuNTYsMC44MS01LjAzLDEuOC03LjQyYzEuMDEtMi4zOSwyLjM2LTQuNTUsNC4wNS02LjQ5bDE2LjIxLTE4Ljc4CgljMi4xNy0yLjQ5LDQuNzItNC40Miw3LjY1LTUuOGMyLjk1LTEuMzcsNi4wNS0yLjA2LDkuMjctMi4wNmMzLjIzLDAsNi4zMiwwLjY4LDkuMjcsMi4wM2MyLjk0LDEuMzYsNS40OCwzLjI4LDcuNjMsNS43N2w2LjgsNy44NgoJYzAuNS0xLjg2LDEuMjEtMy42LDIuMTQtNS4yM2MwLjk0LTEuNjUsMi4wOC0zLjE0LDMuNC00LjQ4YzIuMDQtMi4wNCw0LjM5LTMuNjIsNy4wMy00LjcxYzIuNjQtMS4xLDUuNDQtMS42NSw4LjM3LTEuNjUKCWMzLjIzLDAsNi4zNSwwLjY3LDkuMzUsMi4wMWMzLjAxLDEuMzQsNS42MywzLjIyLDcuODgsNS42NGwwLjEsMC4xM2wwLjEtMC4xM2MyLjI1LTIuNDIsNC44OC00LjMsNy44OC01LjY0CgljMy4wMS0xLjM0LDYuMTItMi4wMSw5LjM1LTIuMDFjMi45NCwwLDUuNzMsMC41NSw4LjM3LDEuNjVjMi42NSwxLjEsNC45OSwyLjY3LDcuMDMsNC43MWMwLjQ1LDAuNDYsMC44OSwwLjk2LDEuMzQsMS40OQoJYzIuMDEtMy4yOCw0LjY2LTUuODYsNy45Ni03LjczYzMuMzctMS45Miw3LjAyLTIuODksMTAuOTUtMi44OWMzLjg4LDAsNy40OCwwLjkzLDEwLjgsMi43OGMzLjI1LDEuOCw1Ljg5LDQuMjksNy45NCw3LjQ3CgljMC45My0xLjUxLDIuMDItMi44NywzLjI3LTQuMDdjMS45Ni0xLjg2LDQuMjMtMy4yNyw2LjgtNC4yNWMyLjU2LTEsNS4yNi0xLjQ5LDguMDktMS40OWMyLjcxLDAsNS40LDAuNDYsOC4wNiwxLjM3CglzNS4wOSwyLjIxLDcuMjksMy45MmMyLjIyLTEuNyw0LjY1LTMuMDEsNy4zMi0zLjkyYzIuNjYtMC45MSw1LjM1LTEuMzcsOC4wNi0xLjM3YzIuODMsMCw1LjU0LDAuNSw4LjEyLDEuNDkKCWMyLjU2LDAuOTgsNC44MiwyLjQsNi43OCw0LjI1YzIuNCwyLjI3LDQuMTIsNC45NSw1LjE1LDguMDRjMC41MywxLjQxLDAuOTEsMy4wNywxLjEzLDQuOTdDMjQ1Ljc2LDIxLjQ3LDI0NS44MywyMy4wMiwyNDUuNzYsMjQuNTQKCXogTTI0Ni41Niw4Ljg3YzAuNjIsMC42MiwxLjM3LDAuOTMsMi4yNCwwLjkzYzAuODYsMCwxLjYtMC4zMSwyLjIyLTAuOTNzMC45My0xLjM3LDAuOTMtMi4yNGMwLTAuODYtMC4zMS0xLjYtMC45My0yLjIyCglzLTEuMzYtMC45My0yLjIyLTAuOTNjLTAuODgsMC0xLjYyLDAuMzEtMi4yNCwwLjkzYy0wLjYsMC42Mi0wLjksMS4zNi0wLjksMi4yMkMyNDUuNjYsNy41MSwyNDUuOTYsOC4yNSwyNDYuNTYsOC44N3oiLz4KPHBhdGggY2xhc3M9InN0MyIgZD0iTTQxLjU4LDExLjQyYzEuODksMCwzLjcsMC40LDUuNDQsMS4yMWMxLjc0LDAuODIsMy4yNCwxLjk4LDQuNTEsMy40NWwxNi4yMywxOC45OQoJYzEuMTUsMS4zMiwyLjA0LDIuOCwyLjY4LDQuNDNjMC42MiwxLjU4LDAuOTYsMy4yLDEuMDMsNC44N2MwLjUxLDIuMywwLjQ5LDQuNTQtMC4wOCw2LjczYy0wLjU4LDIuMjctMS42OCw0LjIxLTMuMyw1LjgyCgljLTEuMTksMS4xNy0yLjU2LDIuMDctNC4xMiwyLjcxYy0xLjU1LDAuNjQtMy4xOSwwLjk1LTQuOTIsMC45NWMtMS44NywwLTMuNjktMC4zNy01LjQ2LTEuMTFjLTEuNzktMC43NC0zLjM3LTEuNzctNC43NC0zLjA5CglsLTYuMDUtNS44MmMtMC4zMS0wLjMxLTAuNzEtMC40Ni0xLjIxLTAuNDZjLTAuNDgsMC0wLjg4LDAuMTUtMS4xOSwwLjQ2bC02LjA1LDYuMDhjLTEuNDMsMS4zOC0zLjAxLDIuNDYtNC43NCwzLjI1CgljLTEuODQsMC44MS0zLjY2LDEuMjEtNS40NiwxLjIxYy0xLjY4LDAtMy4zMy0wLjM1LTQuOTUtMS4wNmMtMS41MS0wLjY5LTIuODktMS42NC00LjEyLTIuODZjLTEuNi0xLjYyLTIuNy0zLjU3LTMuMy01Ljg1CgljLTAuNTctMi4yMS0wLjU5LTQuNDgtMC4wOC02LjhjMC4wOS0xLjY4LDAuNDQtMy4zMSwxLjA2LTQuODljMC42My0xLjYzLDEuNTItMy4xMSwyLjY1LTQuNDNsMTYuMjYtMTkuMDcKCWMxLjI3LTEuNDgsMi43Ny0yLjYzLDQuNTEtMy40NUMzNy45LDExLjg0LDM5LjcsMTEuNDIsNDEuNTgsMTEuNDJ6Ii8+CjxwYXRoIGNsYXNzPSJzdDMiIGQ9Ik04MS41MSwxMS45NmMxLjUzLTAuNjMsMy4xMy0wLjk1LDQuODItMC45NWMxLjk0LDAsMy44MiwwLjQxLDUuNjQsMS4yNGMxLjgyLDAuODQsMy40MiwyLjAxLDQuNzksMy41CglsNi41NCw3LjE5YzAuMTQsMC4xNSwwLjI3LDAuMjMsMC4zOSwwLjIzczAuMjUtMC4wOCwwLjM5LTAuMjNsNi41NC03LjE5YzEuMzctMS40OSwyLjk3LTIuNjYsNC43OS0zLjUKCWMxLjgyLTAuODIsMy43LTEuMjQsNS42NC0xLjI0YzEuNywwLDMuMzEsMC4zMiw0Ljg0LDAuOTVjMS41MSwwLjY0LDIuODUsMS41NCw0LjAyLDIuNzFjMS4xMywxLjE3LDIuMDIsMi41MiwyLjY1LDQuMDcKCWMwLjYsMS40OCwwLjk0LDMuMDQsMSw0LjY5YzAuNTMsMi4yMywwLjUxLDQuNDktMC4wOCw2Ljc4Yy0wLjYsMi4zNS0xLjcyLDQuNDctMy4zNSw2LjM0bC0xNi41NywxOC45OQoJYy0xLjI3LDEuNDQtMi43NywyLjU3LTQuNDgsMy4zN2MtMS43MywwLjc5LTMuNTQsMS4xOS01LjQxLDEuMTlzLTMuNjctMC40LTUuMzktMS4xOWMtMS43Mi0wLjgxLTMuMjEtMS45My00LjQ4LTMuMzdsLTE2LjU3LTE5CgljLTEuNjEtMS44Ny0yLjcyLTMuOTgtMy4zMi02LjM0Yy0wLjU4LTIuMjgtMC42Mi00LjU0LTAuMS02Ljc4YzAuMDctMS42NSwwLjQxLTMuMjEsMS4wMy00LjY5YzAuNjItMS41NSwxLjUtMi45LDIuNjUtNC4wNwoJQzc4LjY2LDEzLjUsODAsMTIuNiw4MS41MSwxMS45NnoiLz4KPHBhdGggY2xhc3M9InN0MyIgZD0iTTE2NS42MSwxMS43M2MyLjQ2LDIuMywzLjkxLDUuMjIsNC4zNSw4Ljc2YzAuNDgsMS40OCwwLjcyLDIuOTgsMC43Miw0LjUxdjIyYzAsMS45Mi0wLjMzLDMuNzUtMC45OCw1LjQ5CgljLTAuNjcsMS44Mi0xLjY0LDMuMzktMi45MSw0LjcxYy0xLjM0LDEuMzktMi44MywyLjQ4LTQuNDYsMy4yN2MtMS43LDAuODEtMy40NCwxLjIxLTUuMjMsMS4yMWMtMS44NywwLTMuNjgtMC4zOS01LjQ0LTEuMTgKCWMtMS42OC0wLjc2LTMuMTktMS44My00LjUxLTMuMjJjLTEuMzItMS4zNi0yLjM0LTIuOTEtMy4wNy00LjY2Yy0wLjc2LTEuODItMS4xMy0zLjY5LTEuMTMtNS42MlYyNWMwLTEuNTMsMC4yNC0zLjAzLDAuNzItNC41MQoJYzAuNDMtMy41NCwxLjg3LTYuNDYsNC4zMy04Ljc2YzIuNDctMi4zNCw1LjQxLTMuNSw4LjgxLTMuNUMxNjAuMjEsOC4yMywxNjMuMTMsOS40LDE2NS42MSwxMS43M3oiLz4KPHBhdGggY2xhc3M9InN0MyIgZD0iTTIzNi40OCwxOC44MmMwLjI0LDEuMzksMC4zNCwyLjczLDAuMjgsNC4wMmMtMC4wNywxLjkxLTAuNTcsMy43NC0xLjUyLDUuNTFjLTAuOTQsMS43OS0yLjIzLDMuMzUtMy44Niw0LjY5CglsLTEuNDcsMS4xOGwyLjQ1LDIuNjNjMS4zMSwxLjM5LDIuMzEsMi45NSwzLjAxLDQuNjljMC42OSwxLjY4LDEuMDUsMy40LDEuMDgsNS4xNWMwLjIyLDEuMDgsMC4zMywyLjE2LDAuMzEsMy4yMgoJYy0wLjA1LDEuNy0wLjQsMy4zMi0xLjA2LDQuODdjLTAuNjcsMS41OC0xLjU4LDIuOTEtMi43MywzLjk5Yy0xLjE3LDEuMDgtMi40NiwxLjkyLTMuODYsMi41MmMtMS41LDAuNjUtMy4wMSwwLjk4LTQuNTYsMC45OAoJYy0xLjg5LDAtMy43OS0wLjQ1LTUuNjktMS4zN2MtMS44Mi0wLjg2LTMuNDYtMi4wNS00LjkyLTMuNThsLTMuOTctNC4zYy0wLjI0LTAuMjQtMC41MS0wLjM3LTAuOC0wLjM5CgljLTAuMjktMC4wMi0wLjU2LDAuMDktMC44LDAuMzFsLTMuOTcsNC4xMmMtMS40MywxLjQ4LTMuMDcsMi42Mi00LjkyLDMuNDNjLTEuODQsMC44MS0zLjczLDEuMjEtNS42OSwxLjIxCgljLTEuNiwwLTMuMTItMC4yNy00LjU2LTAuODJjLTEuNDQtMC41Ny0yLjcyLTEuMzctMy44NC0yLjRjLTEuNjEtMS41LTIuNzItMy4zMi0zLjMyLTUuNDljLTAuNi0yLjEtMC42Ny00LjI2LTAuMjEtNi40OQoJYzAuMDUtMS43MiwwLjQtMy40LDEuMDYtNS4wNWMwLjY1LTEuNywxLjYtMy4yNCwyLjgzLTQuNjFsMi4zNS0yLjYzbC0xLjM0LTEuMTNjLTEuNjEtMS4zNy0yLjg3LTIuOTYtMy43Ni00Ljc3CgljLTAuOTEtMS43OS0xLjM5LTMuNjItMS40NC01LjUxYzAtMi4xNSwwLjMzLTQuMjMsMS4wMS02LjI2YzAuNjktMi4wNCwxLjU4LTMuNTksMi42OC00LjY0YzEuMS0xLjA1LDIuMzktMS44NiwzLjg3LTIuNDIKCWMxLjQ2LTAuNTcsMy4wMi0wLjg1LDQuNjktMC44NWMxLjgsMCwzLjYsMC4zNCw1LjM5LDFjMS43OSwwLjY3LDMuNDEsMS42MSw0Ljg3LDIuODNsMy40NSwyLjkxYzAuMTcsMC4xNSwwLjQxLDAuMjgsMC43MiwwLjM5CgljMC4yOSwwLjA5LDAuNjEsMC4xMywwLjk1LDAuMTNzMC42Ni0wLjA0LDAuOTUtMC4xM2MwLjMxLTAuMSwwLjU2LTAuMjMsMC43NS0wLjM5bDMuNDMtMi45MWMxLjQ2LTEuMjIsMy4wOC0yLjE2LDQuODctMi44MwoJczMuNTgtMSw1LjM4LTFjMS42NSwwLDMuMjEsMC4yOCw0LjY5LDAuODVjMS40OCwwLjU3LDIuNzcsMS4zNywzLjg2LDIuNDJjMC45NCwwLjkxLDEuNywxLjk0LDIuMjcsMy4wOQoJQzIzNS44NiwxNiwyMzYuMjMsMTcuMjcsMjM2LjQ4LDE4LjgyeiIvPgo8cGF0aCBjbGFzcz0ic3Q0IiBkPSJNMTY0LjQ3LDIxLjE0djIyYzAsMi4xMS0wLjczLDMuOTQtMi4xOSw1LjQ5Yy0xLjQ2LDEuNTEtMy4xOSwyLjI3LTUuMTgsMi4yN2MtMS45OCwwLTMuNjktMC43Ni01LjE1LTIuMjcKCWMtMS40OC0xLjU1LTIuMjItMy4zOC0yLjIyLTUuNDl2LTIyYzAtMi4xMywwLjc0LTMuOTYsMi4yMi01LjQ5YzEuNDYtMS41MywzLjE4LTIuMjksNS4xNS0yLjI5YzEuOTksMCwzLjcyLDAuNzYsNS4xOCwyLjI5CglDMTYzLjc0LDE3LjE4LDE2NC40NywxOS4wMSwxNjQuNDcsMjEuMTR6Ii8+CjxwYXRoIGNsYXNzPSJzdDQiIGQ9Ik0xODkuMSwxNS4yNmMxLjItMS4xMywyLjgyLTEuNjEsNC44NC0xLjQ0YzIuMDEsMC4xNywzLjg0LDAuOTQsNS40OSwyLjI5bDMuNSwyLjg5YzEuNjcsMS4zNiwzLjY3LDIuMDQsNiwyLjA0CgljMi4zNCwwLDQuMzMtMC42OCw1Ljk4LTIuMDRsMy41My0yLjg5YzEuNjMtMS4zNiwzLjQ3LTIuMTIsNS41MS0yLjI5YzIuMDEtMC4xNywzLjYxLDAuMzEsNC44MiwxLjQ0YzEuMiwxLjEyLDEuNjQsMi41NiwxLjMxLDQuMzMKCWMtMC4zMywxLjc1LTEuMzEsMy4zMS0yLjk2LDQuNjZsLTIuMDYsMS42N2MtMS42NSwxLjM2LTIuNTMsMy4wNy0yLjY1LDUuMTNjLTAuMTQsMi4wNiwwLjUzLDMuODYsMi4wMSw1LjM5bDMuMzUsMy41CgljMS40OCwxLjU1LDIuMjgsMy4zLDIuNCw1LjI2YzAuMTIsMS45Ny0wLjQ3LDMuNTYtMS43OCw0Ljc3Yy0xLjI5LDEuMjItMi45MywxLjcyLTQuOTIsMS40OWMtMS45Ny0wLjI0LTMuNy0xLjEzLTUuMTgtMi42OAoJbC0zLjk5LTQuMTVjLTEuNDYtMS41NS0zLjI1LTIuMzItNS4zNi0yLjMycy0zLjksMC43Ny01LjM2LDIuMzJsLTMuOTksNC4xNWMtMS40OCwxLjU1LTMuMjEsMi40NC01LjIsMi42OAoJYy0xLjk4LDAuMjItMy42Mi0wLjI4LTQuOTItMS40OWMtMS4yOS0xLjItMS44OS0yLjgtMS44LTQuNzljMC4xLTEuOTksMC44OC0zLjc4LDIuMzItNS4zNmwyLjk2LTMuMjVjMS40NC0xLjU4LDIuMS0zLjQzLDEuOTYtNS41NAoJYy0wLjEyLTIuMTEtMS0zLjg2LTIuNjMtNS4yM2wtMS42Mi0xLjQyYy0xLjYzLTEuMzctMi42LTIuOTYtMi45MS00Ljc3QzE4Ny40NSwxNy44MywxODcuOSwxNi4zOCwxODkuMSwxNS4yNnoiLz4KPHBhdGggY2xhc3M9InN0NCIgZD0iTTQxLjM0LDE2LjU1YzIuMDEsMCwzLjcxLDAuOCw1LjEsMi40bDE2LjU5LDE4Ljk5YzEuMzksMS42MiwyLjEyLDMuNDYsMi4xOSw1LjU0CgljMC4wNywyLjA4LTAuNTUsMy43Ny0xLjg2LDUuMDhjLTEuMzIsMS4zMS0zLDEuOTEtNS4wMiwxLjhjLTIuMDMtMC4xMi0zLjgxLTAuOTMtNS4zNi0yLjQybC02LjA1LTUuODIKCWMtMS41My0xLjQ4LTMuMzktMi4yMi01LjU5LTIuMjJzLTQuMDYsMC43NC01LjU5LDIuMjJsLTYuMDYsNS44MmMtMS41NSwxLjQ5LTMuMzMsMi4zLTUuMzYsMi40MmMtMi4wMywwLjEtMy42OS0wLjUtNS0xLjgKCWMtMS4zMi0xLjMtMS45NS0zLTEuODgtNS4wOGMwLjA3LTIuMSwwLjgxLTMuOTQsMi4yMi01LjU0bDE2LjU3LTE4Ljk5QzM3LjY1LDE3LjM1LDM5LjM1LDE2LjU1LDQxLjM0LDE2LjU1eiIvPgo8cGF0aCBjbGFzcz0ic3Q0IiBkPSJNNzkuNTgsMjIuOTZjLTAuMDctMi4wOCwwLjU2LTMuNzgsMS44OC01LjFjMS4zMS0xLjMxLDIuOTQtMS44Niw0LjkyLTEuNjdjMS45NiwwLjE3LDMuNjcsMS4wNCw1LjEzLDIuNgoJbDYuNjcsNy4xNmMxLjQ2LDEuNTYsMy4yMiwyLjM0LDUuMjgsMi4zNGMyLjA4LDAsMy44NC0wLjc4LDUuMjgtMi4zNGw2LjY3LTcuMTZjMS40Ni0xLjU2LDMuMTgtMi40Myw1LjE1LTIuNgoJYzEuOTYtMC4xOSwzLjYsMC4zNyw0LjkyLDEuNjdjMS4zMSwxLjMyLDEuOTIsMy4wMiwxLjg2LDUuMWMtMC4wNywyLjA4LTAuOCwzLjkzLTIuMTksNS41NGwtMTYuNTksMTguOTYKCWMtMS4zOSwxLjYxLTMuMDksMi40Mi01LjEsMi40MmMtMS45OSwwLTMuNjktMC44MS01LjEtMi40Mkw4MS43OSwyOC41QzgwLjM5LDI2Ljg5LDc5LjY1LDI1LjA0LDc5LjU4LDIyLjk2eiIvPgo8L3N2Zz4K",L.appendChild(j),j.onload=function(){L.style.display="block"};var N=document.createElement("div");N.id="progress-bar-container",L.appendChild(N);var u=document.createElement("div");u.id="progress-bar",N.appendChild(u)}(),M.on("preload:end",(function(){M.p&&PokiSDK.gameLoadingFinished(),M.off("preload:progress")})),M.on("preload:progress",(function(M){var L=document.getElementById("progress-bar");L&&(M=Math.min(1,Math.max(0,M)),L.style.width=100*M+"%")})),M.on("start",(function(){var M=document.getElementById("application-splash-wrapper");M.parentElement.removeChild(M)}))}));var AdsManager=pc.createScript("adsManager");AdsManager.prototype.initialize=function(){AdsManager.instance=this,this.is_in_gameplay=!1,this.adActive=!1},AdsManager.prototype.showCommercialBreak=function(t=null){this.t=0,this.app.p?(this.app.systems.sound.volume=0,this.adActive=!0,this.app.fire("pause",!0,"ads"),PokiSDK.commercialBreak().then(function(){this.adActive=!1,this.app.systems.sound.volume=MuteButton.instance.muted?0:1,this.app.fire("pause",!1,"ads"),t&&t()}.bind(this))):t&&t()},AdsManager.prototype.showRewardedBreak=function(t=null){this.t=0,this.app.p?(this.app.systems.sound.volume=0,this.adActive=!0,this.app.fire("pause",!0,"ads"),PokiSDK.rewardedBreak().then(function(a){this.adActive=!1,this.app.systems.sound.volume=MuteButton.instance.muted?0:1,this.app.fire("pause",!1,"ads"),t&&t(a)}.bind(this))):t&&t(!1)},AdsManager.prototype.gameplayStart=function(){this.is_in_gameplay||(this.is_in_gameplay=!0,PokiSDK.gameplayStart())},AdsManager.prototype.gameplayStop=function(){this.is_in_gameplay&&(this.is_in_gameplay=!1,PokiSDK.gameplayStop())};var RevivePopUp=pc.createScript("revivePopUp");RevivePopUp.attributes.add("reviveButton_e",{type:"entity"}),RevivePopUp.attributes.add("noThanksButton_e",{type:"entity"}),RevivePopUp.attributes.add("counterText_e",{type:"entity"}),RevivePopUp.attributes.add("titleText_e",{type:"entity"}),RevivePopUp.attributes.add("container_e",{type:"entity"}),RevivePopUp.attributes.add("reviveTime",{type:"number"}),RevivePopUp.attributes.add("popUpAnimationTime",{type:"number"}),RevivePopUp.attributes.add("adFailedMessage",{type:"string"}),RevivePopUp.attributes.add("popUpOpenSound",{type:"string"}),RevivePopUp.attributes.add("reviveNoThanksSound",{type:"string"}),RevivePopUp.attributes.add("countdownSound",{type:"string"}),RevivePopUp.prototype.initialize=function(){RevivePopUp.instance=this,this.reviveButton_e.script.managedButton.on("click",this.revive,this),this.noThanksButton_e.script.managedButton.on("click",this.noThanks,this),this.counter=0,this.counterText=this.counterText_e.element,this.reviving=!1,this.leaving=!1,this.container_e.enabled=!1,this.locked=!0,this.originalTitle=this.titleText_e.element.text},RevivePopUp.prototype.update=function(){this.container_e.enabled&&!this.locked&&(InputManager.instance.wasPressed(pc.KEY_ESCAPE)?this.noThanks():InputManager.instance.wasPressed(pc.KEY_ENTER)&&this.revive())},RevivePopUp.prototype.revive=function(){this.locked||(this.locked=!0,clearInterval(this.timer),this.reviving=!0,AdsManager.instance.showRewardedBreak(function(e){this.locked=!1,e?(this.app.fire("revive:revive"),this.hide(!0)):(this.hide(!0),TransitionManager.instance.showMessagePopUp(this.adFailedMessage,function(){this.app.fire("revive:noThanks")}.bind(this)))}.bind(this)))},RevivePopUp.prototype.noThanks=function(){this.locked||(this.hide(),this.app.fire("revive:noThanks"),SoundManager.instance.playSoundTrigger(this.reviveNoThanksSound))},RevivePopUp.prototype.show=function(){this.container_e.enabled=!0,SoundManager.instance.playSoundTrigger(this.popUpOpenSound),this.titleText_e.element.text=this.originalTitle.replace("{level}",LevelManager.instance.current_level+1),this.reviving=!1,this.leaving=!1,this.counter=this.reviveTime,this.counterText.text=this.counter.toString(),this.timer=setInterval(this.updateCounter.bind(this),1e3),this.container_e.setLocalScale(0,0,0),this.currentTween&&this.currentTween.stop(),this.currentTween=this.container_e.tween(this.container_e.getLocalScale()).to({x:1,y:1,z:1},this.popUpAnimationTime,pc.BackOut).start().unscaled(!0),this.locked=!1},RevivePopUp.prototype.hide=function(e){this.locked||(this.locked=!0,this.currentTween&&this.currentTween.stop(),this.leaving=!0,clearInterval(this.timer),e?(this.container_e.setLocalScale(0,0,0),this.container_e.enabled=!1):(this.currentTween=this.container_e.tween(this.container_e.getLocalScale()).to({x:0,y:0,z:0},this.popUpAnimationTime,pc.BackIn).start().unscaled(!0),this.currentTween.on("complete",function(){this.container_e.enabled=!1}.bind(this))))},RevivePopUp.prototype.updateCounter=function(){this.locked||(SoundManager.instance.playSoundTrigger(this.countdownSound),this.counter--,this.counterText.text=this.counter.toString(),this.counterText_e.setLocalScale(1.5,1.5,1.5),this.counterText_e.tween(this.counterText_e.getLocalScale()).to({x:1,y:1,z:1},.2,pc.BackInOut).start().unscaled(!0),this.counter<=0&&!this.reviving&&!this.leaving&&(clearInterval(this.timer),this.noThanks()))};var SwipeInput=pc.createScript("swipeInput");SwipeInput.SWIPE_DIRECTION={NONE:{value:0,name:"None"},UP:{value:1,name:"Up"},DOWN:{value:2,name:"Down"},LEFT:{value:3,name:"Left"},RIGHT:{value:4,name:"Right"}},SwipeInput._swipedDirection=SwipeInput.SWIPE_DIRECTION.NONE,SwipeInput.attributes.add("minimumSwipeLength",{type:"number",default:1,title:"Minimum swipe length",description:"The length required for a swipe to be detected"}),SwipeInput.attributes.add("verbose",{type:"boolean",default:!1,title:"Verbose"}),SwipeInput.prototype.initialize=function(){this.instance=SwipeInput,this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchDown,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchUp,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this)),this.app.mouse&&(this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this))},SwipeInput.prototype.postUpdate=function(t){},SwipeInput.prototype.swap=function(t){},SwipeInput.prototype.onTouchDown=function(t){this.setInitialPos(t.changedTouches[0].x,t.changedTouches[0].y),t.event.preventDefault()},SwipeInput.prototype.onTouchUp=function(t){this.updateSwipeDirection(t.changedTouches[0].x,t.changedTouches[0].y),t.event.preventDefault()},SwipeInput.prototype.onTouchMove=function(t){},SwipeInput.prototype.onMouseDown=function(t){t.button===pc.MOUSEBUTTON_LEFT&&this.setInitialPos(t.x,t.y)},SwipeInput.prototype.onMouseUp=function(t){t.button===pc.MOUSEBUTTON_LEFT&&this.updateSwipeDirection(t.x,t.y)},SwipeInput.prototype.onMouseMove=function(t){},SwipeInput.eatEvent=function(){SwipeInput.down=!1,SwipeInput.justDown=!1,SwipeInput.justUp=!1},SwipeInput.prototype.setInitialPos=function(t,e){this._initialTouchPos={x:t,y:e}},SwipeInput.prototype.updateSwipeDirection=function(t,e){var i={x:t,y:e},p=vectorMagnitude(this._initialTouchPos,i);if(this.debugLog("---"),this.debugLog("Magnitude: "+p),!(p<this.minimumSwipeLength)){var n=vectorAngleDegree(this._initialTouchPos,i);this.debugLog("Degree: "+n),n<-135||n>135?(this.app.fire("swipe:left"),this.debugLog("Swiped Left")):n>-135&&n<-45?(this.app.fire("swipe:up"),this.debugLog("Swiped Up")):n>-45&&n<45?(this.app.fire("swipe:right"),this.debugLog("Swiped Right")):n>45&&n<135&&(this.app.fire("swipe:down"),this.debugLog("Swiped Down")),SwipeInput._swipedDirection=SwipeInput.SWIPE_DIRECTION.NONE}};var vectorMagnitude=function(t,e){var i=t.x-e.x,p=t.y-e.y;return Math.sqrt(i*i+p*p)},vectorAngleDegree=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI};SwipeInput.prototype.debugLog=function(t){this.verbose&&DebugManager.enabled&&console.log(t)};var ActivatablePhysics=pc.createScript("activatablePhysics");ActivatablePhysics.prototype.initialize=function(){this.app.on("player:turboCollision",this.onTurboCollision,this)},ActivatablePhysics.attributes.add("targetEntity",{type:"entity"}),ActivatablePhysics.attributes.add("linearDamping",{type:"number",default:.25}),ActivatablePhysics.attributes.add("angularDamping",{type:"number",default:.25}),ActivatablePhysics.prototype.throw=function(t,i){null==this.targetEntity&&(this.targetEntity=this.entity),this.targetEntity.addComponent("rigidbody",{type:"dynamic",mass:1}),this.rb=this.targetEntity.rigidbody,this.targetEntity.addComponent("collision",{type:"compound"}),this.rb.angularDamping=this.angularDamping,this.rb.linearDamping=this.linearDamping,this.rb.applyImpulse(t),this.rb.applyTorqueImpulse(i)},ActivatablePhysics.prototype.update=function(t){DebugManager.enabled&&InputManager.instance.wasPressed(pc.KEY_O)&&this.throw(new pc.Vec3(0,10,0),new pc.Vec3(10*Math.random(),10*Math.random(),10*Math.random()))};var PlayerColorManager=pc.createScript("playerColorManager");PlayerColorManager.attributes.add("material_1_a",{type:"asset",assetType:"material"}),PlayerColorManager.attributes.add("material_2_a",{type:"asset",assetType:"material"}),PlayerColorManager.attributes.add("material_3_a",{type:"asset",assetType:"material"}),PlayerColorManager.attributes.add("material_skin_a",{type:"asset",assetType:"material"}),PlayerColorManager.attributes.add("material_hair_a",{type:"asset",assetType:"material"}),PlayerColorManager.attributes.add("material_socks_a",{type:"asset",assetType:"material"}),PlayerColorManager.attributes.add("material_details_a",{type:"asset",assetType:"material"}),PlayerColorManager.attributes.add("teamButton_t",{type:"asset"}),PlayerColorManager.attributes.add("teamSelectContainer_e",{type:"entity"}),PlayerColorManager.attributes.add("teamSelectPanelButton_e",{type:"entity"}),PlayerColorManager.attributes.add("teamSelectSound",{type:"string"}),PlayerColorManager.attributes.add("unlockTeamPopUp_e",{type:"entity"}),PlayerColorManager.attributes.add("unlockButtonsGroup_e",{type:"entity"}),PlayerColorManager.attributes.add("unlockButtonCoins_e",{type:"entity"}),PlayerColorManager.attributes.add("cantUnlockWithCoinsSound",{type:"string"}),PlayerColorManager.attributes.add("onUnlockteamCoinsSound",{type:"string"}),PlayerColorManager.attributes.add("playButtonsGroup_e",{type:"entity"}),PlayerColorManager.attributes.add("unlockWithVideoButton_e",{type:"entity"}),PlayerColorManager.attributes.add("unlockWithCoinsButton_e",{type:"entity"}),PlayerColorManager.attributes.add("unlockWithCoinsButtonText_e",{type:"entity"}),PlayerColorManager.attributes.add("unlockDefaultPrice",{type:"number"}),PlayerColorManager.attributes.add("debugCountry_e",{type:"entity"}),PlayerColorManager.attributes.add("debugFlag_e",{type:"entity"}),PlayerColorManager.schemaColor=[{name:"country",type:"string"},{name:"countryCode",type:"string"},{name:"unlockPrice",type:"number",default:-1},{name:"flagSprite",type:"asset"},{name:"color_1",type:"rgba"},{name:"color_2",type:"rgba"},{name:"color_3",type:"rgba"},{name:"skinColor",type:"rgba",default:[.67,.47,.29,1]},{name:"hairColor",type:"rgba",default:[0,0,0,1]},{name:"socksColor",type:"rgba",default:[1,1,1,1]},{name:"detailsColor",type:"rgba",default:[1,1,1,1]},{name:"alwaysUnlocked",type:"boolean",default:!1},{name:"opponentColor1",type:"rgba",default:[1,1,1,1]},{name:"opponentColor2",type:"rgba",default:[1,1,1,1]}],PlayerColorManager.attributes.add("playerColors",{type:"json",schema:PlayerColorManager.schemaColor,array:!0}),PlayerColorManager.prototype.initialize=function(){this.saveKey="player_team",this.pattern_unlocked_key="player_team_unlocked",PlayerColorManager.instance=this,this.unlockPopUp=this.unlockTeamPopUp_e.script.unlockPlayerColorPopUp,this.unlockPopUp.on("hiddenComplete",this.onPopUpHidden,this),this.app.on("unlock:team",this.onTeamUnlock,this),this.app.on("unlock:teamCoins",this.onTeamUnlockCoins,this),this.unlockWithVideoButton_e.script.managedButton.on("click",this.onUnlockWithAdButton,this),this.unlockWithCoinsButton_e.script.managedButton.on("click",this.onUnlockWithCoinsButton,this),this.indexedPlayerColors={},this.indexedCountryCodes={};for(let e=0;e<this.playerColors.length;e++){let t=this.playerColors[e],a=this.playerColors[e].country.split(" ");for(let e=0;e<a.length;e++)a[e]=a[e][0].toUpperCase()+a[e].substring(1);let o=a.join(" ");t.showCountry=o,t.index=e,this.indexedPlayerColors[t.country]=t,this.indexedCountryCodes[t.countryCode]=t}this.material_1=this.material_1_a.resource,this.material_2=this.material_2_a.resource,this.material_3=this.material_3_a.resource,this.material_skin=this.material_skin_a.resource,this.material_hair=this.material_hair_a.resource,this.material_socks=this.material_socks_a.resource,this.material_details=this.material_details_a.resource,this.colorIndex=0,this.teamButtonScripts=[];for(let e=0;e<this.playerColors.length;e++){let t=this.teamButton_t.resource.instantiate(),a=t.script.teamSelectButton,o=this.playerColors[e];a.setTeam(o,e),a.setSelected(!1),a.setLocked(!this.isTeamUnlocked(e)),this.teamButtonScripts.push(a),this.teamSelectContainer_e.addChild(t)}this.app.on("color:team_select",this.onTeamSelectByButton,this),this.team_i=-1,this.currentSelectedTeam=-1;let e=Avix_Save.loadInt(this.saveKey,-1),t=0;-1!=e&&(t=e),this.onTeamSelect(t)},PlayerColorManager.prototype.update=function(e){if("menu"==MenuManager.instance.currentMode&&(InputManager.instance.wasPressed(pc.KEY_RIGHT)||InputManager.instance.wasPressed(pc.KEY_D)?this.onTeamSelectByButton(this.mod(this.currentSelectedTeam+1,this.playerColors.length)):InputManager.instance.wasPressed(pc.KEY_LEFT)||InputManager.instance.wasPressed(pc.KEY_A)?this.onTeamSelectByButton(this.mod(this.currentSelectedTeam-1,this.playerColors.length)):InputManager.instance.wasPressed(pc.KEY_DOWN)||InputManager.instance.wasPressed(pc.KEY_S)?this.onTeamSelectByButton(this.mod(this.currentSelectedTeam+8,this.playerColors.length)):(InputManager.instance.wasPressed(pc.KEY_UP)||InputManager.instance.wasPressed(pc.KEY_W))&&this.onTeamSelectByButton(this.mod(this.currentSelectedTeam-8,this.playerColors.length)),this.unlockButtonsGroup_e.enabled&&InputManager.instance.wasPressed(pc.KEY_ENTER))){let e=this.getTeamPriceFromIndex(this.currentSelectedTeam);LevelManager.instance.current_coins>=e?this.onUnlockWithCoinsButton():this.onUnlockWithAdButton()}},PlayerColorManager.prototype.onTeamSelect=function(e){if(this.selectTeamVisuals(e),this.isTeamUnlocked(e)||!this.teamButtonScripts[e].locked)this.team_i=e,Avix_Save.saveInt(this.saveKey,this.team_i),this.playButtonsGroup_e.enabled=!0,this.unlockButtonsGroup_e.enabled=!1;else{this.getTeamPriceFromIndex(this.currentSelectedTeam);LevelManager.instance.current_coins,this.playButtonsGroup_e.enabled=!1,this.unlockButtonsGroup_e.enabled=!0,this.unlockWithCoinsButtonText_e.element.text=this.getTeamPriceFromIndex(e)}},PlayerColorManager.prototype.onTeamSelectByButton=function(e){SoundManager.instance.playSoundTrigger(this.teamSelectSound),this.onTeamSelect(e)},PlayerColorManager.prototype.onUnlockWithAdButton=function(){AdsManager.instance.showRewardedBreak(function(e){this.locked=!1,e?this.app.fire("unlock:team",this.currentSelectedTeam):TransitionManager.instance.showMessagePopUp(this.adFailedMessage)}.bind(this))},PlayerColorManager.prototype.onUnlockWithCoinsButton=function(){let e=this.getTeamPriceFromIndex(this.currentSelectedTeam);LevelManager.instance.current_coins>=e?this.app.fire("unlock:teamCoins",this.currentSelectedTeam):SoundManager.instance.playSoundTrigger(this.cantUnlockWithCoinsSound)},PlayerColorManager.prototype.selectTeamVisuals=function(e){this.currentSelectedTeam>=0&&this.currentSelectedTeam<this.teamButtonScripts.length&&null!=this.teamButtonScripts[this.currentSelectedTeam]&&this.teamButtonScripts[this.currentSelectedTeam].setSelected(!1),this.setPlayerColorIndex(e),this.teamButtonScripts[e].setSelected(!0),this.currentSelectedTeam=e},PlayerColorManager.prototype.setPlayerColorIndex=function(e){e%=this.playerColors.length;let t=this.playerColors[e];this.updateMaterialsColor(t),TournamentManager.instance.updateMaterialsColorTeam(e),this.setDebugData(t)},PlayerColorManager.prototype.onTeamSelectCountry=function(e){let t=this.indexedPlayerColors[e];return!!t&&(this.onTeamSelect(t.index),!0)},PlayerColorManager.prototype.onTeamSelectCountryCode=function(e){return-1!=this.getTeamIndexFromCountryCode(e)&&(this.onTeamSelect(playerColor.index),!0)},PlayerColorManager.prototype.getTeamPriceFromIndex=function(e){let t=this.playerColors[e].unlockPrice;return-1==t&&(t=this.unlockDefaultPrice),t},PlayerColorManager.prototype.getTeamIndexFromCountryCode=function(e){let t=this.indexedCountryCodes[e];return t?t.index:-1},PlayerColorManager.prototype.updateMaterialsColor=function(e){this.material_1.diffuse.set(e.color_1.r,e.color_1.g,e.color_1.b),this.material_1.update(),this.material_2.diffuse.set(e.color_2.r,e.color_2.g,e.color_2.b),this.material_2.update(),this.material_3.diffuse.set(e.color_3.r,e.color_3.g,e.color_3.b),this.material_3.update(),this.material_skin.diffuse.set(e.skinColor.r,e.skinColor.g,e.skinColor.b),this.material_skin.update(),this.material_hair.diffuse.set(e.hairColor.r,e.hairColor.g,e.hairColor.b),this.material_hair.update(),this.material_socks.diffuse.set(e.socksColor.r,e.socksColor.g,e.socksColor.b),this.material_socks.update(),this.material_details.diffuse.set(e.detailsColor.r,e.detailsColor.g,e.detailsColor.b),this.material_details.update()},PlayerColorManager.prototype.setDebugData=function(e){this.debugCountry_e.element.text=e.showCountry,null!=e.flagSprite&&(this.debugFlag_e.element.sprite=e.flagSprite.resource)},PlayerColorManager.prototype.isTeamUnlocked=function(e){return this.playerColors[e].alwaysUnlocked||Avix_Save.loadBoolean(this.pattern_unlocked_key+e,!1)},PlayerColorManager.prototype.onTeamUnlock=function(e){Avix_Save.saveBoolean(this.pattern_unlocked_key+e,!0),this.teamButtonScripts[e].unlockAnimation(),this.onTeamSelect(e)},PlayerColorManager.prototype.onTeamUnlockCoins=function(e){let t=this.getTeamPriceFromIndex(e);LevelManager.instance.current_coins>=t&&(LevelManager.instance.setCoinCount(LevelManager.instance.current_coins-t),SoundManager.instance.playSoundTrigger(this.onUnlockteamCoinsSound),this.onTeamUnlock(e))},PlayerColorManager.prototype.onPopUpHidden=function(){this.team_i!=this.currentSelectedTeam&&this.onTeamSelect(this.team_i)},PlayerColorManager.prototype.getNextUnlockedTeamIndex=function(){let e=this.currentSelectedTeam;for(let t=1;t<=this.playerColors.length;t++){let a=(e+t)%this.playerColors.length;if(this.isTeamUnlocked(a)||!this.teamButtonScripts[a].locked)return a}},PlayerColorManager.prototype.getPrevUnlockedTeamIndex=function(){let e=this.currentSelectedTeam;for(let t=1;t<=this.playerColors.length;t++){let a=this.mod(e-t,this.playerColors.length);if(this.isTeamUnlocked(a)||!this.teamButtonScripts[a].locked)return a}},PlayerColorManager.prototype.mod=function(e,t){return(e%t+t)%t};var GoalModule=pc.createScript("goalModule");GoalModule.attributes.add("movingTarget_e",{type:"entity"}),GoalModule.attributes.add("movingTargetSpeed",{type:"number",default:1}),GoalModule.attributes.add("minigameCycles",{type:"number",default:3}),GoalModule.attributes.add("movingTargetMaxDistanceHor",{type:"number",default:1}),GoalModule.attributes.add("goalTrigger_e",{type:"entity"}),GoalModule.attributes.add("goalTriggerMarker",{type:"entity"}),GoalModule.attributes.add("timeFillBar_e",{type:"entity"}),GoalModule.attributes.add("kickButton_e",{type:"entity"}),GoalModule.attributes.add("targetRingsMultipliers",{type:"number",array:!0,default:[5,3,2,1]}),GoalModule.attributes.add("soundGoalMult",{type:"string",default:"kick:goalx"}),GoalModule.attributes.add("movingTargetPaths",{type:"json",schema:[{name:"points",type:"entity",array:"true"},{name:"target",type:"entity"}],array:"true"}),GoalModule.prototype.initialize=function(){GoalModule.instance=this,this.app.on("game:restart",this.restart,this),this.app.on("player:kickPrepared",this.onStartMinigame,this),this.kickButton_e.script.managedButton.on("pressedstart",this.onKickPressed,this),this.kickButton_e.enabled=!1,this.goalTrigger_e.collision.on("triggerenter",this.onGoalTrigger,this),this.timeFillBar=this.timeFillBar_e.script.progressBarUi,this.vec3Helper=new pc.Vec3,this.restart(),this.currentPath=0,this.setEnabledTarget(-1),this.currentPathPoint=0,this.nextPathPoint=0,this.currentPathDirection=1,this.currentSegmentTime=0,this.currentPathDistance=0,this.currentSegmentDistance=0,this.totalGameTime=0,this.remainingTime=0;for(let t=0;t<this.movingTargetPaths.length;t++)for(let e=0;e<this.movingTargetPaths[t].points.length;e++)this.movingTargetPaths[t].points[e].enabled=!1},GoalModule.prototype.restart=function(){this.movingTarget_e.enabled=!1,this.goalTriggerMarker.enabled=!1,this.timeFillBar_e.enabled=!1,this.hasTriggeredGoal=!1,this.inMiniGame=!1,this.setEnabledTarget(-1)},GoalModule.prototype.onStartMinigame=function(t=-1){this.movingTarget_e.enabled=!0,this.inMiniGame=!0,this.posX=0,this.minigameTime=0,this.currentPath=-1!=t?t:Math.floor(Math.random()*this.movingTargetPaths.length),this.setEnabledTarget(this.currentPath),this.currentPathPoint=0,this.currentPathDirection=1,this.nextPathPoint=this.calculateNextPoint(),this.currentSegmentTime=0,this.currentPathDistance=this.calculatePathDistance(this.movingTargetPaths[this.currentPath].points),this.totalGameTime=this.currentPathDistance/this.movingTargetSpeed*this.minigameCycles*2,this.remainingTime=this.totalGameTime,this.timeFillBar.setFill(1),this.timeFillBar_e.enabled=!0,this.currentSegmentDistance=this.calculateCurrentSegmentDistance(),this.updateMovingTarget(),(this.app.touch||DebugManager.enabled)&&(this.kickButton_e.enabled=!0)},GoalModule.prototype.onGoalTrigger=function(t){if(!this.hasTriggeredGoal&&t.tags.has("ball")){this.hasTriggeredGoal=!0,this.vec3Helper.copy(t.getPosition()),this.vec3Helper.copy(AvixUtils.inverseTransformPoint(this.entity,this.vec3Helper));let e=this.movingTargetPaths[this.currentPath].target,i=e.script.goalTargetRings,a=e.getLocalPosition();this.vec3Helper.z=a.z,this.goalTriggerMarker.setLocalPosition(this.vec3Helper.x,this.vec3Helper.y,this.vec3Helper.z),this.goalTriggerMarker.enabled=!0;let n=this.vec3Helper.distance(a),r=i.getRing(n),s=this.targetRingsMultipliers[r];SoundManager.instance.playSoundTrigger(this.soundGoalMult+s.toString()),this.app.fire("goalTriggered",s)}},GoalModule.prototype.update=function(t){DebugManager.enabled&&InputManager.instance.wasPressed(pc.KEY_M)&&this.onStartMinigame((this.currentPath+1)%this.movingTargetPaths.length),this.inMiniGame&&(this.currentSegmentTime+=t/(this.currentSegmentDistance/this.movingTargetSpeed),this.currentSegmentTime>=1&&(this.currentSegmentTime-=1,this.currentPathPoint=this.nextPathPoint,this.nextPathPoint=this.calculateNextPoint(),this.currentSegmentDistance=this.calculateCurrentSegmentDistance()),this.updateMovingTarget(),(InputManager.instance.wasPressed(pc.KEY_SPACE)||InputManager.instance.wasPressed(pc.KEY_W)||InputManager.instance.wasPressed(pc.KEY_UP)||InputManager.instance.wasPressed(pc.KEY_ENTER))&&this.finishKick(),this.remainingTime-=t,this.timeFillBar.setFill(this.remainingTime/this.totalGameTime),this.remainingTime<=0&&this.finishKick())},GoalModule.prototype.onKickPressed=function(){this.finishKick()},GoalModule.prototype.finishKick=function(){this.inMiniGame&&(this.app.fire("goal:miniGameDone"),this.movingTarget_e.enabled=!1,this.inMiniGame=!1,this.kickButton_e.enabled=!1,this.timeFillBar_e.enabled=!1)},GoalModule.prototype.updateMovingTarget=function(){let t=this.movingTargetPaths[this.currentPath].points[this.currentPathPoint].getLocalPosition(),e=this.movingTargetPaths[this.currentPath].points[this.nextPathPoint].getLocalPosition();this.vec3Helper.lerp(t,e,this.currentSegmentTime),this.movingTarget_e.setLocalPosition(this.vec3Helper)},GoalModule.prototype.calculateNextPoint=function(){let t=this.movingTargetPaths[this.currentPath].points.length,e=0;return t>1?(e=this.currentPathPoint+this.currentPathDirection,(e>=t||e<0)&&(this.currentPathDirection*=-1,e=this.currentPathPoint+this.currentPathDirection),e):0},GoalModule.prototype.calculatePathDistance=function(t){let e=0;for(let i=0;i<t.length-1;i++)this.vec3Helper.copy(t[i].getLocalPosition()),e+=this.vec3Helper.distance(t[i+1].getLocalPosition());return e},GoalModule.prototype.calculateCurrentSegmentDistance=function(){let t=this.movingTargetPaths[this.currentPath].points[this.currentPathPoint].getLocalPosition(),e=this.movingTargetPaths[this.currentPath].points[this.nextPathPoint].getLocalPosition();return this.vec3Helper.copy(t),this.vec3Helper.distance(e)},GoalModule.prototype.setEnabledTarget=function(t){for(let e=0;e<this.movingTargetPaths.length;e++)this.movingTargetPaths[e].target.enabled=e==t};var PickupObject=pc.createScript("pickupObject");PickupObject.attributes.add("pickupId",{type:"string"}),PickupObject.attributes.add("subId",{type:"string"}),PickupObject.attributes.add("graphicsContainer",{type:"entity"}),PickupObject.attributes.add("pickAnimationTime",{type:"number"}),PickupObject.attributes.add("pickAnimationDelay",{type:"number"}),PickupObject.attributes.add("pickupOnTurbo",{type:"boolean"}),PickupObject.prototype.initialize=function(){this.pickedUp=!1,this.entity.collision.on("triggerenter",this.handleTriggerEnter,this)},PickupObject.prototype.update=function(t){PlayerController.instance.hasTurbo&&this.pickupOnTurbo&&!this.pickedUp&&this.entity.getPosition().z>PlayerController.instance.entity.getPosition().z&&this.getPickedUp()},PickupObject.prototype.postUpdate=function(t){this.pickedUp&&this.stayPosition&&this.entity.setPosition(this.stayPosition)},PickupObject.prototype.handleTriggerEnter=function(t){!this.pickedUp&&t.tags.has("player")&&this.getPickedUp()},PickupObject.prototype.getPickedUp=function(){this.app.fire("pickup:"+this.pickupId,this.subId),this.pickedUp=!0,this.pickupAnimation(),this.stayPosition=this.entity.getPosition().clone()},PickupObject.prototype.reset=function(){this.pickedUp=!1,this.stayPosition=null,this.graphicsContainer.setLocalScale(1,1,1),this.graphicsContainer.setLocalEulerAngles(0,0,0),this.graphicsContainer.setLocalPosition(0,0,0),this.entity.setLocalPosition(0,0,0)},PickupObject.prototype.pickupAnimation=function(){this.cont={value:0};let t=this.app.tween(this.cont).to({value:1},this.pickAnimationTime,pc.Linear);t.on("update",function(t){this.graphicsContainer.setLocalEulerAngles(0,720*this.cont.value,0);let i=pc.math.lerp(1,5,this.cont.value),e=pc.math.lerp(1,0,1.5*this.cont.value);this.graphicsContainer.setLocalScale(e,i,e),this.graphicsContainer.setLocalPosition(0,2.5*this.cont.value,0)}.bind(this)),t.delay(this.pickAnimationDelay),t.start()};var TeamSelectButton=pc.createScript("teamSelectButton");TeamSelectButton.attributes.add("teamFlag_e",{type:"entity"}),TeamSelectButton.attributes.add("activeIndicator_e",{type:"entity"}),TeamSelectButton.attributes.add("locked_indicator_e",{type:"entity"}),TeamSelectButton.attributes.add("unlocked_flag_color_c",{type:"rgb"}),TeamSelectButton.attributes.add("locked_flag_color_c",{type:"rgb"}),TeamSelectButton.attributes.add("teamName_e",{type:"entity"}),TeamSelectButton.attributes.add("color1_e",{type:"entity"}),TeamSelectButton.attributes.add("color2_e",{type:"entity"}),TeamSelectButton.attributes.add("color3_e",{type:"entity"}),TeamSelectButton.attributes.add("colorSkin_e",{type:"entity"}),TeamSelectButton.attributes.add("colorHair_e",{type:"entity"}),TeamSelectButton.attributes.add("colorSocks_e",{type:"entity"}),TeamSelectButton.attributes.add("colorDetails_e",{type:"entity"}),TeamSelectButton.attributes.add("unlockImage_e",{type:"entity"}),TeamSelectButton.attributes.add("unlockAnimationTime",{type:"number"}),TeamSelectButton.prototype.initialize=function(){this.entity.script&&this.entity.script.has("managedButton")&&this.entity.script.managedButton.on("click",this.onClick,this),this.locked=!0},TeamSelectButton.prototype.onClick=function(t){this.app.fire("color:team_select",this.teamIndex)},TeamSelectButton.prototype.setSelected=function(t){this.activeIndicator_e&&(this.activeIndicator_e.enabled=t)},TeamSelectButton.prototype.setLocked=function(t){this.locked_indicator_e&&(this.locked_indicator_e.enabled=t),this.teamFlag_e.element.color=t?this.locked_flag_color_c:this.unlocked_flag_color_c,this.locked=t},TeamSelectButton.prototype.setTeam=function(t,e){this.unlockImage_e&&(this.unlockImage_e.enabled=!1),t.flagSprite&&this.teamFlag_e&&(this.teamFlag_e.element.sprite=t.flagSprite.resource),this.teamName_e&&(this.teamName_e.element.text=t.country),this.teamIndex=e,this.color1_e&&(this.color1_e.element.color=t.color_1),this.color2_e&&(this.color2_e.element.color=t.color_2),this.color3_e&&(this.color3_e.element.color=t.color_3),this.colorSkin_e&&(this.colorSkin_e.element.color=t.skinColor),this.colorHair_e&&(this.colorHair_e.element.color=t.hairColor),this.colorSocks_e&&(this.colorSocks_e.element.color=t.socksColor),this.colorDetails_e&&(this.colorDetails_e.element.color=t.detailsColor)},TeamSelectButton.prototype.unlockAnimation=function(){if(this.setLocked(!1),!this.unlockImage_e)return;this.unlockImage_e.enabled=!0,this.unlockImage_e.element.opacity=1;let t={value:1};this.tweenOpacity=this.app.tween(t).to({value:0},this.unlockAnimationTime,pc.QuinticIn),this.tweenOpacity.on("update",function(e){this.unlockImage_e.element.opacity=t.value}.bind(this)),this.tweenOpacity.on("complete",function(){this.unlockImage_e.enabled=!1}.bind(this)),this.tweenOpacity.start()};var GoalTargetRings=pc.createScript("goalTargetRings");GoalTargetRings.attributes.add("baseDistances",{type:"number",array:"true"}),GoalTargetRings.attributes.add("scaler_e",{type:"entity"}),GoalTargetRings.prototype.initialize=function(){this.checkInitialize()},GoalTargetRings.prototype.checkInitialize=function(){if(!this.initialized){this.initialized=!0,this.scaledDistances=[],this.scalerScale=this.scaler_e.getLocalScale().x;for(let t=0;t<this.baseDistances.length;t++)this.scaledDistances.push(this.scalerScale*this.baseDistances[t])}},GoalTargetRings.prototype.getRing=function(t){this.checkInitialize();for(let e=this.scaledDistances.length-1;e>=0;e--)if(t>this.scaledDistances[e])return e+1;return 0};var PickUpletterManager=pc.createScript("pickUpletterManager");PickUpletterManager.attributes.add("letters_text_t",{type:"asset"}),PickUpletterManager.letterSchema=[{name:"color",type:"rgb"},{name:"opacity",type:"number",min:"0",max:"1",default:1}],PickUpletterManager.attributes.add("lettersPickedColor",{type:"json",schema:PickUpletterManager.letterSchema}),PickUpletterManager.attributes.add("lettersMissingColor",{type:"json",schema:PickUpletterManager.letterSchema}),PickUpletterManager.attributes.add("letters_text_container",{type:"entity"}),PickUpletterManager.attributes.add("lettersTemplates",{type:"json",array:!0,schema:[{name:"id",type:"string"},{name:"letter_s",type:"string"},{name:"entity",type:"entity"}]}),PickUpletterManager.attributes.add("letterPickUpSoundPrefix",{type:"string"}),PickUpletterManager.prototype.initialize=function(){PickUpletterManager.instance=this,this.ui_letters={},this.availableLetters=[],this.indexedLetters={},this.allLetters=[];for(let t=0;t<this.lettersTemplates.length;t++){let e=this.lettersTemplates[t];this.availableLetters.push(e.entity),e.entity.letterId=e.id,e.entity.released=!0;let i=this.letters_text_t.resource.instantiate();this.letters_text_container.addChild(i),this.ui_letters[e.id]=i,i.element.opacity=this.lettersMissingColor.opacity,i.element.color=this.lettersMissingColor.color,i.element.text=e.letter_s,this.indexedLetters[e.id]=e,this.allLetters.push(e)}this.app.on("pickup:letter",this.onLetterPickup,this)},PickUpletterManager.prototype.update=function(t){},PickUpletterManager.prototype.onLetterPickup=function(t){this.indexedLetters[t].entity.pickedUp=!0,this.ui_letters[t].element.opacity=this.lettersPickedColor.opacity,this.ui_letters[t].element.color=this.lettersPickedColor.color;let e=!0,i=0;for(let t=0;t<this.allLetters.length;t++)this.allLetters[t].entity.pickedUp?i++:e=!1;SoundManager.instance.playSoundTrigger(this.letterPickUpSoundPrefix+i.toString()),e?this.app.fire("letters:allPicked"):1==i&&this.app.fire("letters:firstPicked")},PickUpletterManager.prototype.getPickedLettersCount=function(){let t=0;for(let e=0;e<this.allLetters.length;e++)this.allLetters[e].entity.pickedUp&&t++;return t},PickUpletterManager.prototype.clearLetters=function(){for(let t=0;t<this.lettersTemplates.length;t++){let e=this.lettersTemplates[t];this.resetLetter(e.id)}this.availableLetters.length=0;for(let t=0;t<this.lettersTemplates.length;t++){let e=this.lettersTemplates[t];this.availableLetters.push(e.entity)}},PickUpletterManager.prototype.hasAnyAvailableLetter=function(){return this.availableLetters.length>0},PickUpletterManager.prototype.getLetter=function(t){if(this.availableLetters.length>0){let e=Math.floor(Math.random()*this.availableLetters.length),i=this.availableLetters[t?0:e];return i.released=!1,this.availableLetters.splice(t?0:e,1),i}return null},PickUpletterManager.prototype.resetLetter=function(t){let e=this.indexedLetters[t].entity;e.pickedUp=!1,this.ui_letters[t].element.opacity=this.lettersMissingColor.opacity,this.ui_letters[t].element.color=this.lettersMissingColor.color,e.script.pickupObject.reset(),this.releaseLetter(t,!0)},PickUpletterManager.prototype.releaseLetter=function(t,e=!1){let i=this.indexedLetters[t].entity;i.released&&!e||(i.released=!0,i.reparent(this.entity),i.setLocalPosition(0,0,0),i.script.pickupObject.reset(),i.pickedUp||this.availableLetters.includes(i)||this.availableLetters.push(i))};var PickUpletterSpawner=pc.createScript("pickUpletterSpawner");PickUpletterSpawner.attributes.add("tutorial",{type:"boolean"}),PickUpletterSpawner.prototype.initialize=function(){this.currentLetter=null,this.spawn()},PickUpletterSpawner.prototype.spawn=function(){let t=PickUpletterManager.instance.getLetter(this.tutorial);t&&(t.reparent(this.entity),t.setLocalPosition(0,0,0),t.setLocalEulerAngles(0,0,0),t.setLocalScale(1,1,1),this.currentLetter=t)},PickUpletterSpawner.prototype.release=function(){this.currentLetter&&(PickUpletterManager.instance.releaseLetter(this.currentLetter.letterId),this.currentLetter=null)};var Fps=pc.createScript("fps");Fps.prototype.initialize=function(){this.app.keyboard.on("keydown",this.onKeyDown,this)},Fps.prototype.onKeyDown=function(t){},Fps.prototype.update=function(t){this.entity.element.text="FPS: "+this.app.stats.frame.fps};var ProgressBarUi=pc.createScript("progressBarUi");ProgressBarUi.attributes.add("fillBar_e",{type:"entity"}),ProgressBarUi.attributes.add("minValue",{type:"number",default:.02}),ProgressBarUi.attributes.add("updateColor",{type:"boolean",default:!1}),ProgressBarUi.attributes.add("colorBar_e",{type:"entity"}),ProgressBarUi.attributes.add("color_empty",{type:"rgb"}),ProgressBarUi.attributes.add("color_full",{type:"rgb"}),ProgressBarUi.prototype.initialize=function(){this.fill=this.fillBar_e.element,this.anchorHolder=this.fill.anchor,this.colorHolder=new pc.Color},ProgressBarUi.prototype.update=function(r){},ProgressBarUi.prototype.setFill=function(r){(r=pc.math.clamp(r,0,1))<this.minValue&&(r=r<.5*this.minValue?0:this.minValue),this.updateColor&&this.colorBar_e&&this.colorBar_e.element&&(this.colorHolder.lerp(this.color_empty,this.color_full,r),this.colorBar_e.element.color=this.colorHolder),this.anchorHolder.z=r,this.fill.anchor=this.anchorHolder};var MenuManager=pc.createScript("menuManager");MenuManager.attributes.add("menuObjects",{type:"entity",array:!0}),MenuManager.attributes.add("gameplayObjects",{type:"entity",array:!0}),MenuManager.attributes.add("ballsMenuContainer",{type:"entity"}),MenuManager.attributes.add("teamsMenuContainer",{type:"entity"}),MenuManager.attributes.add("teamsSelectButton_e",{type:"entity"}),MenuManager.attributes.add("ballsSelectButton_e",{type:"entity"}),MenuManager.attributes.add("ballsSelectButtonImage_e",{type:"entity"}),MenuManager.attributes.add("teamsSelectButtonImage_e",{type:"entity"}),MenuManager.attributes.add("inactiveButtonOpacity",{type:"number"}),MenuManager.prototype.initialize=function(){MenuManager.instance=this,this.currentMode=null,this.inTeamsMenu=!1,this.onTeamSelectClick(),this.teamsSelectButton_e.script.managedButton.on("click",this.onTeamSelectClick,this),this.ballsSelectButton_e.script.managedButton.on("click",this.onBallSelectClick,this)},MenuManager.prototype.postInitialize=function(){this.stopGame(),this.startMenu()},MenuManager.prototype.setGamemode=function(e){"menu"==this.currentMode?this.stopMenu():"game"==this.currentMode&&this.stopGame(),this.currentMode=e,"menu"==this.currentMode?(this.startMenu(),MusicManager.instance.playMusic("music:menu")):"game"==this.currentMode&&(this.startGame(),MusicManager.instance.playMusic("music:game"))},MenuManager.prototype.startGame=function(){for(let e=0;e<this.gameplayObjects.length;e++)this.gameplayObjects[e].enabled=!0},MenuManager.prototype.stopGame=function(){for(let e=0;e<this.gameplayObjects.length;e++)this.gameplayObjects[e].enabled=!1},MenuManager.prototype.startMenu=function(){for(let e=0;e<this.menuObjects.length;e++)this.menuObjects[e].enabled=!0},MenuManager.prototype.stopMenu=function(){for(let e=0;e<this.menuObjects.length;e++)this.menuObjects[e].enabled=!1},MenuManager.prototype.onTeamSelectClick=function(){console.log("onTeamSelectClick"),this.inTeamsMenu||(this.inTeamsMenu=!0,this.ballsMenuContainer.enabled=!1,this.teamsMenuContainer.enabled=!0,this.ballsSelectButtonImage_e.element.opacity=this.inactiveButtonOpacity,this.teamsSelectButtonImage_e.element.opacity=1)},MenuManager.prototype.onBallSelectClick=function(){console.log("onBallSelectClick"),this.inTeamsMenu&&(this.inTeamsMenu=!1,this.ballsMenuContainer.enabled=!0,this.teamsMenuContainer.enabled=!1,this.ballsSelectButtonImage_e.element.opacity=1,this.teamsSelectButtonImage_e.element.opacity=this.inactiveButtonOpacity)};var SoundManager=pc.createScript("soundManager");SoundManager.attributes.add("soundPlayerEntity",{type:"entity"}),SoundManager.attributes.add("musicPlayerEntity",{type:"entity"}),SoundManager.attributes.add("debugLogsEnabled",{type:"boolean"}),SoundManager.flag=!0,SoundManager.prototype.initialize=function(){if(this.soundPlayerEntity&&(this.soundPlayer=this.soundPlayerEntity.sound),this.musicPlayerEntity&&(this.musicPlayer=this.musicPlayerEntity.sound),this.soundPlayer){this.originalVolumes={},this.originalPitches={};let t=this.soundPlayer.slots;for(let i in t)this.originalVolumes[t[i].name]=t[i].volume,this.originalPitches[t[i].name]=t[i].pitch}if(this.musicPlayer){this.originalMusicVolumes={};let t=this.musicPlayer.slots;for(let i in t)this.originalMusicVolumes[t[i].name]=t[i].volume}this.mutedSfx=!1,this.mutedMusic=!1,SoundManager.instance=this},SoundManager.prototype.playSoundTrigger=function(t,i=1,s=0,e=1){let n=SoundTriggersList.instance.getSound(t);null!=n&&this.playSound(n,i,s,e)},SoundManager.prototype.playSound=function(t,i=1,s=0,e=1){this.soundPlayer&&t&&this.soundPlayer.slot(t)&&(s>0?setTimeout(function(){this.soundPlayer.slot(t).volume=this.originalVolumes[t]*i,this.soundPlayer.slot(t).pitch=this.originalPitches[t]*e,this.soundPlayer.play(t)}.bind(this),s):(this.soundPlayer.slot(t).volume=this.originalVolumes[t]*i,this.soundPlayer.slot(t).pitch=this.originalPitches[t]*e,this.soundPlayer.play(t)))},SoundManager.prototype.stopSound=function(t){this.soundPlayer.stop(t)},SoundManager.prototype.setMuteSfx=function(t){this.soundPlayer&&(this.soundPlayer.volume=t?0:1),this.mutedSfx=t},SoundManager.prototype.setMuteMusic=function(t){this.musicPlayer&&(this.musicPlayer.volume=t?0:1),this.mutedMusic=t};var MusicManager=pc.createScript("musicManager");MusicManager.attributes.add("musicPlayerEntity",{type:"entity"}),MusicManager.attributes.add("fadeDuration",{type:"number"}),MusicManager.attributes.add("musicIds",{type:"json",array:!0,schema:[{name:"id",type:"string"},{name:"sound_to_use",type:"string"}]}),MusicManager.prototype.initialize=function(){MusicManager.instance=this,this.currentSoundInstance=null,this.dict={};for(var t=0;t<this.musicIds.length;t++)this.dict[this.musicIds[t].id]=this.musicIds[t].sound_to_use;if(this.musicPlayerEntity&&(this.musicPlayer=this.musicPlayerEntity.sound),this.musicPlayer){this.originalMusicVolumes={};let t=this.musicPlayer.slots;for(let i in t)this.originalMusicVolumes[t[i].name]=t[i].volume}this.currentSongId=""},MusicManager.prototype.playMusic=function(t){let i=this.dict[t];this.musicPlayer&&t&&this.musicPlayer.slot(i)&&(this.currentSongId&&this.fadeOut(this.currentSongId),this.currentSongId=i,this.fadeIn(i))},MusicManager.prototype.fadeOut=function(t){let i={value:1,musicPlayer:this.musicPlayer,audioSlot:this.musicPlayer.slots[t],volume:this.originalMusicVolumes[t]},s=this.app.tween(i).to({value:0},this.fadeDuration,pc.Linear);s.on("update",function(t){this.audioSlot.volume=this.value*this.volume}.bind(i)),s.on("complete",function(){this.musicPlayer.stop(this.audioSlot.name)}.bind(i)),s.start()},MusicManager.prototype.fadeIn=function(t){let i={value:0,audioSlot:this.musicPlayer.slots[t],volume:this.originalMusicVolumes[t]};this.musicPlayer.play(t),this.musicPlayer.slots[t].volume=0;let s=this.app.tween(i).to({value:1},this.fadeDuration,pc.Linear);s.on("update",function(t){this.audioSlot.volume=this.value*this.volume}.bind(i)),s.start()};var SoundTriggersList=pc.createScript("soundTriggersList");SoundTriggersList.attributes.add("soundTriggers",{type:"json",array:!0,schema:[{name:"id",type:"string"},{name:"sound_to_use",type:"string"}]}),SoundTriggersList.prototype.initialize=function(){SoundTriggersList.instance=this,this.dict={};for(var t=0;t<this.soundTriggers.length;t++)this.dict[this.soundTriggers[t].id]=this.soundTriggers[t].sound_to_use},SoundTriggersList.prototype.getSound=function(t){return this.dict.hasOwnProperty(t)?this.dict[t]:null};var BallColorManager=pc.createScript("ballColorManager");BallColorManager.attributes.add("ballButton_t",{type:"asset"}),BallColorManager.attributes.add("ballSelectContainer_e",{type:"entity"}),BallColorManager.attributes.add("ballMaterial_a",{type:"asset"}),BallColorManager.attributes.add("changeBallButton_e",{type:"entity"}),BallColorManager.attributes.add("unlockBallPopup_e",{type:"entity"}),BallColorManager.attributes.add("ballPatterns",{type:"json",array:!0,schema:[{name:"name",type:"string"},{name:"id",type:"string"},{name:"texture",type:"asset"},{name:"tint",type:"rgb",default:[1,1,1]},{name:"uiTint",type:"rgb",default:[1,1,1]},{name:"uiSprite",type:"asset"},{name:"price",type:"number"},{name:"alwaysUnlocked",type:"boolean"}]}),BallColorManager.prototype.initialize=function(){BallColorManager.instance=this,this.saveKey="ball_pattern",this.pattern_unlocked_key="ball_pattern_unlocked",this.ballMaterial=this.ballMaterial_a.resource,this.changeBallButton_e.script.managedButton.on("click",this.onChangeBallPressed,this),this.currentDebugIndex=0,this.app.on("unlock:ball",this.onBallUnlock,this),this.ballPopUp=this.unlockBallPopup_e.script.unlockBallPopUp,this.ballPopUp.on("hiddenComplete",this.onPopUpHidden,this),this.indexedBallPatterns={};for(let t=0;t<this.ballPatterns.length;t++){let l=this.ballPatterns[t];l.index=t,this.indexedBallPatterns[l.id]=l}this.colorIndex=0,this.ballButtonScripts=[];for(let t=0;t<this.ballPatterns.length;t++){let l=this.ballButton_t.resource.instantiate(),e=l.script.ballSelectButton,a=this.ballPatterns[t];e.setBall(a,t),e.setSelected(!1),e.setLocked(!this.isBallUnlocked(t)),this.ballButtonScripts.push(e),this.ballSelectContainer_e.addChild(l)}this.app.on("color:ball_select",this.onBallSelect,this),this.ball_i=-1,this.currentSelectedBall=-1;let t=Avix_Save.loadInt(this.saveKey,0);this.onBallSelect(t)},BallColorManager.prototype.update=function(t){InputManager.instance.wasPressed(pc.KEY_B)&&this.onChangeBallPressed()},BallColorManager.prototype.onChangeBallPressed=function(){this.currentDebugIndex++,this.currentDebugIndex%=this.ballPatterns.length,this.setColorIndex(this.currentDebugIndex)},BallColorManager.prototype.setColorIndex=function(t){let l=this.ballPatterns[t%this.ballPatterns.length];this.setColor(l)},BallColorManager.prototype.setColor=function(t){this.ballMaterial.diffuseMap=t.texture.resource,this.ballMaterial.diffuse.set(t.tint.r,t.tint.g,t.tint.b),this.ballMaterial.update()},BallColorManager.prototype.onBallSelect=function(t){this.selectBallVisuals(t),this.isBallUnlocked(t)||!this.ballButtonScripts[t].locked?(this.ball_i=t,Avix_Save.saveInt(this.saveKey,this.ball_i)):(this.ballPopUp.setBall(this.ballPatterns[t],t),this.ballPopUp.setPrice(this.ballPatterns[t].price),this.ballPopUp.show())},BallColorManager.prototype.selectBallVisuals=function(t){this.currentSelectedBall>=0&&this.currentSelectedBall<this.ballButtonScripts.length&&null!=this.ballButtonScripts[this.currentSelectedBall]&&this.ballButtonScripts[this.currentSelectedBall].setSelected(!1),this.setColorIndex(t),this.ballButtonScripts[t].setSelected(!0),this.currentSelectedBall=t},BallColorManager.prototype.isBallUnlocked=function(t){return this.ballPatterns[t].alwaysUnlocked||Avix_Save.loadBoolean(this.pattern_unlocked_key+t,!1)},BallColorManager.prototype.onBallUnlock=function(t){Avix_Save.saveBoolean(this.pattern_unlocked_key+t,!0),"menu"==MenuManager.instance.currentMode?this.ballButtonScripts[t].unlockAnimation():this.ballButtonScripts[t].setLocked(!1),this.onBallSelect(t)},BallColorManager.prototype.onPopUpHidden=function(){this.ball_i!=this.currentSelectedBall&&this.selectBallVisuals(this.ball_i)},BallColorManager.prototype.getRandomLockedBall=function(){let t=[];for(let l=0;l<this.ballPatterns.length;l++)this.isBallUnlocked(l)||t.push(this.ballPatterns[l]);if(t.length>0){return t[Math.floor(Math.random()*t.length)]}return null};var ThrowableObstacle=pc.createScript("throwableObstacle");ThrowableObstacle.attributes.add("overrideRange",{type:"number"}),ThrowableObstacle.attributes.add("overrideSpin",{type:"boolean",default:!1}),ThrowableObstacle.attributes.add("overrideSpinVector",{type:"vec3"}),ThrowableObstacle.attributes.add("randomizeSpinAxes",{type:"json",schema:[{name:"x",type:"boolean"},{name:"y",type:"boolean"},{name:"z",type:"boolean"}]}),ThrowableObstacle.prototype.initialize=function(){this.vec2Helper=new pc.Vec2,this.vec2Helper2=new pc.Vec2,this.vec3Helper=new pc.Vec3,this.vec3Helper2=new pc.Vec3,this.vec3HelperDir=new pc.Vec3,this.app.on("player:obstacleCol",this.onPlayerCol,this),this.entity.on("destroy",(function(e){this.app.off("player:obstacleCol",this.onPlayerCol,this)}),this)},ThrowableObstacle.prototype.update=function(e){},ThrowableObstacle.prototype.onPlayerCol=function(e,t){let a=PlayerController.instance.hasTurbo||PlayerController.instanceremaningTurboGracetime>0;this.vec2Helper.set(e,t),this.vec3Helper.copy(this.entity.getPosition());let r=Math.abs(this.vec3Helper.x-e),n=Math.abs(this.vec3Helper.z-t),i=this.overrideRange>0?this.overrideRange:ObstacleManager.instance.obstacleThrowRange;if(r<i&&n<i){this.vec2Helper2.set(this.vec3Helper.x,this.vec3Helper.z);let e=this.vec2Helper2.distance(this.vec2Helper);if(e<i){let t=1-e/i;this.vec3HelperDir.copy(a?ObstacleManager.instance.obstacleThrowDirTurbo:ObstacleManager.instance.obstacleThrowDir),this.vec2Helper2.x>this.vec2Helper.x&&(this.vec3HelperDir.x*=-1),this.completeThrow(t,a?ObstacleManager.instance.obstacleThrowForceTurbo:ObstacleManager.instance.obstacleThrowForce,this.vec3HelperDir)}}},ThrowableObstacle.prototype.completeThrow=function(e,t,a){let r=t*e,n=1-ObstacleManager.instance.obstacleThrowRand+Math.random()*ObstacleManager.instance.obstacleThrowRand;this.vec3Helper.set(a.x*n*e,(a.y*ObstacleManager.instance.obstacleThrowRand*Math.random()+a.y*(1-ObstacleManager.instance.obstacleThrowRand))*e,(a.z*ObstacleManager.instance.obstacleThrowRand*Math.random()+a.z*(1-ObstacleManager.instance.obstacleThrowRand))*e),this.vec3Helper.normalize(),this.vec3Helper.mulScalar(r*(.9+.2*Math.random())),this.overrideSpin?this.vec3Helper2.set(this.overrideSpinVector.x*this.getRandomSpinAxis()*(this.randomizeSpinAxes.x?this.getRandomSign():1),this.overrideSpinVector.y*this.getRandomSpinAxis()*(this.randomizeSpinAxes.y?this.getRandomSign():1),this.overrideSpinVector.z*this.getRandomSpinAxis()*(this.randomizeSpinAxes.z?this.getRandomSign():1)):this.vec3Helper2.set(this.getRandomSpinAxis(),0,0),this.entity.script.activatablePhysics.throw(this.vec3Helper,this.vec3Helper2)},ThrowableObstacle.prototype.getRandomSpinAxis=function(){return(ObstacleManager.instance.obstacleThrowSpin*(1-ObstacleManager.instance.obstacleThrowRand)+Math.random()*ObstacleManager.instance.obstacleThrowSpin*ObstacleManager.instance.obstacleThrowRand)*pc.math.DEG_TO_RAD},ThrowableObstacle.prototype.getRandomSign=function(){return Math.random()<.5?-1:1};var BallSelectButton=pc.createScript("ballSelectButton");BallSelectButton.attributes.add("ballSprite_e",{type:"entity"}),BallSelectButton.attributes.add("activeIndicator_e",{type:"entity"}),BallSelectButton.attributes.add("locked_indicator_e",{type:"entity"}),BallSelectButton.attributes.add("ballName_e",{type:"entity"}),BallSelectButton.attributes.add("unlockImage_e",{type:"entity"}),BallSelectButton.attributes.add("unlockAnimationTime",{type:"number"}),BallSelectButton.prototype.initialize=function(){this.entity.script&&this.entity.script.has("managedButton")&&this.entity.script.managedButton.on("click",this.onClick,this),this.locked=!0},BallSelectButton.prototype.onClick=function(t){this.app.fire("color:ball_select",this.ballIndex)},BallSelectButton.prototype.setSelected=function(t){this.activeIndicator_e&&(this.activeIndicator_e.enabled=t)},BallSelectButton.prototype.setLocked=function(t){this.locked_indicator_e&&(this.locked_indicator_e.enabled=t,this.locked=t)},BallSelectButton.prototype.setBall=function(t,e){this.unlockImage_e&&(this.unlockImage_e.enabled=!1),t.uiSprite?this.ballSprite_e.element.sprite=t.uiSprite.resource:this.ballSprite_e.element.texture=t.texture.resource,this.ballName_e&&(this.ballName_e.element.text=t.name),this.ballIndex=e},BallSelectButton.prototype.unlockAnimation=function(t=null){if(this.setLocked(!1),!this.unlockImage_e)return;this.unlockImage_e.enabled=!0,this.unlockImage_e.element.opacity=1;let e={value:1};this.tweenOpacity=this.app.tween(e).to({value:0},this.unlockAnimationTime,pc.QuinticIn),this.tweenOpacity.on("update",function(t){this.unlockImage_e.element.opacity=e.value}.bind(this)),this.tweenOpacity.on("complete",function(){this.unlockImage_e.enabled=!1,null!=t&&t()}.bind(this)),this.tweenOpacity.start()};var Avix_Save=pc.createScript("avix_Save");Avix_Save.loadBoolean=function(t,a){return Avix_Save.supports_local_storage()&&localStorage.hasOwnProperty(t)?"true"==localStorage.getItem(t):a},Avix_Save.saveBoolean=function(t,a){Avix_Save.supports_local_storage()&&window.localStorage.setItem(t,a?"true":"false")},Avix_Save.loadString=function(t,a){return Avix_Save.supports_local_storage()&&localStorage.hasOwnProperty(t)?localStorage.getItem(t):a},Avix_Save.saveString=function(t,a){return!!Avix_Save.supports_local_storage()&&(window.localStorage.setItem(t,a),!0)},Avix_Save.loadInt=function(t,a){if(Avix_Save.supports_local_storage()){if(localStorage.hasOwnProperty(t)){let e=parseInt(localStorage.getItem(t));return isNaN(e)?a:e}return a}return a},Avix_Save.saveInt=function(t,a){return!!Avix_Save.supports_local_storage()&&(window.localStorage.setItem(t,a.toString()),!0)},Avix_Save.loadFloat=function(t,a){if(Avix_Save.supports_local_storage()){if(localStorage.hasOwnProperty(t)){let e=parseFloat(localStorage.getItem(t));return isNaN(e)?a:e}return a}return a},Avix_Save.saveFloat=function(t,a){return!!Avix_Save.supports_local_storage()&&(window.localStorage.setItem(t,a.toString()),!0)},Avix_Save.supports_local_storage=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}};var UnlockBallPopUp=pc.createScript("unlockBallPopUp");UnlockBallPopUp.attributes.add("noThanksButton_e",{type:"entity"}),UnlockBallPopUp.attributes.add("container_e",{type:"entity"}),UnlockBallPopUp.attributes.add("ballSelect_e",{type:"entity"}),UnlockBallPopUp.attributes.add("unlockWithVideoContainer_e",{type:"entity"}),UnlockBallPopUp.attributes.add("unlockButtonVideo_e",{type:"entity"}),UnlockBallPopUp.attributes.add("unlockWithCoinsContainer_e",{type:"entity"}),UnlockBallPopUp.attributes.add("unlockButtonCoins_e",{type:"entity"}),UnlockBallPopUp.attributes.add("coinsPrice_e",{type:"entity"}),UnlockBallPopUp.attributes.add("popUpAnimationTime",{type:"number"}),UnlockBallPopUp.prototype.initialize=function(){UnlockBallPopUp.instance=this,this.unlockButtonVideo_e.script.managedButton.on("click",this.unlockWithVideo,this),this.unlockButtonCoins_e.script.managedButton.on("click",this.unlockWithCoins,this),this.noThanksButton_e.script.managedButton.on("click",this.noThanks,this),this.counter=0,this.leaving=!1,this.unlocking=!1,this.container_e.enabled=!1,this.locked=!0,this.hide(!0),this.currentBallIndex=-1},UnlockBallPopUp.prototype.setBall=function(t,e){this.currentBallIndex=e,this.ballSelect_e.script.ballSelectButton.setBall(t,-1)},UnlockBallPopUp.prototype.setPrice=function(t){this.unlockWithCoinsContainer_e.enabled=t>=0,this.unlockWithVideoContainer_e=t<0,this.coinsPrice_e.element.text=t.toString(),this.currentPrice=t},UnlockBallPopUp.prototype.unlockWithVideo=function(){this.locked||(this.locked=!0,clearInterval(this.timer),this.unlocking=!0,AdsManager.instance.showRewardedBreak(function(t){this.locked=!1,console.log("unlocked with video callback",t),t?(this.app.fire("unlock:ball",this.currentBallIndex),this.hide(!0)):this.hide(!0)}.bind(this)))},UnlockBallPopUp.prototype.unlockWithCoins=function(){this.locked||LevelManager.instance.current_coins>=this.currentPrice&&(LevelManager.instance.setCoinCount(LevelManager.instance.current_coins-this.currentPrice),this.app.fire("unlock:ball",this.currentBallIndex),this.hide())},UnlockBallPopUp.prototype.noThanks=function(){this.hide()},UnlockBallPopUp.prototype.show=function(){InputManager.instance.addInputBlocker("ballPopUp"),this.container_e.enabled=!0,this.unlocking=!1,this.leaving=!1,this.container_e.setLocalScale(0,0,0),this.currentTween&&this.currentTween.stop(),this.currentTween=this.container_e.tween(this.container_e.getLocalScale()).to({x:1,y:1,z:1},this.popUpAnimationTime,pc.BackOut).start(),this.locked=!1},UnlockBallPopUp.prototype.hide=function(t){this.locked||(this.locked=!0,this.currentTween&&this.currentTween.stop(),this.leaving=!0,t?(this.container_e.setLocalScale(0,0,0),this.container_e.enabled=!1,this.fire("hiddenComplete"),InputManager.instance.removeInputBlocker("ballPopUp")):(this.currentTween=this.container_e.tween(this.container_e.getLocalScale()).to({x:0,y:0,z:0},this.popUpAnimationTime,pc.BackIn).start(),this.currentTween.on("complete",function(){InputManager.instance.removeInputBlocker("ballPopUp"),this.fire("hiddenComplete"),this.container_e.enabled=!1}.bind(this))))};var ManagedButton=pc.createScript("managedButton");ManagedButton.attributes.add("ignoreInputManager",{type:"boolean",default:!1}),ManagedButton.attributes.add("clickedSound",{type:"string"}),ManagedButton.prototype.initialize=function(){this.entity.button&&(this.entity.button.on("click",this.onClick,this),this.entity.button.on("pressedstart",this.onPressedStart,this),this.entity.button.on("pressedend",this.onPressedEnd,this))},ManagedButton.prototype.onClick=function(t){(InputManager.instance.isInputEnabled()||this.ignoreInputManager)&&(this.fire("click",t),this.clickedSound&&SoundManager.instance.playSoundTrigger(this.clickedSound))},ManagedButton.prototype.onPressedStart=function(){(InputManager.instance.isInputEnabled()||this.ignoreInputManager)&&this.fire("pressedstart")},ManagedButton.prototype.onPressedEnd=function(){(InputManager.instance.isInputEnabled()||this.ignoreInputManager)&&this.fire("pressedend")};var InputManager=pc.createScript("inputManager");InputManager.prototype.initialize=function(){InputManager.instance=this,this.currentInputBlockers=[],this.cachedInputEnabled=!0},InputManager.prototype.addInputBlocker=function(t){this.currentInputBlockers.includes(t)||(this.currentInputBlockers.push(t),this.cachedInputEnabled=!1)},InputManager.prototype.removeInputBlocker=function(t){let e=this.currentInputBlockers.indexOf(t);e>-1&&(this.currentInputBlockers.splice(e,1),this.cachedInputEnabled=0==this.currentInputBlockers.length)},InputManager.prototype.isInputEnabled=function(){return this.cachedInputEnabled},InputManager.prototype.wasPressed=function(t){return this.isInputEnabled()&&this.app.keyboard.wasPressed(t)},InputManager.prototype.isPressed=function(t){return this.isInputEnabled()&&this.app.keyboard.isPressed(t)},InputManager.prototype.wasReleased=function(t){return this.isInputEnabled()&&this.app.keyboard.wasReleased(t)};var UnlockPlayerColorPopUp=pc.createScript("unlockPlayerColorPopUp");UnlockPlayerColorPopUp.attributes.add("unlockButton_e",{type:"entity"}),UnlockPlayerColorPopUp.attributes.add("noThanksButton_e",{type:"entity"}),UnlockPlayerColorPopUp.attributes.add("container_e",{type:"entity"}),UnlockPlayerColorPopUp.attributes.add("teamSelect_e",{type:"entity"}),UnlockPlayerColorPopUp.attributes.add("popUpAnimationTime",{type:"number"}),UnlockPlayerColorPopUp.attributes.add("adFailedMessage",{type:"string"}),UnlockPlayerColorPopUp.attributes.add("popUpOpenSound",{type:"string"}),UnlockPlayerColorPopUp.prototype.initialize=function(){UnlockPlayerColorPopUp.instance=this,this.unlockButton_e.script.managedButton.on("click",this.unlock,this),this.noThanksButton_e.script.managedButton.on("click",this.noThanks,this),this.counter=0,this.leaving=!1,this.unlocking=!1,this.container_e.enabled=!1,this.locked=!0,this.hide(!0),this.currentTeamIndex=-1,this.unlockWithVideo=!0},UnlockPlayerColorPopUp.prototype.setTeam=function(e,t){this.currentTeamIndex=t,this.teamSelect_e.script.teamSelectButton.setTeam(e,-1)},UnlockPlayerColorPopUp.prototype.unlock=function(){this.locked||(this.locked=!0,clearInterval(this.timer),this.unlocking=!0,this.unlockWithVideo?AdsManager.instance.showRewardedBreak(function(e){this.locked=!1,e?(this.app.fire("unlock:team",this.currentTeamIndex),this.hide(!0)):(this.hide(!0),TransitionManager.instance.showMessagePopUp(this.adFailedMessage))}.bind(this)):(this.app.fire("unlock:teamCoins",this.currentTeamIndex),this.locked=!1,this.hide()))},UnlockPlayerColorPopUp.prototype.noThanks=function(){this.hide()},UnlockPlayerColorPopUp.prototype.update=function(){this.container_e.enabled&&!this.locked&&(this.app.keyboard.wasPressed(pc.KEY_ESCAPE)?this.noThanks():this.app.keyboard.wasPressed(pc.KEY_ENTER)&&this.unlock())},UnlockPlayerColorPopUp.prototype.show=function(){SoundManager.instance.playSoundTrigger(this.popUpOpenSound),InputManager.instance.addInputBlocker("teamPopUp"),this.container_e.enabled=!0,this.unlocking=!1,this.leaving=!1,this.container_e.setLocalScale(0,0,0),this.locked=!0,this.currentTween&&this.currentTween.stop(),this.currentTween=this.container_e.tween(this.container_e.getLocalScale()).to({x:1,y:1,z:1},this.popUpAnimationTime,pc.BackOut).start(),this.currentTween.on("complete",function(){this.locked=!1}.bind(this))},UnlockPlayerColorPopUp.prototype.hide=function(e){this.locked||(this.locked=!0,this.currentTween&&this.currentTween.stop(),this.leaving=!0,e?(this.container_e.setLocalScale(0,0,0),this.container_e.enabled=!1,InputManager.instance.removeInputBlocker("teamPopUp"),this.fire("hiddenComplete")):(this.currentTween=this.container_e.tween(this.container_e.getLocalScale()).to({x:0,y:0,z:0},this.popUpAnimationTime,pc.BackIn).start(),this.currentTween.on("complete",function(){InputManager.instance.removeInputBlocker("teamPopUp"),this.fire("hiddenComplete"),this.container_e.enabled=!1}.bind(this))))};var MuteButton=pc.createScript("muteButton");MuteButton.attributes.add("unmutedImage_e",{type:"entity"}),MuteButton.attributes.add("mutedImage_e",{type:"entity"}),MuteButton.prototype.initialize=function(){MuteButton.instance=this,this.saveKey="muteButtonMuted",this.muted=Avix_Save.loadBoolean(this.saveKey,!1),this.entity.script.managedButton.on("click",this.onButtonClicked,this),this.muted?this.mute():this.unMute()},MuteButton.prototype.onButtonClicked=function(){this.muted=!this.muted,Avix_Save.saveBoolean(this.saveKey,this.muted),this.muted?this.mute():this.unMute()},MuteButton.prototype.mute=function(){this.unmutedImage_e.enabled=!1,this.mutedImage_e.enabled=!0,this.app.systems.sound.volume=0},MuteButton.prototype.unMute=function(){this.unmutedImage_e.enabled=!0,this.mutedImage_e.enabled=!1,this.app.systems.sound.volume=1};var TournamentManager=pc.createScript("tournamentManager");TournamentManager.attributes.add("ownTeamTemplate_t",{type:"asset"}),TournamentManager.attributes.add("opponentTemplate_t",{type:"asset"}),TournamentManager.attributes.add("emptyTemplate_t",{type:"asset"}),TournamentManager.attributes.add("ownSideContainer_e",{type:"entity"}),TournamentManager.attributes.add("opponentsTeamSideContainer_e",{type:"entity"}),TournamentManager.attributes.add("popoUp_e",{type:"entity"}),TournamentManager.attributes.add("playButton_e",{type:"entity"}),TournamentManager.attributes.add("exitButton_e",{type:"entity"}),TournamentManager.attributes.add("exitButtonChampion_e",{type:"entity"}),TournamentManager.attributes.add("tournamentContainer_e",{type:"entity"}),TournamentManager.attributes.add("championContainer_e",{type:"entity"}),TournamentManager.attributes.add("championFlagcontainer_e",{type:"entity"}),TournamentManager.attributes.add("tournamentLength",{type:"number"}),TournamentManager.attributes.add("material_1_a",{type:"asset",assetType:"material"}),TournamentManager.attributes.add("material_2_a",{type:"asset",assetType:"material"}),TournamentManager.prototype.initialize=function(){TournamentManager.instance=this,this.playButton_e.script.managedButton.on("click",this.onPlayClicked,this),this.exitButton_e.script.managedButton.on("click",this.onExitClicked,this),this.exitButtonChampion_e.script.managedButton.on("click",this.onExitClickedChampion,this),this.popoUp_e.script.genericPopUp.hide(!0),this.material_1=this.material_1_a.resource,this.material_2=this.material_2_a.resource},TournamentManager.prototype.update=function(t){(this.tournamentContainer_e.enabled||this.championContainer_e.enabled)&&this.app.keyboard.wasPressed(pc.KEY_ESCAPE)&&this.onExitClicked(),this.tournamentContainer_e.enabled&&(this.app.keyboard.wasPressed(pc.KEY_SPACE)||this.app.keyboard.wasPressed(pc.KEY_ENTER))&&this.onPlayClicked(),this.championContainer_e.enabled&&(this.app.keyboard.wasPressed(pc.KEY_SPACE)||this.app.keyboard.wasPressed(pc.KEY_ENTER)||this.app.keyboard.wasPressed(pc.KEY_ESCAPE))&&this.onExitClickedChampion()},TournamentManager.prototype.onPlayClicked=function(){this.popoUp_e.script.genericPopUp.locked||this.popoUp_e.script.genericPopUp.leaving||(this.fire("tournament:play"),this.popoUp_e.script.genericPopUp.hide())},TournamentManager.prototype.onExitClicked=function(){this.popoUp_e.script.genericPopUp.locked||this.popoUp_e.script.genericPopUp.leaving||(0==LevelManager.instance.current_level?(this.fire("tournament:exit"),this.popoUp_e.script.genericPopUp.hide()):this.popoUp_e.script.genericPopUp.hide(!1,this.checkExit.bind(this)))},TournamentManager.prototype.checkExit=function(){TransitionManager.instance.showConfirmationPopUp("Do you want to exit?",this.onExitConfirmCallback.bind(this))},TournamentManager.prototype.onExitConfirmCallback=function(t){console.log("exitConfirmation ",t),t?this.fire("tournament:exit"):this.popoUp_e.script.genericPopUp.show()},TournamentManager.prototype.onExitClickedChampion=function(){this.popoUp_e.script.genericPopUp.locked||this.popoUp_e.script.genericPopUp.leaving||(this.fire("tournament:exit"),this.popoUp_e.script.genericPopUp.hide())},TournamentManager.prototype.show=function(){this.popoUp_e.script.genericPopUp.show()},TournamentManager.prototype.createNewTournament=function(t){this.ownTeam=t,this.tour=this.getTournament(this.ownTeam,this.tournamentLength),this.currentStep=0,this.updateTournamentStep(this.currentStep)},TournamentManager.prototype.updateTournamentStep=function(t){this.currentStep=t,this.updateInterface(this.tour,this.ownTeam,t)},TournamentManager.prototype.updateInterface=function(t,e,n){if(this.clearEntity(this.ownSideContainer_e),this.clearEntity(this.opponentsTeamSideContainer_e),n<t.length){this.tournamentContainer_e.enabled=!0,this.championContainer_e.enabled=!1;for(let e=t.length-1;e>=0;e--){let n=this.opponentTemplate_t.resource.instantiate();n.script.tournamentElement.setTeam(t[e]),this.opponentsTeamSideContainer_e.addChild(n)}for(let a=t.length-1;a>=0;a--)if(a==n){let t=this.ownTeamTemplate_t.resource.instantiate();t.script.tournamentElement.setTeam(e),this.ownSideContainer_e.addChild(t)}else{let t=this.emptyTemplate_t.resource.instantiate();this.ownSideContainer_e.addChild(t)}}else this.tournamentContainer_e.enabled=!1,this.championContainer_e.enabled=!0,this.championFlagcontainer_e.script.tournamentElement.setTeam(e)},TournamentManager.prototype.updateMaterialsColor=function(t=0){let e=this.tour[t];this.updateMaterialsColorTeam(e)},TournamentManager.prototype.updateMaterialsColorTeam=function(t){let e=PlayerColorManager.instance.playerColors[t];this.material_1.diffuse.set(e.opponentColor1.r,e.opponentColor1.g,e.opponentColor1.b),this.material_1.update(),this.material_2.diffuse.set(e.opponentColor2.r,e.opponentColor2.g,e.opponentColor2.b),this.material_2.update()},TournamentManager.prototype.clearEntity=function(t){for(;t.children.length>0;)t.children[t.children.length-1].destroy()},TournamentManager.prototype.getTournament=function(t,e){let n=PlayerColorManager.instance.playerColors,a=[];for(let e=0;e<n.length;e++)e!==t&&a.push(e);return a.sort((()=>Math.random()-.5)),a=a.slice(0,e),a};var TournamentElement=pc.createScript("tournamentElement");TournamentElement.attributes.add("teamName_e",{type:"entity"}),TournamentElement.attributes.add("teamFlag_e",{type:"entity"}),TournamentElement.prototype.initialize=function(){},TournamentElement.prototype.update=function(e){},TournamentElement.prototype.setTeam=function(e){this.currentTeam=e;let t=PlayerColorManager.instance.playerColors[e];this.teamName_e.element.text=this.capitalize(t.country),this.teamFlag_e.element.sprite=t.flagSprite.resource},TournamentElement.prototype.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},TournamentElement.prototype.capitalize=function(e){for(var t=e.toLowerCase().split(" "),n=0;n<t.length;n++)t[n]=t[n].charAt(0).toUpperCase()+t[n].substring(1);return t.join(" ")};var GenericPopUp=pc.createScript("genericPopUp");GenericPopUp.attributes.add("container_e",{type:"entity"}),GenericPopUp.attributes.add("popUpAnimationTime",{type:"number"}),GenericPopUp.attributes.add("popUpOpenSound",{type:"string"}),GenericPopUp.prototype.initialize=function(){this.currentCallback=null},GenericPopUp.prototype.show=function(e=null){SoundManager.instance.playSoundTrigger(this.popUpOpenSound),this.container_e.enabled=!0,this.currentCallback=e,this.leaving=!1,this.container_e.setLocalScale(0,0,0),this.currentTween&&this.currentTween.stop(),this.currentTween=this.container_e.tween(this.container_e.getLocalScale()).to({x:1,y:1,z:1},this.popUpAnimationTime,pc.BackOut).start(),this.locked=!1},GenericPopUp.prototype.hide=function(e,t=null){this.locked||(this.locked=!0,this.currentTween&&this.currentTween.stop(),this.leaving=!0,e?(this.container_e.setLocalScale(0,0,0),this.container_e.enabled=!1,null!=t&&t()):(this.currentTween=this.container_e.tween(this.container_e.getLocalScale()).to({x:0,y:0,z:0},this.popUpAnimationTime,pc.BackIn).start(),this.currentTween.on("complete",function(){this.container_e.enabled=!1,this.currentCallback&&this.currentCallback(),null!=t&&t()}.bind(this))))};var DuplicatePopUp=pc.createScript("duplicatePopUp");DuplicatePopUp.attributes.add("acceptButton_e",{type:"entity"}),DuplicatePopUp.attributes.add("noThanksButton_e",{type:"entity"}),DuplicatePopUp.attributes.add("counterText_e",{type:"entity"}),DuplicatePopUp.attributes.add("titleText_e",{type:"entity"}),DuplicatePopUp.attributes.add("container_e",{type:"entity"}),DuplicatePopUp.attributes.add("timeLimit",{type:"number"}),DuplicatePopUp.attributes.add("popUpAnimationTime",{type:"number"}),DuplicatePopUp.attributes.add("adFailedMessage",{type:"string"}),DuplicatePopUp.attributes.add("popUpOpenSound",{type:"string"}),DuplicatePopUp.attributes.add("noThanksSound",{type:"string"}),DuplicatePopUp.attributes.add("countdownSound",{type:"string"}),DuplicatePopUp.prototype.initialize=function(){DuplicatePopUp.instance=this,this.coinsToDuplicate=0,this.acceptButton_e.script.managedButton.on("click",this.accept,this),this.noThanksButton_e.script.managedButton.on("click",this.noThanks,this),this.counter=0,this.counterText=this.counterText_e.element,this.accepting=!1,this.leaving=!1,this.container_e.enabled=!1,this.locked=!0,this.originalTitle=this.titleText_e.element.text},DuplicatePopUp.prototype.update=function(){this.container_e.enabled&&!this.locked&&(InputManager.instance.wasPressed(pc.KEY_ESCAPE)?this.noThanks():InputManager.instance.wasPressed(pc.KEY_ENTER)&&this.accept())},DuplicatePopUp.prototype.accept=function(){this.locked||(this.locked=!0,clearInterval(this.timer),this.accepting=!0,AdsManager.instance.showRewardedBreak(function(t){this.locked=!1,t?(this.app.fire("duplicate:accept"),this.hide(!0)):(this.hide(!0),TransitionManager.instance.showMessagePopUp(this.adFailedMessage,function(){this.app.fire("duplicate:noThanks")}.bind(this)))}.bind(this)))},DuplicatePopUp.prototype.noThanks=function(){this.locked||(this.hide(),SoundManager.instance.playSoundTrigger(this.noThanksSound),this.app.fire("duplicate:noThanks"))},DuplicatePopUp.prototype.show=function(){this.container_e.enabled=!0,this.titleText_e.element.text=this.originalTitle.replace("{coins}",this.coinsToDuplicate),this.accepting=!1,this.leaving=!1,this.counter=this.timeLimit,this.counterText.text=this.counter.toString(),this.timer=setInterval(this.updateCounter.bind(this),1e3),this.container_e.setLocalScale(0,0,0),this.currentTween&&this.currentTween.stop(),SoundManager.instance.playSoundTrigger(this.popUpOpenSound),this.currentTween=this.container_e.tween(this.container_e.getLocalScale()).to({x:1,y:1,z:1},this.popUpAnimationTime,pc.BackOut).start(),this.locked=!1},DuplicatePopUp.prototype.hide=function(t){this.locked||(this.locked=!0,this.currentTween&&this.currentTween.stop(),this.leaving=!0,clearInterval(this.timer),t?(this.container_e.setLocalScale(0,0,0),this.container_e.enabled=!1):(this.currentTween=this.container_e.tween(this.container_e.getLocalScale()).to({x:0,y:0,z:0},this.popUpAnimationTime,pc.BackIn).start(),this.currentTween.on("complete",function(){this.container_e.enabled=!1}.bind(this))))},DuplicatePopUp.prototype.updateCounter=function(){this.locked||(this.counter--,this.counterText.text=this.counter.toString(),SoundManager.instance.playSoundTrigger(this.countdownSound),this.counterText_e.setLocalScale(1.5,1.5,1.5),this.counterText_e.tween(this.counterText_e.getLocalScale()).to({x:1,y:1,z:1},.2,pc.BackInOut).start(),this.counter<=0&&!this.accepting&&!this.leaving&&(clearInterval(this.timer),this.noThanks()))};var BallMovement=pc.createScript("ballMovement");BallMovement.attributes.add("motionCurve",{type:"curve"}),BallMovement.attributes.add("motionSpeed",{type:"number"}),BallMovement.attributes.add("motionVector",{type:"vec3"}),BallMovement.attributes.add("turboMultiplier",{type:"number"}),BallMovement.attributes.add("jumpCurve",{type:"curve"}),BallMovement.attributes.add("jumpHeight",{type:"number"}),BallMovement.attributes.add("jumpDistance",{type:"number"}),BallMovement.prototype.initialize=function(){BallMovement.instance=this,this.current_distance=0,this.currentMotion=new pc.Vec3},BallMovement.prototype.move=function(t,e){this.jumping&&(this.currentJumpDistance+=t*(e?this.turboMultiplier:1),this.currentJumpDistance>this.jumpDistance&&(this.jumping=!1)),this.setDistance(this.current_distance+t*this.motionSpeed*(e?this.turboMultiplier:1))},BallMovement.prototype.setDistance=function(t){0==t&&(this.jumping=!1,this.currentJumpDistance=0),this.current_distance=t,this.current_distance%=1,this.currentMotion.copy(this.motionVector),this.currentMotion.mulScalar(this.motionCurve.value(this.current_distance)),this.entity.setLocalPosition(this.currentMotion.x,this.currentMotion.y+this.getCurrentHeight(),this.currentMotion.z)},BallMovement.prototype.jump=function(){this.jumping=!0,this.currentJumpDistance=0},BallMovement.prototype.getCurrentHeight=function(){if(this.jumping){let t=this.currentJumpDistance/this.jumpDistance;return this.jumpCurve.value(t)*this.jumpHeight}return 0};var TutorialManager=pc.createScript("tutorialManager");TutorialManager.attributes.add("slowedTimescale",{type:"number",default:.05}),TutorialManager.attributes.add("leftSign",{type:"entity"}),TutorialManager.attributes.add("rightSign",{type:"entity"}),TutorialManager.attributes.add("upSign",{type:"entity"}),TutorialManager.attributes.add("downSign",{type:"entity"}),TutorialManager.attributes.add("turboSign",{type:"entity"}),TutorialManager.prototype.initialize=function(){this.app.on("tutorial:prepareJump",this.handlePrepareJump,this),this.app.on("tutorial:prepareSlide",this.handlePrepareSlide,this),this.app.on("tutorial:prepareLeft",this.handlePrepareLeft,this),this.app.on("tutorial:prepareRight",this.handlePrepareRight,this),this.app.on("tutorial:prepareTurbo",this.handlePrepareTurbo,this),this.app.on("player:dead",this.handlePlayerDead,this),this.leftSign.enabled=!1,this.leftSign.script.entitySelectBasedOntouch.updateState(),this.rightSign.enabled=!1,this.rightSign.script.entitySelectBasedOntouch.updateState(),this.upSign.enabled=!1,this.upSign.script.entitySelectBasedOntouch.updateState(),this.downSign.enabled=!1,this.downSign.script.entitySelectBasedOntouch.updateState(),this.turboSign.enabled=!1,this.turboSign.script.entitySelectBasedOntouch.updateState()},TutorialManager.prototype.handlePlayerDead=function(){this.reset()},TutorialManager.prototype.update=function(t){this.waitingForJump&&PlayerInputManager.instance.getJumpPressed()&&(this.upSign.enabled=!1,this.waitingForJump=!1,this.waitingForLock=!0,this.app.timeScale=1),this.waitingForSlide&&PlayerInputManager.instance.getSlidePressed()&&(this.downSign.enabled=!1,this.waitingForSlide=!1,this.waitingForLock=!0,this.app.timeScale=1),this.waitingForLeft&&PlayerInputManager.instance.getLeftPressed()&&(this.leftSign.enabled=!1,this.waitingForLeft=!1,this.waitingForLock=!0,this.app.timeScale=1),this.waitingForRight&&PlayerInputManager.instance.getRightPressed()&&(this.rightSign.enabled=!1,this.waitingForRight=!1,this.waitingForLock=!0,this.app.timeScale=1),this.waitingForTurbo&&PlayerInputManager.instance.getTurboPressed()&&(this.turboSign.enabled=!1,this.waitingForTurbo=!1,this.waitingForLock=!0,this.app.timeScale=1)},TutorialManager.prototype.postUpdate=function(t){this.waitingForLock&&(this.waitingForLock=!1,PlayerInputManager.instance.lockAll())},TutorialManager.prototype.handlePrepareJump=function(){this.upSign.enabled=!0,PlayerInputManager.instance.lockAll(),PlayerInputManager.instance.jumpLocked=!1,this.app.timeScale=this.slowedTimescale,this.waitingForJump=!0},TutorialManager.prototype.handlePrepareSlide=function(){this.downSign.enabled=!0,PlayerInputManager.instance.lockAll(),PlayerInputManager.instance.slideLocked=!1,this.app.timeScale=this.slowedTimescale,this.waitingForSlide=!0},TutorialManager.prototype.handlePrepareLeft=function(){this.leftSign.enabled=!0,PlayerInputManager.instance.lockAll(),PlayerInputManager.instance.leftLocked=!1,this.app.timeScale=this.slowedTimescale,this.waitingForLeft=!0},TutorialManager.prototype.handlePrepareRight=function(){this.rightSign.enabled=!0,PlayerInputManager.instance.lockAll(),PlayerInputManager.instance.rightLocked=!1,this.app.timeScale=this.slowedTimescale,this.waitingForRight=!0},TutorialManager.prototype.handlePrepareTurbo=function(){this.turboSign.enabled=!0,PlayerInputManager.instance.lockAll(),PlayerInputManager.instance.turboLocked=!1,this.app.timeScale=this.slowedTimescale,this.waitingForTurbo=!0},TutorialManager.prototype.reset=function(){this.waitingForJump=!1,this.waitingForSlide=!1,this.waitingForLeft=!1,this.waitingForRight=!1,this.waitingForTurbo=!1,this.upSign.enabled=!1,this.downSign.enabled=!1,this.leftSign.enabled=!1,this.rightSign.enabled=!1,this.turboSign.enabled=!1,PlayerInputManager.instance.unlockAll(),this.app.timeScale=1};var PlayerInputManager=pc.createScript("playerInputManager");PlayerInputManager.attributes.add("turboButton_e",{type:"entity"}),PlayerInputManager.prototype.initialize=function(){PlayerInputManager.instance=this,this.leftControl=!1,this.rightControl=!1,this.leftControlDown=!1,this.rightControlDown=!1,this.leftControlUp=!1,this.rightControlUp=!1,this.lastLeftControl=!1,this.lastRightControl=!1,this.swipedDown=!1,this.swipedUp=!1,this.swipedRight=!1,this.swipedLeft=!1,this.justSwipedUp=!1,this.justSwipedDown=!1,this.justSwipedLeft=!1,this.justSwipedRight=!1,this.turboButton=!1,this.justTurboButton=!1,this.app.on("control:left_down",(function(){this.leftControl=!0}),this),this.app.on("control:left_up",(function(){this.leftControl=!1}),this),this.app.on("control:right_down",(function(){this.rightControl=!0}),this),this.app.on("control:right_up",(function(){this.rightControl=!1}),this),this.app.on("swipe:up",(function(){this.swipedUp=!0}),this),this.app.on("swipe:down",(function(){this.swipedDown=!0}),this),this.app.on("swipe:left",(function(){this.swipedLeft=!0}),this),this.app.on("swipe:right",(function(){this.swipedRight=!0}),this),this.turboButton_e.script.managedButton.on("click",(function(){this.turboButton=!0}),this),this.jumpLocked=!1,this.slideLocked=!1,this.leftLocked=!1,this.rightLocked=!1,this.turboLocked=!1},PlayerInputManager.prototype.update=function(t){this.leftControlDown=this.leftControl&&!this.lastLeftControl,this.rightControlDown=this.rightControl&&!this.lastRightControl,this.leftControlUp=!this.leftControl&&this.lastLeftControl,this.rightControlUp=!this.rightControl&&this.lastRightControl,this.lastLeftControl=this.leftControl,this.lastRightControl=this.rightControl,this.justSwipedUp=this.swipedUp,this.justSwipedDown=this.swipedDown,this.justSwipedLeft=this.swipedLeft,this.justSwipedRight=this.swipedRight,this.swipedUp=!1,this.swipedDown=!1,this.swipedLeft=!1,this.swipedRight=!1,this.justTurboButton=this.turboButton,this.turboButton=!1},PlayerInputManager.prototype.getJumpPressed=function(){return!this.jumpLocked&&(InputManager.instance.wasPressed(pc.KEY_UP)||InputManager.instance.wasPressed(pc.KEY_W)||this.justSwipedUp)},PlayerInputManager.prototype.getSlidePressed=function(){return!this.slideLocked&&(InputManager.instance.wasPressed(pc.KEY_DOWN)||InputManager.instance.wasPressed(pc.KEY_S)||this.justSwipedDown)},PlayerInputManager.prototype.getLeft=function(){return!this.leftLocked&&(InputManager.instance.isPressed(pc.KEY_A)||InputManager.instance.isPressed(pc.KEY_LEFT)||this.leftControl)},PlayerInputManager.prototype.getRight=function(){return!this.rightLocked&&(InputManager.instance.isPressed(pc.KEY_D)||InputManager.instance.isPressed(pc.KEY_RIGHT)||this.rightControl)},PlayerInputManager.prototype.getTurboPressed=function(){return!this.turboLocked&&(InputManager.instance.wasPressed(pc.KEY_T)||InputManager.instance.wasPressed(pc.KEY_SPACE)||this.justTurboButton)},PlayerInputManager.prototype.getLeftPressed=function(){return!this.leftLocked&&(InputManager.instance.wasPressed(pc.KEY_A)||InputManager.instance.wasPressed(pc.KEY_LEFT)||this.leftControlDown||this.justSwipedLeft)},PlayerInputManager.prototype.getRightPressed=function(){return!this.rightLocked&&(InputManager.instance.wasPressed(pc.KEY_D)||InputManager.instance.wasPressed(pc.KEY_RIGHT)||this.rightControlDown||this.justSwipedRight)},PlayerInputManager.prototype.lockAll=function(){this.jumpLocked=!0,this.slideLocked=!0,this.leftLocked=!0,this.rightLocked=!0,this.turboLocked=!0},PlayerInputManager.prototype.unlockAll=function(){this.jumpLocked=!1,this.slideLocked=!1,this.leftLocked=!1,this.rightLocked=!1,this.turboLocked=!1};var EventOnplayerTrigger=pc.createScript("eventOnplayerTrigger");EventOnplayerTrigger.attributes.add("justOnce",{type:"boolean",default:!0}),EventOnplayerTrigger.attributes.add("event",{type:"string"}),EventOnplayerTrigger.prototype.initialize=function(){this.triggered=!1,this.entity.collision.on("triggerenter",this.handleTriggerEnter,this)},EventOnplayerTrigger.prototype.update=function(e){},EventOnplayerTrigger.prototype.handleTriggerEnter=function(e){e.tags.has("player")&&!this.triggered&&(this.app.fire(this.event),this.justOnce&&(this.triggered=!0))};var EntitySelectBasedOntouch=pc.createScript("entitySelectBasedOntouch");EntitySelectBasedOntouch.attributes.add("touchEntity",{type:"entity"}),EntitySelectBasedOntouch.attributes.add("keyboardEntity",{type:"entity"}),EntitySelectBasedOntouch.prototype.initialize=function(){this.updateState()},EntitySelectBasedOntouch.prototype.updateState=function(){this.touchEntity.enabled=this.app.touch,this.keyboardEntity.enabled=!this.app.touch};